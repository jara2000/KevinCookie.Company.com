
ZCAHQU01  <-- Use for mkdir on ISILON

-----------------------------------------------------------------------------------
For those stupid tricky mfstgXXX  folders !!
  Jon :   Look at   wcalqaiz & wcahqa68 	cat /etc/netgroup |grep -w nfs_mfstgpr1
  Yang:   Look at   wcahqk2w       			  cat /etc/netgroup |grep -w nfs_mfstgQAE
-----------------------------------------------------------------------------------


automount -m   <- On Linux will list all automounts
lanscan -q

auditctl -e 0   <-- On wcalqk7e  to stop auditd

zcat file.gz    <-- to read .gz file

D0ntt0uchm3!   

Get2Work	(search SSU Admin for :  console-hp )

export PATH=/opt/hpvm/bin:$PATH


RHEL8 -> rmc1 & rmc5  (zcalqu08 & zcahqu02 ) - will replace zcalqu03


( \\automount\pwc\prodops\DSR\minutes  )

   
*Goto http://www.hpe.com/info/softwaredepot  to download bundles above!

 Goto  https://support.hpe.com/hpesc/public/home    for patches, case mgmt. 
 	     https://support.hpe.com/hpsc/patch/content?action=homepas
	   


Messaging - L.P : There is a DXC Mailbox Migration change that will happen in the next few days.
It will increase your mailbox size from 2GB to 6GB.

If ever you have issues login to DXC outlook in the next days, here is a procedure. 
Close outlook, start Chrome and access https://mail.us.csc.com then login using MFA and then start Outlook.

==============================
 
Pinsonneault, Daniel
 4013568 - for baseline  (for what PLM ?)
 4134713 - for VPM refresh - billable

 4133120 - for Small Project Work 1300-1399 code for 2021
 4122184 - for Small Project Work 1300-1399 code for 2020  <-- Do not use !!


Cipriano, Peter
    AIX is for VPM 1.13 environments in the DE-LAB ...
	PLM does not use AIX, PLM is 100% on LINUX 



codes

===========================================================================================
Check curent version of 'ansible':
	ansible --version

Check previous version of 'ansible' (displays version number(s) and other details):
	yum list installed ansible\*
	




===========================================================================================

 sysedge

 pssh -H  WCALQAH2 --inline "cat /opt/ehealth/bin/version"
 pssh -H  WCALQAH2 --inline "rpm -qa"
 pssh -H  WCALQAH2 --inline "rm -f /var/lib/rpm/__db.00* ; rpm -vv --rebuilddb"
 pssh -H  WCALQAH2 --inline "rpm -qa"

 cd /git_repos/p931241/las/ ; ansible-playbook -i 'WCALQAH2', uninstall_playbook.yml -t u-sysedge
 cd /git_repos/p931241/lcm/ ; ansible-playbook -i 'WCALQAH2', -t sysedge lcm_maintenance.yml
 
 pssh -H  WCALQAH2 --inline "cat /opt/ehealth/bin/version"


===========================================================================================


pssh -H wcalqkfq -H wcalqs12 -H wcalqkg8 -H wcahqd10 -H wcalqafl -H wcalqf2b -H wcahqs0f -H wcalqago --inline /etc/init.d/CA-SystemEDGE restart

==============================

AOP codes list kept in Danny's spreadsheet here:
	
	P:\Platform\General\AOPs\2021\AOPS 2021.xlsx

==============================

Danny inventory script that queries mongo db

zcalqu03 ~$ getinv.py -i xlqp077 --heading

zcalqu03 ~$ getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=Linux|grep -i -e pbi -e pbj -e PH1

**zcalqu03 ~$ getinv.py -pl -s OSI_OS=HP -c ServerName,assetTag,REM_Model_#,PDX_short_description,OSI_OSVER,PDX_serial_number,OSI_OS,REM_Server_Function,PDX_dv_install_status,REM_Use_Type --heading

zcalqu03 ~$ getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=HP-UX |sort -nk1


==============================
PMREA Enovia  server is wcalqajf

On wcalqajf check logs in /var/tmp/avncomdm.trace  

ie: grep pw43911 /var/tmp/avncomdm.trace 



To convert epoch to human readable time use:  https://www.epochconverter.com/

$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 cn=pw43911 | grep -i cry
	...
	pwcUnixCryptTimestamp: 19068				<-- Days since EPOCH (60 * 60 * 24 * 19068) then use url above
	pwcUnixPWDCrypt: bnhX3By2arUF2

~~~~~

	From: Gaudet, Andre <agaudet@dxc.com> 
	Sent: 17 Mar 2022 11:10 AM
	To: Avendano, Jefferson <javendano@dxc.com>
	Subject: RE: UTPC INC1460707 | User is not able to login Enovia PM after LDAP password change
	
	Jeff, the crypt timestamp is 19023. That is January 31, 2022.
	
	If this user changed his password recently, it looks like the change has not percolated down to Unix yet.
	I have seen this in the past where there can be a delay of a few hours or days between the change in AD/LDAP and Unix.
	
	If Alain Cote is not on vacation, you could reach out to him.
	
	
	Andre Gaudet

===============================


vi 
:set bg=dark


Physical Topology Model - PTM
Bill of Materials - BOM 


------------------------------------------------------------------------------------------------------------------------------------------------
Check for NFS hang at a mount point:    
# strace df  	<-- will hang at the mount in question    


/opt/ehealth/bin/sysedgectl restart | stop | start  			<-- cool !
                                                                                     
 ssh wcalqad0 rm /etc/profile.d/no_root*sh  ; ssh wcalqad0		# Had a stale NFS mount and Jon fixed it with :   umount -f /home/limpet    ( see /etc/auto.home )
 cat /etc/mnttab | grep nfs | cut -d "," -f1 | grep wcalqf16    #  /sbin/init.d/autofs  stop|start ( cat /etc/mnttab | grep nfs | cut -d "," -f1 | sort )
.																#  bdf -t nfs
	[2:53 p.m.] Gaudet, Andre
	Yes, un-mounted anything automounted from wcalqad0 (left anything under /var/hpsrp alone). 
	Then I restarted autofs.

	!!! DO NOT Kill any process owned by "srp" when checking with:   wcalqad0# ps -ef | grep mount     !!!

 wcalqad0# grep wcalqf16 /dev/mnttab				and do a "umount -f" of everything except /var/hpsrp mounts ******

------------------------------------------------------------------------------------------------------------------------------------------------

ssh wcahqa0l rm /etc/profile.d/no_root*sh  ; ssh wcahqa0l
ssh wcalqa5n rm /etc/profile.d/no_root*sh  ; ssh wcalqa5n

ssh WCAHQA6H rm /etc/profile.d/no_root*sh  ; ssh WCAHQA6H
 rm /etc/profile.d/no_root*sh





 
 find /var -xdev -type f -print | xargs ls -ld | sort -rnk 5 |more
 find /var -xdev -type f -mtime 0 -ls
 
by user qaeadm: 
 find /tmp -xdev -user qaeadm -type f -print| xargs ls -ld | sort -rnk 5 |more

by user qaeadm total size in bytes:
find /tmp -xdev -user qaeadm -type f -print| xargs ls -ld | awk '{print $5}' | awk '{total += $1} END {print total}'

by user qaeadm in last 24 hrs and sort by time:
find /tmp -xdev -user qaeadm -type f -mtime 0 -printf "%T@ %Tc %p\n" | sort -r

by user qaeadm in last 24 hrs and total size in bytes:
find /tmp -xdev -user qaeadm -type f -mtime 0 -exec ls -ldtr {} \;| awk '{print $5}' | awk '{total += $1} END {print total}'


find /tmp -xdev -user qaeadm -type f -mtime 0 -exec ls -ldtr {} \;
 
 find /var -xdev -type f -mtime 0 -exec ls -ldtr {} \;					
 find /var -xdev -type f -mtime 0 -exec ls -ldtr {} \;					
 
 find /var/log/cfg2html -xdev -type f -mtime +30 -exec ls -ldtr {} \;		
 find /var/log/cfg2html -xdev -type f -mtime +30 -exec rm -f {} \;			CAREFUL !!!!
 
 find /var/log/cfg2html -xdev -type f -mtime +30 -exec rm -f {} \;			CAREFUL !!!!
 
 find /var -xdev -type f -atime -150 -exec ls -ldtur {} \;	
 
 
 
 find /var -type f -mtime 0 -ls
 

 /var fillinng up:
 for i in `du -ah /var/* 2>/dev/null | sort -rh | grep utc- | awk pcs ss`; do rm -f $i; done
 for i in `du -ah /var/* 2>/dev/null | sort -rh | grep utc- | awk '{print $2}' | grep -v /var/lib`; do rm -f $i; done
 
 
List folder owners :
 find * -prune -type d -user pw49468 -exec ls -ldtr {} \;      
 find * -prune -type d -user pw49468 -exec ll -dtr {} \;    
 
pssh -H wcalqu08 "/etc/init.d/CA-SystemEDGE restart"

pssh -h list "/etc/init.d/CA-SystemEDGE restart"


pssh -h /tmp/ja "yum clean packages ; yum clean all"
pssh -H wcalqk7k "yum clean packages ; yum clean all"

	for i in `du -ah /var/* 2>/dev/null | sort -rh | grep utc- | awk '{print $2}'  | grep -v "/var/lib"`; do rm -f $i; done     <-- /var old repos

LDAP user info :  /pwc/prod/maillist/lists/PLM_UserList.txt 

# lvextend -r -L +5G /dev/vgLocal/lvVar    extended by 5Gb
# lvextend -r -L +2G /dev/vgLocal/lvUsr
# lvextend -r -L +1G /dev/vgLocal/lvUsers


=======================================
Andre explained:

By default root has no priviledges accross NFS!  

With a few exceptions where some servers were configured to allow it, such as :
 Linux -> wcalqb0k , 
 HPUX  -> wcalqb0e ,  

# chown -R -h p931241:bid1343 file					

You can also use the numerical number representaion of the UID & GID

# chown -R -h 82608:1343 file


recursif  recursive  chown chgrp 
=======================================
With Peter C. we found:

Home folder owner / group listing and changes - chown

 cd /home/stingray
 find * -prune -type d -user pw55873 -exec ls -ldtr {} \;  


 find . -exec ls -ldtr {} \;
 
 find . -exec chown p931241 {} \;
 
 find . -exec chown p931241:bid1343 {} \;
 
==============================

Doing global change using vi :

:g/wcalqa3o/s//wcalqadv/gp

Searches globally wcalqa3o and replaces it by wcalqadv



==============================

 Isilon servers/SANs are on:

 Plant  1 - subnet 141.119.28.x
 Plant  5 - subnet 141.119.28.x
 Plant 22 - subnet 141.119.201.x

example:  wcalqf1r.utcain.com  141.119.28.60




Andre:
  Anything SMB/CIFS coming from Isilon is handled by Windozz, regardless of the AD domain.

	zcalqu03$ host mtl-data										
	mtl-data.utcain.com is an alias for wcalqf1r.utcain.com.
	wcalqf1r.utcain.com has address 141.119.28.58

   User unable to access " \\MTL-DATA\data\MANU\Scvms "  
   Note:   "Pour plus d'informations sur les autorisations, voir le Centre d'aide et de support Windows "  directly in Pop-up message !!!



==============================

Environments by subnet :

AD Lab -> 141.119.12
 DELab -> 141.119.239		141.119.230/24 (new)
	SS -> 141.119.2    Secure Subnet 


=====================================================================================

pssh -H wcahqa3q --inline "cat /opt/ehealth/bin/version"
pssh -H wcahqa3q --inline "rpm -qa"
pssh -H wcahqk3g --inline "rm -f /var/lib/rpm/__db.00* ; rpm -vv --rebuilddb"
pssh -H wcahqk3g --inline "rpm -qa"

cd /git_repos/p931241/las ; ansible-playbook -i 'wcahqa3q', uninstall_playbook.yml -t u-sysedge
 
cd /git_repos/p931241/lcm ; ansible-playbook -i 'wcahqa3q', -t sysedge lcm_maintenance.yml
 
pssh -H  xlqt021 --inline "cat /opt/ehealth/bin/version"


===========================================================================================


If Catherine Bell requests to restart the connectors:

As root on 
zcahqu01# ssh 141.119.186.217		or 
zcahqu03# ssh 141.119.186.217

 and launch the command she ask below:

opl_7xctl stop
iptctl stop

iptctl start
opl_7xctl start



keywords: connectors Bell

=============================

100 Useful Unix Commands:  http://oliverelliott.org/article/computing/ref_unix/


==================================

JSON scripts from Danny:

search for
search val
CountVar

http://unix-inventory-mcsunix.ose-sandbox.pwc.ca/
http://unix-inventory-mcsunix.ose-sandbox.pwc.ca/
http://unix-inventory-mcsunix.ose-sandbox.pwc.ca/
http://unix-inventory-mcsunix.ose-sandbox.pwc.ca/findServer/zcalqu03

=================================

export  LS_COLORS=$LS_COLORS:'di=0;36:'

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
/srv/util/bin/ 	contains a number of useful scripts that are mostly used on HP-UX
/srv/srvdoc 	contains a lot of information which is automatically collected by collection scripts
/srv/infra	is a little more recent and contains info on and tools. This directory is more widely used by Linux.
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
VPN

20.137.10.24  /  20.137.68.75   (with 2nd IP sometimes connection fails)
$4pwc$
getent passwd

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

/sudo/bin/ssu


	***NOTE:   ZCALQU05
	   ----
	All server sudo logs are found on zcalqu05 in /var/log/elasticsearch/syslog/
	They are categorized daily
	
	zcalqu05 /var/log/elasticsearch/syslog #  zcat sudo.log-20200204.gz | egrep -i "wcalqk7d|dsplmldm"|more


wcahqa6q	/var/log/elasticsearch/syslog/      allservers.log | auth.log | sudo.log			@unix-syslog-f5.pwc.ca
wcalqaju	/var/log/elasticsearch/syslog/      allservers.log | auth.log | sudo.log			@unix-syslog-f5.pwc.ca




***NOTE:
   ----
All server sudo logs can be seen via GUI at http://unix-logstash.pwc.ca/


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Teams SNOW queues:
Location Base service:  For Technicians - Deskside Support ?
  PLM Team email: DXC.PLM-Team@dxc.com
  
      Web team  :  PWC Collab Infra Web
  Security L2   :  PWC Security 2nd Level
  Security Team :  GP PWC CSC Security 		gp.pwc.csc.security@pwc.ca
    Hadoop Team :  PWC CAPS  			 	janine.m.rice@dxc.com    (rbalakrish26@dxc.com; erivera32@dxc.com; ktony@dxc.com; telguebaly2@csc.com)   
 Peter Cipriano :  PWC Engineering Apps
Carlow & Ferris :  PWC Backup Infrastructure  (Ed Ferris  not sure?)
 
  Claude Lavoie :  SAS Team  - Claude.Lavoie@pwc.ca
  FastIT		:  Michael Soloveichick msoloveichic@dxc.com
  WEB Linux   	:  Michael Soloveichick  & Robert Mair
  Test Cell Q 	:  PWC TFC Apps  , Denis Laroche  
  PLM apps		:  PWC Manufacturing Apps   (Peter Cipriano, Kambiz, Rachid (?) )
.				
.				:  PWC Wintel team  - Shah Riasat rshahruk@dxc.com


  BlueCat 		:  AMER QIP		Bluecat Admins - they can restart process on the Bluecat (?) VM server... to resolve.
.					 Edward Adams: edward.adams@dxc.com   : +1 772-696-5793  in the USA
.					Alan Davidson: alan.davidson@dxc.com  : +1 302-332-5027  in the USA




Location Based Services (LBS): Technicians Queue

SAP print issues : PWC Batch Scheduling   <- Fred Cyr ....	we don't have the access in sap to see the report for app servers that are stuck 
.				   GP.PWC.CSC.ProdOps@pwc.ca 				if the sap transaction is really not working it would be sap team issue (per Nancy).

SNOW queue for Poland :  EE POD Platform


Carlos Alvarez (  calvarez7@dxc.com   + Cell +1.647.993.2525)  Backup - Ron Doray in the USA ?


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
RHEL get server/kernel Architecture

wcalqk3g# uname -m
i686							<-- 32-bit

wcalqk3g# getconf WORD_BIT
32								<-- 32-bit

wcalqd1o# uname -m
x86_64




keywords:  architecture arch 32bit  64bit
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Cool stuff from Cat in her home dir:  /home/jade/bi36318/bin


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Portal for EMC DGC luns:
  http://vnx1-pl1-spa.pwc.ca/
  

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Cool option:  ssh -o StrictHostKeyChecking=no 



for i in {1..19}; do sshpass -p $pw ssh -o StrictHostKeyChecking=no ecomm-services-$i.test.internal "date; echo "Service status for" ecomm-services-$i.test.internal; sudo /sbin/service ecomm-services.internal status"; echo "";done


sshpass -p $PASS ssh -o StrictHostKeyChecking=no

On MAC:

/etc/bashrc 

export pw=Lz20x600!
export dns_mon=Tr%%12mf%$
export tpmpw=B6AgUUwW28Vj8Q
export toto=\!Dr3V1lG3n1us#


sshpass -p $toto ssh root@10.16.49.177

whtl16478

~/.bash_profile
alias hi='echo -e "\n Running history command: \n" ; history |grep '
alias tr='echo -e "\n Running traceroute command: \n" ; traceroute '
alias ns='echo -e "\n Running nslookup command: \n" ; nslookup '
alias p='echo -e "\n Running ping -c2 command: \n" ; ping -c2 '
alias me='`hostname`'
alias s='sshpass -p $pw ssh -o StrictHostKeyChecking=no'
alias dns='echo -e "\n `clear` ssh itos@dns-monitor.corp-apps.com  Tr%%12mf%$ \n" ; sshpass -p $dns_mon ssh itos@dns-monitor.corp-apps.com'
alias st='echo -e "\n `clear` Connecting to stage-1.test.internal \n" ; ssh stage-1.test.internal'

alias vmclone='echo -e "\n`clear`" ; ssh -p 6021 root@localhost'
alias vm7='echo -e "\n`clear`" ; ssh -p 6020 root@localhost'
alias bf='clear ; ~/bf'
alias bfl='clear ; ~/bfl'
#alias jlat=' echo -e "\n `clear` ssh monitoring-jumpbox-1.lat.internal" ;  ssh monitoring-jumpbox-1.lat.internal'
alias olat='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.lat.internal" opennms-1.ltwsc.corp-apps.com'
alias obel='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.bel.internal" opennms-1.bpa.corp-apps.com'
alias otpe='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.tpa.internal" opennms-1.tpe.corp-apps.com'
alias otpa='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.tpa.internal" opennms-2.tpa.corp-apps.com'
alias omak='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.mak.internal" opennms-2.mak.corp-apps.com'
alias omal='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.mal.internal" opennms-2.mal.corp-apps.com'
alias orgt='ssh -o ProxyCommand="ssh -W %h:%p monitoring-jumpbox-1.rgt.internal" opennms-2.rgt.corp-apps.com'
#
#
# KOC CentOS 7 test Boxes 1 - 6
alias v1='sshpass -p $toto ssh root@10.16.49.163'
alias v2='sshpass -p $toto ssh root@10.16.49.165'
alias v3='sshpass -p $toto ssh root@10.16.49.172'
alias v4='sshpass -p $toto ssh root@10.16.49.178'
alias v5='sshpass -p $toto ssh root@10.16.49.175'
alias v6='sshpass -p $toto ssh root@10.16.49.177'
#
#  sshpass -p $pw ssh javendano@
#  sshpass -p $pw ssh -o StrictHostKeyChecking=no javendano@
#
# Run traceroute to swapi.agingames.com from your workstation
alias trswapi='ssh -t javendano@opennms-1.tpe.corp-apps.com sudo -u esportz "sudo traceroute -p 443 -T swapi.agingames.com"'
#
#Run traceroute to gi.iam87.com from your workstation
alias trgi='ssh -t javendano@opennms-1.tpe.corp-apps.com sudo -u esportz "sudo traceroute -T gi.iam87.com"'

# Setting PATH for Python 2.7
# The original version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH


++++++++++++++++++++++++++++++++++++++++++++++++++++++++

ncdu - NCurses Disk Usage

++++++++++++++++++++++++++++++++++++++++++++++++++++++++

tr - translate characters

wcahqq1d# uname -r | cut -d. -f 2-3 | tr -d .
1131

wcahqq1d# host wcahqq1d |awk '{print $4}'
141.119.9.3

wcahqq1d# host wcahqq1d |awk '{print $4}' | tr -d .
14111993

++++++++++++++++++++++++++++++++++++++++++++++++++++++++

make_tape_recovery logs are at   /var/opt/ignite/logs/makerec.log  timestamp    ???
make_net_recovery logs are at     /var/opt/ignite/clients/<client_name>/recovery/latest/"



vi /usr/sbin/va
 cu -l /dev/tty0p2



SCC.ATL.HP.COM:
http://hurricane.atl.hp.com/cgi-bin/ww_ipatch?goto=links&s_region=Americas&country=US%20and%20Canada&b_unit=MC%2FSE
 Login: pssdata
 Passwd: hp.now

  
http://wtec.cup.hp.com/~hpuxha/newsletter/20.htm  <-- snmp security bulletin

DesignJet 2500C  IP: 15.37.112.254
Glance Documentation :  /opt/perf/paperdocs/gp/C/



POWERFAIL - http://wtec.cup.hp.com/~hpux/io/current_issues/articles/100870914165563.html
KBRC00013582        Potential causes for PV NUM Powerfail messages in syslog 

KBRC00006123        Using BOOTP to troubleshoot Bootpd problems. 


KBRC00002076        11.0 32-bit to 64-bit upgrade 

UVPARKBAN00000896   Ignite-UX and vPars Cookbook, Verson 1.0, November 2001 
UVPARKBAN00000897   Ignite/UX and vPars Cookbook, Version 2.0, July, 2002 


KBRC00000813             HPUX INSTALL: swinstall(1M) Fails With No Active Network Card - Changing "localhost" ***



KBRC00008918             Install Steps for 11.00 
3100530009               EMS: how to disable an EMS HW monitor for a single instance
UEMSKBRC00011291         EMS: How to prevent ( disable ) EMS monitor requests for a device  <- disabled_instances
KBRC00012166             EMS: How to add multiple email addresses for event notification 


See KMINE documents KBQA00000183, KBQA00000182, KBQA00000181 for instructions on disabling an entire 
monitor, an entire device, or just excluding a particular device from coverage by a specific monitor. 


vi /var/stm/data/tools/monitor/disabled_instances
 - UEMSKBRC00012042 
 - UEMSKBRC00007399
 - disabled_instances 



3200987067           How to TOC a hung system 


DpamLC200111121      N and L Class A6696B Rev B GSP Q and A 

ULVMKBRC00008020      VGID 
UFSKBAN00000759          Supported File and Filesystem Sizes 
KBQA00000131             Supported file and file system sizes for JFS and HFS 
KBRC00009036          Formula to calculate PE_SIZE to avoid "File too large" error - LVM

LVMKBRC00006257          Removing a "ghost disk

rcfaxfilesystem002       Move a Filesystem to a Different Logical Volume. cpio
KBRC00007438             Does tar, cpio, pax, ftio support large files over 2 gig? 


KBRC00005001         Wipe classified, sensitive or proprietary data from disks. 
KBRC00010594         HPUX: How To Wipe Out Data From A Disk 
KBRC00010654         Electronically Scrubbing SCSI Disk Drives 
KBRC00010033         /dev/zero support 


KBRC00016822             File System: How to reduce an OnLineJFS or Base JFS file system 
KBRC00000204             Extending /var, /usr, /tmp without Online JFS 
KBRC00002271             Troubleshooting Stale Mirrored Extents
ULVMKBRC00016527         MIRROR/UX: Troubleshooting Stale Mirrored Extents 


KBRC00011764         How to account for memory usage on an HP-UX system 
KBRC00011687         How to remove a shared memory segment? 
RCMEMKBAN00000027    Understanding Shared Memory on PA-RISC Systems 

MEMORYKBAN00000975   Memory Usage (What is using all of the memory?) 


UEMSKBAN00000730      Event Monitoring Service White Paper Information
KBAN00000716          Checklist for Update to hpux 11.00 
3100429517            OB II: configuring robotic device file for fibre channel 
pamNC200201081        HP9000 rp7400 (N-Class): PDC Revisions 
KBAN00000138          LVM Distributed Allocation Policy 
LVMKBRC0000625        Removing a "ghost disk
KBAN00000347          LVM: Procedure for replacing an LVM disk in HP-UX 10.x and 11.x 
KBRC00015937          Stale Extents After LVM Mirrored Disk Replaced

KBRC00016113          volume group on a LUN - increase size 

4000053612            How to use with LVM increased capacity of a lun reconstructed with netraid 4si 
                      see vgmodify & pvchange

ULVMKBRC00016982      Example of using vgmodify to add larger disk to volume group 

KBRC00010545           Vgimport Questions from 11.0 to 11i and vica-versa 

KBRC00013724           SYS ADM: Current audit file size error message on console

VIKBRC00008973         Reactivating the 'root' account and changing the 'root' password ( trusted )
8606199373             Trouble with password > 8 characters and trusted system... 
HPUXKBRC00009062       How to change user account login policy on a trusted system
KBRC00001581           Recover from lost root password with trusted system 
A5730159               How to /startdir/startdir locked accounts on a trusted system 
USECKBRC00007680       Trusted system: How to copy configuration to another system 
KBRC00010639           Troubleshooting a Trusted system 
KBRC00011604           How to increase the password restrictions  (Trusted & Untrusted)

S3100002583            Configuring password aging policies on non-trusted systems 
3100642627

UCMDSKBRC00011334      How is password aging information stored on a non-trusted system? 
KBRC00014139           Where to find documentation on password aging for non trusted? 
KBRC00009329           How do I disable password aging for a specific user on a non-trusted system?
KBAN00000715           How does password aging on non-trusted systems work?
KBRC00011604           How to increase the password restrictions 


Sys Admin (Trusted System)      http://docs.hp.com/hpux/onlinedocs/B2355-90742/B2355-90742.html
								- (Administering a System: Managing System Security )


Ignite docs   -->      /opt/ignite/share/doc 
KBRC00007035           Ignite-UX and Cloning guidelines
KBRC00010753           Examples to verify make_recovery or make_tape_recovery tape 
KNC090199002           Ignite/UX: Network Archiving and Recovery 
KBRC00000785           How to verify the Ignite Server Setup 
KBRC00007660           Oracle and XVFB (X :Frame Buffer)
3200115673             Cloning different class machines

UNX1030169             How to clone an existing system using Ignite-UX
                       Also  http://docs.hp.com/en/5991-0733/5991-0733.pdf
                             http://www.docs.hp.com/en/B2355-90875/index.html
                             http://docs.hp.com/en/oshpux11i.html#Ignite-UX

HPUXKBRC0000886        How can I restore mirrors with make_tape_recovery? 
KBAN00000082           Rebuilding mirrors with make_recovery
4000010334             IUX :recovery (tape) fails with 36GB disks   (my case: 3205492006 ) Ignite

KBRC00013152           How to manually remove a client from an ignite server 
A5905231               Ignite: removing client icon from Ignite server 


KBRC00014714           Creating An Alternate Boot Disk (clone)

VIKBRC00010528         Sys Adm: Using Ignite-UX to extend /stand or / filesystem? 

KBRC00013303           make_*_recovery : problem with the list of files to archive ( flist few/incorrect entries )


KBAN00000716            HPUX UPGRADE: Checklist For Updating To HPUX 11.00 


SMSKBRC00006585         Restoring Default File Permissions/Ownership 

KBRC00004523            How to use adb to get system information 

KBRC00009794            SYS ADM: cron(1M) fields explained 

rcfaxrestore001         Recovery From a Root Disk Failure 

CAST030605101149664     Debug ELM Licensing issues on JFS 3.3    (HP Internal)


KBAN00000750            Dead Gateway Detection ( at 11.x ndd + gateway )

KBRC00004879            How to change the instance numbers of ext_bus and dev files ??? 
KBAN00000795            How Does One Change An Instance Number 

KBRC00010270            What are the 11.x patches that eliminate the need for pfs cmds? 
KBRC00010147            New patches eliminate pfs_mount for CD-ROMs 

KBRC00009295             How to stop su messages from being logged to syslog.log? 
UCMDSKBAN00001065        How can ftp entries be routed to a file separate from syslog.log ?  
KBRC00008132             Configuring syslogd to log messages to a remote system and file.
A4820777                 log syslog messages to a remote machine
KBRC00007876             Cant get syslogd to log to remote system 
USAMKBRC00014927         how to redirect ftp logging to a different file: local5   ( syslog.conf )

KBRC00013527        wu-ftp permissions issue    
KBRC00008355        Setting up restricted user accounts with FTP 
KBRC00012329        umask unmasked and explained 
A5651654            ARPA: how to configure the new ftpd at 11.0 to chroot certain users 
PU94040716369       How can I modify the file permissions mask (umask) for ftp users? 


KBRC00017301        11.11 v2 / 11.23 Unsupported Hardware as of Sep 2004 Release 



JAGaa07736  - PAD file
JAGab76789  - PAD file 

CMTKBRC00008860      Enabling iCOD processors without email configured on system 
4000028463           CU needs a license in order to use iCOD ( iCAP )
          New email address ( icap_admin@hp.com) for contacting the  iCOD/iCAP  Administrator
          for non-technical customer issues like admin. billing, licensing, etc.    


KBRC00003708           Only user / group id number is returned instead of user/group names ( pwgrd )

KBRC00006484           How to determine the hpux level at the isl prompt ' Isl> hpux ll '

KBRC00002204           Cleanup , how do I reclaim space in /var/adm/sw/save on an 11.0 system? 

KBRC00009559           What is the difference between the 11.x versions of HP-UX? 
GDUNX11001             PA-8800 systems require December 2003 (or later) patches, drivers and OnlineDiags 11i

CSCI00000208            How to add serial device without spooling 

KBRC00013331            tapeinfo utilit license codeword 
KBRC00009822            How can I create a DDS3 tape on a DDS4 tape drive ?

KBRC00014719            SYS ADM: swcopy, script to copy multiple depots to one depot 

KBRC00002021             Jetdirect network printer prints multiple copies 
3212044152    <-- Jetdirect case ??
KBRC00000395             JetAdmin HP LaserJet prints multiple copies of the same print job 

W3455441             Printing: Verify remote printer correctly setup. 

UPRTKBAN00000857     Script to verify and check lp spooler printer configuration 

KBAN00000821         How to fix lp spooler corruption in the pstatus and qstatus files 

A1314253               configuring remote lp spooling  ( configuring a remote printer )
KBAN00000182           How to resolve LP Spooler hang situations 
UPRTKBRC00008900       Add a remote printer thru SAM, printer already exists is returned 
UPRTKBRC00012745       lp spooler limitations on number of printers and print jobs 

UPRTKBRC00014862    How to move the lp spooler configuration to another system 

KBAN00000096
UPRTKBRC00013408  -> Interactively adding network printer without using the'hppi' TUI
UPRTKBRC00010866  -> How to configure network printers into a queue class
UPRTKBRC00010341  -> Adding an HP LaserJet 9000 printer as a network printer
3210870576           Adding a remote printer connected to Windows - use printer name directly




UPRTKBRC00009402    Transferring JetAdmin queues to different system running HPPI 
UPRTKBRC00014862    How to move the lp spooler configuration to another system 
LPKBRC00009243      Transferring print queues from one system to another 
rcfaxspooler001     Moving Lpspooler Configuration Between Systems 
UPRTKBAN00000805    How to merge lp spooler configuration between systems

HPUXERR03       HP-UX LP spooler error messages 
KBAN00000821    How to fix lp spooler corruption in the pstatus and qstatus files 


UEMSKBRC00007399       EMS dm_stape monitor errors while running a backup application 
UEMSKBRC00011291       EMS: How to prevent (disable) EMS monitor requests for a device  disable_instances
0004CWKBRC00007081

KBRC00012166           EMS: How to add multiple email addresses for event notification 


KBRC00003700           FAQ: Environment, Shell, and Profile configuration 
KBRC00000416           User's .profile and .login not being sourced at login. 

 

VIKBRC00008973         Reactivating the 'root' account and changing the 'root' password 


KBAN00000251           UPS Manager II Software Installation ìQuick Install Guideî 
KBRC00008135           How to configure UPS Manager II for two systems and one UPS 
KBRC00001252           How to configure a PowerTrust UPS on an L2000 system 
UUPSKBRC00008714      Configuring the HP PowerTrust UPS monitor daemon ups_mond 

S1100003324A UPS: installing and troubleshooting UPS Manager II
S1100003324B UPS: installing and troubleshooting UPS Manager II

rcfaxfilesystem002     Move a Filesystem to a Different Logical Volume  ( cpio )
KBQA00000256           Keystone MP command table of MP firmware revision 3.


UPERFKBAN00000726      Introduction to Performance Tuning 
KBRC00000947           System Performance Tuning Guide 
KBRC00014838           Determining the Cause of System Performance Problems 


UXEMSKBRC00003120      Cannot create a LAN monitor - "no resources configured ** Great EMS stuff **

KBRC00014628           Moving disks from Server1 to Server2  vgimport / vgimport
KBAN00000514           LVM Quick reference 
A4813999               size limitation of PV for root volume "5628 AND "Volume Group Parameters" vg00
KBRC00004285           Effects of setting large max_pe values for volume groups volume

KBRC00004879           How to change the instance numbers of ext_bus and dev files ??? 
UXSGKBRC00005958       Changing I/O Instance Numbers On A ServiceGuard Server 

KBRC00000302           N-Class system Secure Web Console & LAN Console configuration 

KBRC00000416           User's .profile and .login not being sourced at login. 

G2669407               Cookbook: How to install Object-Cobol 12.x with flexlm 


KBRC00014341     Can st_san_safe kernel parameter be used with the atdd driver?
KBRC00015450     How to configure an IBM tape device with the atdd driver? 

KBRC00010515     Building a New Kernel on 10.X/11.X Systems 
KBRC00014367     How to revert to a previous kernel on B.11.23 


KBAN00001035           sparse file explanation and identifying sparse files 


NLSKBRC00011626        Installing Japanese support onto an existing HP-UX 11.11 OS 

KBRC00005697           HPUX OS: Determining nflock Usage Using lsof(8) 
UVXVMKBAN00000973      Supported disk arrays for VxVM (ASL)
UMCSGKBRC00012842      Not a typewriter (3203462175)

SDUX003                SD-UX: What to do if you encounter problems during an update to HP-UX 11i 

KBRC00011982           Can't SSH to a floating IP address after failover. 
HISEEKBQA00000372      ISEE Questions & Answers (search on   /sbin/init.d/hpservices )

KBQA00000219           ECEN: How to check the GSP log (Boot, Error, Activity) online 

A5906566       How do I proy configure the 7800/96 console for my N440M server?
KBRC00000516   Setting 700/96 terminal to vt100 terminal emulation 

LVMKBRC00005103        How to create a Mirrored Boot Disk on PA-RISC Systems - Cookbook ( lif , pad)

HPUXKBRC00015707       How do I fix the boot message IPL error bad LIF magic at 11.X?


TBRIXKBRC00001367      "bdf" and "du -s" display different size: space process bound 



KBRC00015012  11.11 Guide: Configure two LAN adapters in an APA Link Aggregate 

KBRC00008187 KBRC00013019  Startup/Shutdown Scripts Troubleshooting 

KBAN00000533  HP 9000 Series 700/800 Cabling Guide for Simple Serial Devices


KBRC00015720         What is Swap? 
KBRC00001129         What is pseudo swap? 
KBRC00010136         SYSADM: Swap and Pseudoswap Clarified 
UNX1100028           How to estimate swap space needed for system with > 3.75 GB of RAM 

  Read up on how swap works on HP-UX...
      http://docs.hp.com/en/B2355-90672/ch06s02.html
      http://docs.hp.com/en/1219/tuningwp.html#swap




UDUMPKBRC00012385    Tips for quick dump type identification  tc  ts99 hpmc

3100418195           Adding static route to the network 

4000010334           IUX :recovery (tape) fails with 36GB disks   (my case: 3205492006 )

KBRC00008099          Users with > 8 character login name can no longer login 
                      PHCO_21833 -->  "/etc/default/I_ACCEPT_RESPONSIBILITY_FOR_BYPASSING_SECURITY_CHECKS"

UXDNKBRC00003387      How Do I restore files when booted from the Recovery shell
OZBEKBRC00000607      How do I boot my system in single user mode or other mode ? *****

KBRC00016860          How to identify cause of system reboots  ( wrapper script )

DY023816              Moving /usr from root to its own logical volume 


lpg35037              HP Disks and Disk Arrays - Quick Reference Guide to Array Utilities VA

KBRC00014628          Moving disks from Server1 to Server2   ( vgexport vgimport )

KBRC00011104          HP-UX Secure Shell (SSH) FAQs 

KBRC00014314          Installing patches from the ITRC


KBNL00000879          How to get MCA analysis outputs on the OpenVMS IPF server 

KBRC00016860          How to identify cause of system reboots 
I


dbc_max_pct      http://docs.hp.com/en/B2355-60103/dbc_max_pct.5.html



IA64KBRC00016049 How to set up and configure the A9890 Smart Array 6402 controller IA64

PRM - The 'prmconfig' command may be used to display current PRM configuration, state, and mode 
      information (as well as to manage the PRM configuration).


UFSKBRC00009741        11.0 How can you tell what version of JFS is installed? 

B2491BA Mirror Disk S800
B5403BA Mirror Disk S700

B3929BA Online JFS S800
B5118BA Online JFS S700

KBRC00012884     Oracle automating startup database on hp-ux 11i

KBAN00000907     Example backup/recover commands for fbackup, cpio, tar 
KBRC00000196     Understanding Fbackup/Frecover and Optimizing Backup Performance 
KBRC00000427     fbackup/frecover exit codes and error messages 
fbackup errors    /usr/bin/dumpmsg /usr/lib/nls/C/fbackup.cat |more

UBACKKBRC00010991   How to improve fbackup performance with Ultrium drives 

KBRC00000516    Setting 700/96 terminal to vt100 terminal emulation 

KBRC00017684    Known HPUX 11.23 issues copying largefiles over LAN 



  openssl md5 -hex  filename.depot    or whatever name

  DVD+RW-TOOLS

  http://fy.chalmers.se/~appro/linux/DVD+RW/
  http://docs.hp.com/en/B2355-90893/ch08s04.html


pwgrd/pwgr caches/stores information relating group and user names to their respective GID & UID numerical values.

**********************************************************************************************

	ANSI C		what /opt/ansic/bin/cc

C++ ==	ANSI C++	what /opt/aCC/bin/aCC


B3899BA   HP C/ANSI  C  Developer's Bundle for HP-UX  11i (S700)   www.hp.com/go/c
B3901BA   HP C/ANSI  C  Developer's Bundle for HP-UX  11i (S800)

B3911DB   HP aC++  Compiler  (S700)     www.hp.com/go/c++
B3913DB   HP aC++  Compiler  (S800)



**********************************************************************************************

KBRC00011156
How to mirror root LVM disks on Itanium 11.22

IA64UXKBRC00014416 Booting IA64 systems manually    
IA64KBRC00017398   Manual HP-UX boot methods on Itanium / Integrity systems 


KBRC00014526
How to mirror vg00 using LVM on IA with 11.23 

IA64KBRC00012173
How to Mirror VxVM rootdg on Itanium

KBRC00014263
Replace failed mirrored root and VxVM disks on Itanium. 


IA64KBRC00013285 
How to recover corrupt LIF areas on Itanium systems

KBRC00009151        
Is swap supported on a VxVM volume? 

KBRC00014036
Replace failed root and non-root LVM disks on Itanium

IA64KBRC00013285
How to recover corrupt LIF areas on Itanium systems

KBRC00015135
vgcreate hang on Disks/LUNS > 128 GB


**********************************************************************************************

http://www.redhat.com
 Login:  javendan2000
 Passwd: subaru2000

**********************************************************************************************

https://netcraftsmen.com/troubleshooting-port-channels-and-trunks-between-hp-ux-servers-and-nexus-switches/

HP Auto Port Aggregation (APA) is a software product that creates link aggregates, often called
trunks, which provide a logical grouping of two or more physical ports into a single fat pipe.  

HP-UX ties a VPPA (Virtual Physical Point of Attachement) to each VLAN. The VPPA numbers range 
from 5000 – 8999 and are used to send and receive 802.1Q tagged frames.




**********************************************************************************************

tcpdump:
 
 https://hackertarget.com/tcpdump-examples/
 
 Check for established tcp connections:

  ndd -get /dev/tcp tcp_status | grep EST | wc -l

***************************************

HP-UX 11i Internet and Networking - tcpdump Examples:
 tcpdump -nnei em1 | grep -e "vlan 107" -e "vlan 193" -e "vlan 197"


***************************************
HP-UX https://community.hpe.com/t5/Networking/HPUX-ftp-Problem-421-Service-not-available-remote-server-has/td-p/4078185#.YEdutGhKiiM





***************************************

https://support.hpe.com/hpesc/public/docDisplay?docId=c01518874&docLocale=en_US

***************************************

https://www.lazysystemadmin.com/2011/09/find-out-which-switch-port-connected.html

Find upstream network switch / port connected to: 

  tcpdump -v -i eth1 -s 1500 -c 1 '(ether[12:2]=0x88cc or ether[20:2]=0x2000)'
  
  tcpdump -v -i em50 -s 1500 -c 1 '(ether[12:2]=0x88cc or ether[20:2]=0x2000)'

  tcpdump -v -i ens32 -s 1500 -c 1 '(ether[12:2]=0x88cc or ether[20:2]=0x2000)'
  tcpdump -nn -v -i ens32 -s 1500 -c 1 'ether[20:2] == 0x2000' | grep -E 'Device|Port|VLAN'
  
  tcpdump -nn -v -i em1 -s 1500 -c 1 'ether[20:2] == 0x2000' | grep -E 'Device|Port|VLAN'
  

ethtool eth1
ethtool em50


HP-UX:   tcpdump -v -i lan0 -s 1500 -c 1 '(ether[12:2]=0x88cc or ether[20:2]=0x2000)'


***************************************
Quickly check NICs in bonding :

cat /proc/net/bonding/bond0

***************************************
PWC SNOW queues :

PWC Engineering Apps		<- PLM ; Kambiz



***************************************


cclogview /var/stm/logs/os/ccerrlog |more   <-- To look at chassis logs in regard to GSP

		
xd -h /dev/dsk/cXtXdX  to see a hex dump!

/usr/share/doc/sw_patches.txt <-- Patches fixed in present OS rev

HP-UX error codes  /usr/include/sys/errno.h

Login:CA2212   Password:hp0nly

Jupiter Login:canuser Paswd:stir53      
Customer callback password:285688       

CHART Password: BAR5kHL5

Mail Server :  i3125om5.atl.hp.com      or      xtor01.canada.hp.com


***************************************
Transfered the customer to  Telnet 774-0144   and  USH_SC HWSC


Is this problem having an impact on your bussiness? Yes / No
 ,.. HPUX OS
Name:     tel:     email:


************ MFCB ********************

** TURNOVER INFO **
RCE: Jefferson Avendano  T428-1872
Shift: M-F 7:00-15:00 EST
CALL TURNED OVER TO : USS_CC HPUX OS



Name:     tel:     email:

RCE: Jefferson Avendano  T428-1872
Shift: M-F 7:00-15:00 EST
Close EOD: 05//05

** MFCB **


RCE: Jefferson Avendano T428-1872
Shift: M-F 7:00-15:00 EST
Close EOD: 04//05
If callback refer to USS_CC HPUX OS
** MFCB **

************ MFCB ********************

=======================================================================

---------------------------------< >------------------------------
                     WORK SMARTER - NOT HARDER!
SHIFT UP TO THE AWARD WINNING IT Resource Center:    http://itrc.hp.com
Benefits to you:  self-solve, log and monitor a web case, software & patch announcements & update services.

Let us do it for you	- http://www.hp.com/hps/perevent/valupack
HP-UX community		- http://forums.itrc.hp.com
Web-based Call Logging	- http://itrc.hp.com/swcl/bin/doc.pl
HP Support Services	- http://www.hp.com/hps/support/index.htm
Contract Assistant	- http://www.esca.americas.hp.com/
HP Customer Education	- http://www.hp.com/education/usacanada.html
HPUX Patches		- ftp://us-ffs.external.hp.com/hp-ux_patches/
Resp. Ctr. Tools	- ftp://contrib:9unsupp8@hprc.external.hp.com
Online Documentation	- http://www.docs.hp.com/
HP Software		- http://www.software.hp.com/
====================================================================


Warm regards,

Jefferson Avendano
Hewlett-Packard Value Contact Centre 

Please send any case documentation to support@atl.hp.com with the case number in the title.

My hours are: Monday - Friday, 6:30 am - 3:00  pm EST (3:30 am - 12:00 pm PST).
If you need assistance outside of those times, please indicate that need in your reply and a new engineer will be assigned to your case immediately. Otherwise, I will be glad to assist at the beginning of my next shift.

As an HP support customer, I want you to be satisfied with the support assistance I provided.  Your comments about this assistance are encouraged and may be sent directly to my immediate manager,  rick.kaita@hp.com

HP strives to improve customer loyalty through customer support. It is our goal to be your support services provider of choice. Please forward any comments or suggestions to my manager at the following e-mail address: rick.kaita@hp.com

http://www.hp.com/hps/perevent/valupack   ValuPacks are fixed-price, fixed-deliverable consulting tasks.


=======================================================================
Customer Support Web Sites:
IT Resource Center         http://itrc.hp.com
Log a SW case or callback  http://itrc.hp.com/swcl/bin/doc.pl
On-line docs  http://docs.hp.com
HP Software   http://software.hp.com
HP education  http://www.hp.com/education

Good HowTo's in HP-UX:
  https://www.dbappweb.com/2020/08/08/list-of-latest-installed-bundles-and-products-on-hp-ux/

=======================================================================

[11:45 AM] Forget, Catherine
Jon just stopped the firewall:

systemctl status firewalld
systemctl stop firewalld
systemctl disable firewalld
  
=======================================================================

swlist -d @ /tmp/XSW800HWCR1020_1020_800.depot
swinstall -s /tmp/XSW800HWCR1020_1020_800.depot -x autoreboot=true -x match_target=true  <-- HPUX 10.20

------------------

swinstall -s /tmp/QPK1100.depot -x autoreboot=true -x patch_match_target=true            <-- HPUX 11.XX

-----------------

swlist -a state -a revision -l fileset

swlist -l fileset -a state -a patch_state |more    <-- HPUX 11.XX


 btmp	    /var/adm/btmp	                 cron	   /var/adm/cron/log
 SAM	    /var/sam/log/samlog	    		 SDUX	   /var/adm/sw/sw*.log 
 shutdown   /var/adm/shutdownlog                 spooler   /var/adm/lp/log
 startup    /var/adm/rc.log                      sulog     /var/adm/sulog 
 syslog     /var/adm/syslog/syslog.log           wtmp      /var/adm/wtmp
 sam        /usr/sam/bin/samlog_viewer
 sam        /var/sam/log/samlog


++++++++++++++++++++++++++++++++

To check what is not in a 'configured' state :

 # swlist -l fileset -a state |grep -v \# |grep -v config

++++++++++++++++++++++++++++++++

DocId: USDUXKBRC00015597
swlist: Detemining if a superseding patch is installed.


To check if you have patches installed that supercede PHKL_12345

 # swlist -l patch -x show_superseded_patches=true -a superseded_by PHKL_12345

++++++++++++++++++++++++++++


Quickly create a large file with prealloc:

  prealloc filename size_in_bytes
  
  prealloc toto 2147484000	<--  2Gb
  prealloc tata 15728640	<-- 15Mb	

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

How To Set Up and Use Yum Repositories on a CentOS 6 VPS
https://www.digitalocean.com/community/tutorials/how-to-set-up-and-use-yum-repositories-on-a-centos-6-vps

++++++++++++++++++++++++++++++++

# /usr/sam/lbin/vginfo -v
# /usr/sam/lbin/ioparser.sh
/var/sam/log/samlog 

++++++++++++++++++++++++++++++++

ls -ltr   <-- sorts by oldest to most recent 

ll |sort -n -k6 -k7 |more

last      /usr/bin/last |more 

/usr/bin/find /var -xdev -type f -size +1000 -exec ll {} \; > file1
cat file1 |sort -r -n -k5 |more
 (512 bytes per block)

cd /toto
/usr/bin/find . -name "frbup040*.log.*" mtime +30 -exec  rm -f {} \; 

wcalqkep# cd /tmp
wcalqkep# find . -name "elasticsearch*" -mtime +10 -exec rm -r {} \;



To find in /tmp any file which contains the string "null found":
  # find / -type f -exec grep -il "null found" {} \; > /tmp/fnd.out




#swlist | grep ISEEPlatform
#swlist | grep OnlineDiag


********  AUSRCKBRC00004551   How to produce a list of the largest files in a filesystem   ********

   touch -t YYMMDDHHMM <filename>     -->    touch -t 0112080700 toto
   ll toto  -->  -rw-rw-rw- 1 root sys 0 Dec 8 07:00 toto
   /usr/bin/find /var -depth -newer toto -size +1000 -exec ll {} \; > file1
   cat file1 |sort -r -n -k5 |more  

                                        one
/usr/bin/find /var -xdev -type f -mtime -1 -exec ll {} \;
/usr/bin/find / -type f -exec grep -i -l hostname {} \;


To sort directories by size use:
http://www.linfo.org/du.html

  du -kx /var | sort -rn > /tmp/du.var
  du -kx  / |sort -nr |more
  du -kx  /var |sort -nr |more

  du -h --max-depth=1
  du -h --max-depth=1 /var |sort -rn |more
  du -h --max-depth=1 /var |grep M | sort -rn

**********************
******** HERE ******** 
********************** 

Careful will catch other mounts if exist!! -->  du -ah /var/* 2>/dev/null | sort -rh | head -n 20

One of the best commands to find directory usage: du -sh *

du -sh * |grep M | sort -rn
du -shc * |grep M | sort -rn
du -sh * |grep G | sort -rn
du -shc * |grep G | sort -rn

du -axh / |sort -n
du -akx / |sort -n
du -ax / |sort -n


 du -hx --max-depth=1 /
 du -hx --max-depth=2 /
 du -hx --max-depth=3 /
 du -smx -h * | sort -n									<-- FANTASTIC !!  best command for root filesyetm troubleshooting !!

du -h /tmp --max-depth=1   			<-- one folder deep, etc,...
du -h /var --max-depth=2 | sort -rn	<-- two folders deep, etc,...

*** List all files in a filesystem & sorted in reverse order by size with largest at top.
  find /startdir -xdev -type f -print | xargs ls -ld | sort -rn -k 5
  
  find /startdir -size +100M -exec ls -lhrS {} \;    
  
  find /startdir -type f -mtime 0 -ls							<-- find files with date stamps within last 24 hrs
  find /startdir -type f -mtime -2 -ls							<-- find files with date stamps within last 24 hrs  

    -mtime +60 means you are looking for a file modified 60 days+ ago.
    -mtime -60 means less than 60 days.
    -mtime 60 If you skip + or – it means exactly 60 days.

  https://www.2daygeek.com/check-find-recently-modified-files-folders-linux/
  
  find . -mtime 0 -printf '%T+\t%s\t%p\n' | sort -rnk 2 | more

    T      time, 24-hour (hh:mm:ss)
    %s     File's size in bytes
    %p     File's name
    \t     Horizontal tab
    \n     Newline

$ inv PR1 | grep -v DECOMM | cut -d ";" -f1,6,17,29,30,37,38,39


 find . ! -user p931241 -exec ll -dtr {} \;  		<-- not user xxx
 find . ! -group bid1343 -exec ll -dtr {} \;		<-- not group samba
 
 
 
or
 find . -user p931241 -exec ll -dtr {} \; 
 find . -group bid1343 -exec ll -dtr {} \;	

 find /var -type f -mtime 0 -ls						<-- list all files from today 

  
List all files of 0 bytes in size.
 for i in  `find /startdir -type f -size 0`; do  ll $i; done
 find /startdir -type f -size 0| cut -d "/" -f 5
 find /startdir -type f -size 0 | xargs ll 

du -ax|sort -rn|more 

find /home -name "*" |wc -l

find /home -xdev -size +60M -exec ls -lh {} \;
or
find /home -xdev -size +200M -exec ls -lSsh {} \;
find /sites -xdev -size +200M -exec ls -lSsh {} \;
PS

----------
 / -xdev -type f -size +500000c -exec ll {} \; > file1
# This command will look for files greater than 500 Kb.

find / -xdev -type f -size +500000c -exec ll {} \; > file2
# This command will look for files greater than 1MB.

# This command will find files in /var larger than 10Mb and sort
find /var -size +10000k | xargs ls -ld | sort -rn -k 5   
----------------


Find file with SGID (sticky bit set) :
 # find / ! -local -perm -2000

Find file with SGID (sticky bit set) and mode 010 (means locked files):
 # find / ! -local -perm -2000 -a ! -perm -010 
                               ^^^^^^^^^^^^^^^
*************************************************************************

Aug 29, 2012  NEW

find . -user aec1 -exec rm -f {} \;
find /tmp -user aec1 | xargs rm -R




******************************************************************************

lanadmin -g 0 | more    ´-- to see lan stats for PPA 0



Run some command forever until you ctrl-c the thing: 
while (true) ; do command ; sleep 2 ; done

/var/tombstones/ts99    ts98     ts97 ,...

mailx -s "this is a test" javendano@dxc.com  < /etc/hosts


echo "boot_string/S" | adb /stand/vmunix /dev/kmem      <-- To see which disk you booted from ?

echo itick_per_usec/D | adb -k /stand/vmunix /dev/kmem
echo phys_mem_pages/D | adb /stand/vmunix /dev/kmem   	<-- for 11.0  multiply by 4
echo physmem/D | adb /stand/vmunix /dev/kmem            <-- for 10.20 multiply by 4

echo total_lockable_mem/D | adb -k /stand/vmunix  /dev/mem   <-- output in Kb

/etc/opt/resmon/lbin/monconfig      <-- EMS

The VDN for the Warm transfer (or 428-1146)  <-- OPENVIEW 
The Queue monitored by MTL OV is USS_FL NNM NT-NOVELL <-- Team in Montreal

trusted system, lost root password  do -> /usr/sam/lbin/usermod.sam -F -p "" root
trusted system, how to unlock an account  /usr/lbin/modprpw -k account_name
to null out the passwd; see Doc Id : A5832502

Check system information:    /usr/sam/lbin/samx -C /usr/sam/lib/C/mo.ui
echo "selclass qualifier memory;info;wait;infolog" | cstm    > showmem

/opt/propplus/bin/cprop -summary -c "Memory"   <- from Kirk Gardner Aug.30/2017

echo "map;sall;wait;info;wait;il;view;done" | cstm 


echo "sel path system\ninfolog\nexit"|cstm|grep "System Serial Number"
echo "selclass qualifier cpu;info;wait;infolog" | cstm |grep "PDC Firmware Revision"
echo "map;selall;wait;cds;wait;done" | cstm | grep -i tachyon

echo "selall;info;wait;infolog;view;done" | cstm > showme.dat
echo 'selclass qualifier all;info;wait;infolog' | /usr/sbin/cstm    <-- Show everything
echo "map;selall;wait;info;wait;infolog;view;done" | cstm >/tmp/any_filename    <-- Show everything
echo "map;sall;wait;info;wait;il;view;done" | cstm > /tmp/cstm.txt     <-- Show everything

echo q | /etc/opt/resmon/lbin/monconfig |grep -i version   <-- See revs of STM & EMS

++++++++++++++++++++++++++++++++++++++++++++++
Truncate activity log from command line
 echo "lsal;clear" | cstm  
---------------------------------------------
Get PDC firmware version
    echo "selclass qualifier cpu;info;wait;infolog" | cstm | grep PDC
---------------------------------------------
Get memory Info
    echo "selclass qualifier memory;info;wait;infolog" | cstm 
---------------------------------------------
Get CPU 
    echo "selclass qualifier cpu;info;wait;infolog" | cstm 
---------------------------------------------
Get All System Info
    echo "selclass qualifier cpu;info;wait;infolog" | cstm
---------------------------------------------
Get Tachyon model info
    echo "map;selall;wait;cds;wait;done" | cstm | grep -i tachyon
++++++++++++++++++++++++++++++++++++++++++++++


 http://www.software.hp.com/software/HPsoftware/NETSCAPE/index.html  <--fastrack

======
Check for superceded patches:  swlist -l patch \*\.*,c=patch | grep superseded
Check for applied patches   :  swlist -l patch \*\.*,c=patch | grep applied
Check for Motif patches     :  swlist -l patch \*\.*,c=patch | grep -i motif

Check for superseded patches of PHSS_22543:
 swlist -l patch -a patch_state -a supersedes *.*,c=patch |grep PHSS_22543  

To preview a depot in /tmp directory on the target system: 
 /usr/sbin/swinstall -p -s </tmp/depot> 

The following command can be used to determine which filesets on the system
are currently 32-bit specific:
   swlist -l bundle -l fileset -a os_name | grep HP-UX:.*32

Determine which filesets on the system are currently 32-bit specific:
   swlist -l bundle -l fileset -a os_name |grep -i hp-ux:.*32

Looking for which fileset a file belongs to, its ownership and permissions:
   swlist -l file -a owner -a group -a mode | grep -e /usr/sbin/swapinfo -e /usr/sbin/swapon/fin


To determine what is using your memory (anyone can run this command):
     UNIX95= ps -eo vsz,user,pid,args | sort -rnk1 | more
     (The largest program(s) will be listed first.)

from mtlrc21,.. vi /.rhosts  and enter mtlrc43.canada.hp.com
# remsh mtlrc43 -l root /sbin/sh    <-- to open a shell if cannot telnet or rlogin


KBRC00004523  How to use adb to get system information 
See /usr/lib/sched.models  &  /usr/sam/lib/mo/sched.models 

To determine CPU speed!
  CPU speed :   echo "itick_per_usec/D" | adb /stand/vmunix /dev/kmem



Send printjob directly to printer "mtllj4si or IP" using "hpnpf" 
and create a log file called "hpnplog" If can't connect , then network problem!:
   hpnpf -n -x mtllj4si -lhpnpflog /etc/hosts
   hpnpf -n -x 15.37.113.55 -lhpnpflog /etc/hosts

Adding a printer named "q018"  even if not HP, or without Jetadmin or Jetdirect Prn installer:
  lpadmin -pq018 -orm10.1.3.28 -orpq018 -mrmodel -v/dev/null -orc -ocmrcmodel


  
------------------------------------------------------
List all users in the system:

$ awk -F':' '{ print $1}' /etc/passwd  

------------------------------------------------------
  
 
To determine the number of TCP connections on a system, the following command string can be used:
   /usr/bin/netstat -a | grep -ic tcp

To format output for wtmp run :    /usr/sbin/acct/fwtmp < /var/adm/wtmp |more

cat /etc/mnttab |awk '{ print $1" " $2" " $3" " $4" " $5" " $6  }'  >/etc/fstab

/usr/config/sys/errno.h   or   /usr/conf/h/errno.h    to check for error numbers in HP-UX

what /stand/vmunix |grep -e td -e fcms

CPU usage, can be seen with   ps -ef | sort -rnk 8 >/tmp/ps.out

 UID   PID  PPID   C    STIME TTY         TIME CMD

STIME     (f)       The starting time of the process,  given in  hours, minutes, and seconds. 
                    (A process begun more than  twenty-four  hours before  the  ps  inquiry
                    is executed is given in months and days.)

TIME (all)          The cumulative execution  time  for  the process.


---------------------------------------------------------------------------------------------------------
 
checking VGID on disk :   echo "0x12000?8X" | adb /dev/dsk/cXtXdX   or
.						  echo "0x12000?6X" | adb /dev/disk/diskX

 wcalqu05# echo "0x12000?6x" | adb /dev/disk/disk30
 	...
 	0x12000:
.				0x4c564d52      0x45433031      0xb76ec604      0x583c7f3f      0x3158ea22      0x40c661fa
.																				  ^^^^^^^^		  ^^^^^^^^			

 The VGID are the 5th and 6th fields combined:  3158ea2240c661fa

Compare with VGID found in a VG.map file - preview mode:

# vgexport -m /tmp/vgData.map -p -v -s /dev/vgData		<- preview mode
# head -1 /tmp/vgData.map
VGID 3158ea2240c661fa
...


---------------------------------------------------------------------------------------------------------
https://www.learnitguide.net/2015/10/restore-file-or-directory-from-ignite.html

swlist command to provide install date https://www.hpux.ws/?tag=ignite-ux :

swlist -l fileset -a revision -a title -a state -a install_date

swlist -l bundle -a revision -a title -a install_date | grep QPK

---------------------------------------------------------------------------------------------------------




To bind stape driver to tape drive at 0/2/0/0.3.2.0  use :
  ioscan -M stape -H 0/2/0/0.3.2.0


To recreate the lost+found directory  run :      mklost+found

******************************************
Dazel Telnet (512)494-7333
VRC group:   dazel 
WFM queue USS_CC Dazel
Sales manager : Brian Dodds (703) 204-2161
******************************************


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 /usr/conf/sys/errno.h   << Good

 /usr/include/sys/errno.h 

 Kmine : HPUXERR01   General HP-UX system error messages 


Error number 23 from:
 #grep 23 /usr/include/sys/errno.h 
 #define ENFILE          23      /* File table overflow          */

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

dd if=/dev/rdsk/c3t1d2 of=/dev/null bs=4096 count=100


Delete the existing tape device file(s)and recreate them :
 rmsf  /dev/rmt/c16t8d0BESTn
 then insf -e -C tape -v   or  insf -H x/x/x -e  

+++++++++++++++++

MIB stuff 
   OV-EN005258  
   OV-EN003777
   UEMSKBAN00000981
   http://www.software.hp.com/products/EMS/index.html 



/etc/copyright <-- comment out the cat /etc/copyright in /etc/profile
mv /usr/bin/quota  /usr/bin/quota.old   to get rid of this message


AT&T translation service   http://gldu.cxo.cpqcorp.net/files/translators.htm


*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
swlist -l depot @ 15.228.74.70
swlist -l product @ 15.228.74.70:/var/vpar/a2.02.depot"

swlist -l fileset -x show_superseded_patches=true -a state -a patch_state |grep -i sam

 ps -efl | cut -c15-20,45-50,80- |sort -r -n -k10 |more

To determine the processor type (ie: PA-RISC2.0) the following command can be used:
 getconf HW_CPU_SUPP_BITS


*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*

How to see number of open processes system wide ?  ( nproc )

UCMDKBRC00009024 'sar -v' : how should the output be interpreted 

 # sar -v 2 2
    proc-sz    
    716/814  

 # ps -ef |wc -l     
   719

 # top   
   820  processes:   111 sleeping, 7 running

*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*


while true
> do
> clear
> sar -v 2 2
> sleep 2
> clear
> lsf
> sleep 2
> done
 ps -efl | awk '{ print $4"    " $10"  " $15}' |sort -r -n -k2 |more     the spaces between quotes  " "  are actual  tabs.


*********************************************************************************
Search from begining of line , using delimeter : , provide 3 params , replace : with space.

grep "^$1" /etc/passwd | cut -d ":" -f1,3,4,7 | sed "s/:/ /g"                     sed "s/ext1/ /g" 


[root@pluto:0 ~]# awk -F":" '{print $1,$5}' /etc/passwd | head -3
root root
bin bin
daemon daemon


[root@pluto:0 ~]# awk -F":" 'NR == 1, NR == 3 {print NR, $1,$5}' /etc/passwd
# Only lines 1 to 3 
1 root root
2 bin bin
3 daemon daemon

*********************************************************************************


        HP
                http://techcom.cup.hp.com/dir_fcms/supinfo_index.htm

	Boot Support
		http://techcom.cup.hp.com/dir_fcms/adapters.html

	Fabric Support
          	http://techcom.cup.hp.com/dir_fcms/fabric_supp_0700/index_files/frame.htm
	
        Cybrary
        	http://cybrary.inet.cpqcorp.net/cybrary.html

        Adaptec
                http://www.adaptec.com/

        Agilent
                http://downy.cup.hp.com/

        Emulex
	        http://www.emulex.com/
		        Software & Manuals
			http://www.emulex.com/ts/dds.html

       JNI / AMCC
	        http://www.amcc.com/
		        Software
			http://www.jni.com/drivers/
       Qlogic
	       http://www.qlogic.com/
		        Software & Manuals
			http://www.qlogic.com/support/drivers_software.asp
		
       Spock
	       http://turbo.rose.hp.com/spock/
		        Spock Quick Search
			http://reitzev01p4.americas.cpqcorp.net/dtSearch.html

*********************************************************************************

GREAT SITE !!!!!
  http://ren.nsr.hp.com
  http://ren.nsr.hp.com/SAN/Switches/   
  http://ren.nsr.hp.com/SAN/Switches/Brocade/index.html
  http://ren.nsr.hp.com/SAN/Switches/Brocade/update/    <-- Gonz's site

*********************************************************************************

fcmsutil /dev/td0 vpd

*********************************************************************************


  http://www.brocade.com   Login:   jefferson.avendano2hp.com
                           Passwd:  subaru
  
  http://www.hp.com
      --> Storage
        --> SAN Infrastructure  (Voila!)


*********************************************************************************

To capture standard out and error from the above program try changing the above
to something like:

30 01 * * * /home/greg/program1 > /tmp/program1.out 2>&1

The above entry will log standard out and standard error to the
/tmp/program1.out file.  This output will most likely give us an
indication of the problem.



*******************************************************

For WFM problems call 916.785.0800 leave urgent voice mail that pages WFM team directly
in case of urgent problems"

Log a call electronically with IT using:
http://fcwestar.boise.itc.hp.com:7013/WCM/ 
The login ID is full employee ID and password is "changeme". 
Use "wfm fail gbita" for project name when using this eSupport tool.


*******************************************************
rename all files with ension .jpg changing them to same name but with extension .mpg

first make sure you are in Posix Shell  'sh'  (echo $SHELL)  'man sh-posix'



for file in `ls -1 *.jpg | cut -d. -f1`
do
mv "$file".jpg "$file".mpg
done


*******************************************************

To find the filesystem type:
 
   mount -p | awk '{print $3"\t",$2}'

See  http://forums1.itrc.hp.com/service/forums/questionanswer.do?threadId=952076


*******************************************************

/usr/sbin/kmtune -q maxdsiz -l

-q name   Query the value of the specified system parameter.

-l        Print a detailed report.  The -l option cannot be used with
          the -r, -s, or -u options.

*******************************************************


for i in 1 2 3 4 5 6 7 8
do
lvextend -m 1 /dev/vg00/lvol$i /dev/dsk/cxtxdx
done

*******************************************************

Unzip and swinstall *.sd file from curent directory:
  
 gunzip *.sd.gz; swinstall -s $PWD/cfg*.sd

*******************************************************

Linux - to get dump info ?
 key sequence ,..  sysrq w  <-- causes a crash 
                   sysrq t
                   sysrq m
 netdump enabled            <-- creates the dump files and entries in /var/log/messages 

*******************************************************

reset GSP :    stty +resetGSP < /dev/GSPdiag1

*******************************************************

Great Sales and Marketing documenattion avail at :   http://source.hp.com 
   ie: For info on vPars search keyword "SellPartitions" under "Sales Tools".

*******************************************************

Need commandviewSDM 
  1. JBODdsp -i <Hostname>
  2. JBODfmt -foverride <disk device>
  
  VA's and EVA's  520 byte sectors


*******************************************************

1)  ANSI C -->  what  /opt/ansic/bin/cc      http://www.hp.com/go/c    <-- HP C/ANSI C  develp. Bundle

       B3899BA   HP C/ANSI  C Developer's Bundle for HP-UX  11i  (s700)
       B3901BA   HP C/ANSI  C Developer's Bundle for HP-UX  11i  (s800)


2)  C++  == ANSI C++  what /opt/aCC/bin/aCC  http://www.hp.com/go/c++  <-- HP aC++

       B3911DB   HP aC++ Compiler  (s700)
       B3913DB   HP aC++ Compiler  (s800)



*******************************************************
*******************************************************
EVA Busines copy training:

Recording:
mms://streaming1.learn.hp.com/WMF/hpvc/hpsgd/11712/hpsgd_11712.wmv

Slides:
http://learning1.americas.cpqcorp.net/mcslscripts/download.asp?DATA=/other/other/bc-tkt_8_26.ppt&part=11712


*******************************************************


 yum install -y redhat-lsb-core-4.1-24.el7.i686


*******************************************************


 tar -czvf newfile.tar.gz directory-being_backed_up

 tar -czvf filename.tar.gz /path/to/dir1
 tar -czvf filename.tar.gz /path/to/dir1 dir2 file1 file2

 tar -ztvf projects.tar.gz
 tar -xzvf projects.tar.gz					<-- list content of projects.tar.gz file
 
 tar -xzvf projects.tar.gz -C /tmp/			<-- extract files in a given directory such as /tmp/:
 

*******************************************************

# cd /stand
# tar -cvf /tmp/test.tar *
# gzip /tmp/test.tar
# mv /tmp/test.tar.gz /opt/toto
# cd /opt/toto
# gunzip < test.tar.gz | tar xvf -
# ll /opt/toto/stand/*

# tar -rvf toto.tar *
# for i in `cat list`; do tar -rvf toto.tar $i; done


*******************************************************
https://www.cyberciti.biz/tips/how-can-i-zipping-and-unzipping-files-under-linux.html

Linux - ziping files/directories examples

To creates the archive data.zip and put all the files in 
the current directory in it in compressed form, type:

$ cd /xyz/toto
$ zip data *

*******************************************************

Extracting single file from network archive  (make_net_recovery or make_sys_image)
See case 3210006131

  When doing a make_net_recovery, the IUX server keeps the archive in :
  /var/opt/ignite/recovery/archives/mtlrc43/2005-04-25,06:30   
  filename is 2005-04-25,06:30  


gzcat ./archive_file | pax -r -f  - etc/nsswitch.conf
gzcat ./2005-04-25,06:30 | pax -r -f  - etc/nsswitch.conf     # if archive is < 2Gb 

if archive is > 2Gb 
cat ./archive_file | gzcat | pax  -r  -f  -  etc/nsswitch.conf 
cat ./2005-04-25,06:30 | g  | pax  -r  -f  -  etc/nsswitch.conf 



To pull a file from an ignite archive, here is the command that I use  
cd into the directory where the archive is kept on the ignite server: 
 
gzcat ./2005-03-14,15:15 | pax -r -f - etc/nsswitch.conf 
 
The weird thing is, I am able to extract files for other clients.  
Is there a size limitation or something when using gzcat ? Yes 2Gb limitation
The size of the archive that failed is 4683096302  (4Gb).

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Because of industry standards and interoperability goals, cpio does not support 
the archival of files larger than 2 GB or files that have user/group IDs greater 
than 60 K. 

copy contents of /dir1 & /dir2 into one file /output_file :

  # find /dir1 /dir2 | pax -wvf /output_file

resulting file can be read with tar

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

How to tell which disk we booted from :

# echo boot_string/s |adb /stand/vmunix /dev/kmem
boot_string:
boot_string:    disk(8/0/19/0.6.0.0.0.0.0;0)/stand/vmunix

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

	Cisco Fast EtherChannel ( FEC ), IEEE 802.3ad, or 
	Link Aggregation Control Protocol ( LACP ) mode

HPUX:
	/etc/rc.config.d/hp_apaconf
	/etc/rc.config.d/hp_apaportconf

	
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Web JetAdmin Support on WindowZZZ

  USD_SC B_HPB JetDirect


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


ls -ltr /var/adm/sw/products |more

 -r   Reverse the order of sort to get reverse (descending) collation or
      oldest first, as appropriate.
 
-t   Sort by time modified (latest first) before sorting alphabetically.

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Is it possible to enclose files (ie. test.tar.Z) with sendmail command? 

Try ... 
uuencode test.tar.Z | mailx -s 'tar file' user@host"


**Even better yet:

  mailx -a test.tar.Z -s "Subject blah blah" javendano@dxc.com < /dev/null

  mailx -a file.txt -s "Subject" user@domain.com
  blah blah blah
  Ctrl+d
  
  
-----------------------------------

 port1691 folder

https://superuser.com/questions/214390/zipping-folders-and-their-contents-into-a-zip-file-in-linux
Zipping folders and their contents into a .zip file in Linux

  zip -r filename /path/to/folder
  
  root@wcalqaav /opt/ehealth/config#  zip -r data /opt/ehealth/config
    
	or better yet :
  
  root@wcalqaav /opt/ehealth/config#  zip -r data .
  
  it will zip all folders and all subfolders of the given folder.
    
  root@wcalqaav /opt/ehealth/config# mailx -a data.zip -s "Subject : wcalqaav:/opt/ehealth/config folder zipped" javendano@dxc.com < /dev/null
  
  mailx -a wcahqk2v_port1691.zip -s "Subject : wcahqk2v:/opt/ehealth/config/port1691 folder zipped" javendano@dxc.com < /dev/null
  mailx -a wcahqk2v_port1691.zip -s "Subject : wcahqk2v:/opt/ehealth/config/port1691 folder zipped" djones87@dxc.com < /dev/null            Don Jones
   
--------------------------------------------------------
Linux:    https://www.thegeekdiary.com/linux-unix-how-to-send-mails-with-attachments-using-mailx-command/

mailx -s "this is a test" javendano@dxc.com  < /etc/hosts

# echo "Hi Jeff, here is your file" | mailx -s "SUBJECT: messages log file" -a "/tmp/messages" javendano@dxc.com

# echo "Keys copied !" | mailx -s "SUBJECT: 18 new SoH nodes now with pr1adm keys" -a "/tmp/pr1adm_keys" javendano@dxc.com


Linux mailx 

--------------------------------------------------------
 On  <<<  HPUX  >>>>
 
 
https://serviceitdirect.com/hp-ux-email-with-attachments

Mail with attachement, and no body (this worked,..cool !!):

ux2dos /path_to/some_file |
   uuencode some_file.txt |
   mailx -m -s "MAIL FROM Jeff A." javendano@dxc.com
   
On wcalqa3o in /var/spool/cron/crontabs/ :   
ux2dos /var/spool/cron/crontabs/adm |
uuencode adm_cron.txt |
mailx -m -s "MAIL FROM Jeff A." pciprian@dxc.com
   
   


	wcalqa66# /usr/bin/ux2dos /tmp/tata | uuencode tata.txt | mailx -m -s "MAIL FROM JA" javendano@dxc.com
	(where  /tmp/tata is the actual file but send me the attachment as tata.txt )
	(you can also mail with carbon (cc) and blind carbon (bcc))


Mail with multiple attachments and body (this worked,..cool !!):    

wcalqa66# mailx -m -s "MAIL FROM Jeff A." javendano@dxc.com << EOF
> $(ux2dos /tmp/tata | uuencode tata.txt)
> $(ux2dos /etc/hosts | uuencode hosts.txt)
> EOF


hmechmachi@dxc.com
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 dos2ux example:
       # dos2ux kmeminfo.64bit.sh > fixed.sh
       # sh fixed.sh
       x - kmeminfo[non-ascii]

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


To see what is going on I would like you to install the tusc tool
(http://hpux.ee.ualberta.ca/hppd/hpux/Sysadmin/tusc-7.7/) on your system
and run this command :
tusc -f -a -o /tmp/trace command 
tusc -f -a -o /tmp/trace newgrp <group_name>



# ll /srv/util/bin/tusc
total 0
drwxr-xr-x   5 bic5555    bid1332         96 May 19  2005 hpux10
drwxr-xr-x   4 bic5555    bid1332         96 May 19  2005 hpux11
drwxr-xr-x   3 root       sys             96 Feb 13  2009 hpux1123

ie: /srv/util/bin/tusc/hpux11/bin/tusc
	/srv/util/bin/tusc/hpux1123/bin/tusc


Jump onto an HPUX box to use "truss"
# /srv/util/bin/truss
Usage: tusc [-<options>] <command [args ...]> -OR- <pid [pid ...]>
        -a: show exec arguments
        -A: append to output file
        -b bsize: dump 'bsize' max bytes (-r/-w)
        -c: count syscalls instead of printing trace
        -C: like -c but also print high/low/average stats
        -d [+][!][fd | all]: select only syscalls using fd
        -e: show environment variables
        -E: show syscall entries
        -f: follow forks
        -F: show kernel's ttrace feature level
        -g: don't attach to members of my session
        -h: show state of all processes when idle
        -i: don't display interruptible syscalls
        -I start[/stop]: single-step and show instructions
        -k: keep alive (wait for *all* processes)
        -l: print lwpids
        -L [!]lwps: [un]select these lwps
        -n: print process names
        -o [file|fd]: send trace output to file or fd
        -p: print pids
        -Q: be quiet about some warnings
        -r [!][fd | all]: dump read buffers
        -R: show syscall restarts
        -s [!]syscalls: [un]select these syscalls
        -S [!]signals: [un]select these signals
        -t: detach process if it becomes traced
        -T timestamp: print time stamps
        -u: print user thread IDs (pthreads)
        -v: verbose (some system calls only)
        -V: print version
        -w [!][fd | all]: dump write buffers
        -x: print raw (hex) arguments
        -X: print data in an exportable format
        -y: register verbosity (with -I)
        -z: only show failing syscalls


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


Create a patch list :
 swlist -l product | cut -c 1-14 |grep PH |more

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
HPUX: 

/var/log/sudo.log

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Support Plus  D/L site 

 
http://h20293.www2.hp.com/cgi-bin/swdepot_parser.cgi/cgi/try.pl?productNumber=B6191AAE&date=

http://h20293.www2.hp.com/portal/swdepot/displayProductInfo.do?productNumber=B6191AAE


keywords: STM   Diagnostics  OnlineDiags


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Some linux lvm stuff:

# pvdisplay -m /dev/sdX   or   pvdisplay /dev/sdX -m

# lvs -a -o +devices
# lvs -a -o +devices |grep lvXYZ

# lvs -a -o +devices |grep lvXYZ |wc -l
22  <-- 22 disks

# vgdisplay -v vgData

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
HPUX  catman :

To amplify the value of the manpages installed (I hope!) on your server, create a 'whatis' database and keep it updated.
Create (or update) the 'whatis' database ('/usr/share/lib/whatis') do:

# catman -m

This will enable keyword searches of the manpages. 
For instance, you could do:

# man -k vxfs

...to see the commands that reference 'vxfs' (JFS) filesystems. The '-k' switch stands for *keyword*.

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Centos download site:

http://mirror.centos.org/

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


http://www.redhat.com
 Login:  javendan2000
 Passwd: subaru2000


Linux stuff:


Great stuff about Filesystem sizes - White Paper :  
 http://www.u:ys.com/products/insights/insights__compendium/Linux_File_Systems_Comparative_Performance_White_Paper_1-6-06.pdf

http://www.redhat.com/en_us/USA/rhel/details/enterpriselinux3/enterpriselinux3kernel/

https://www.redhat.com/en_us/USA/rhel/details/limits/



++++++++++++++++++++++++++


 PHCO_34673 s700_800 11.00 tztab(4) cumulative patch 
 PHCO_34668 s700_800 11.11 tztab(4) cumulative patch 
 PHCO_34669 s700_800 11.23 tztab(4) cumulative patch 



++++++++++++++++++++++++++

SElinux  https://www.tecmint.com/disable-selinux-in-centos-rhel-fedora/

To disable SELinux temporarily, issue the command below as root:

	# echo 0 > /selinux/enforce
	Alternatively, you can use the setenforce tool as follows:

	# setenforce 0
	Else, use the Permissive option instead of 0 as below:

	# setenforce Permissive
	
Disable SELinux Permanently
To permanently disable SELinux, use your favorite text editor to open the file /etc/sysconfig/selinux as follows:

	# vi /etc/sysconfig/selinux
	change the directive SELinux=enforcing to SELinux=disabled

Check current status of SELinux	
	$ sestatus

++++++++++++++++++++++++++



BdeB

Apache  /var/www/index.html


bash -c date;find /path/to/files* -mtime +5 -exec rm -v {} \;;date > ~/mylog    	# -mtime 5 means within the last 5 days

cd /root/Desktop/
bash -c date;find ./* -mtime 0 -exec rm -v {} \;;date > ~/mylog    			# -mtime 0 means within the last 24 hrs

find -type f   will only find files
find -type d   will find dirs


++++++++++++++++++++++++++++
Some testing:

find . -name "elasticsearch*" -mtime +24 -exec rm -r {} \;

find . -mtime +24 -name "elasticsearc*" -exec rm -r {} \;


++++++++++++++++++++++++++++

chroot is probably your best bet. Quick 'n dirty. 

1. Boot with a livecd (knoppix, gentoo, dsl, whatever) 

2. sudo fdisk -l     (look for boot disk ie: /dev/hda4)
3. sudo mkdir /mnt/toto
4. sudo mount /dev/hda4 /mnt/toto   ( mount your root partition )
5. sudo chroot /mnt/toto
6. sudo /bin/bash   (or whatever your shell is) 
7. sudo passwd 

8. sudo init 6

++++++++++++++++++++++++++++

To install a downloaded Debian (Ubuntu) package (.deb): Open Terminal and type
  sudo dpkg -i packagename.deb 

To remove a Debian (Ubuntu) package (.deb): 
  sudo dpkg -r packagename 

To Reconfigure/Repair an installed Debian (Ubuntu) package (.deb): 
  sudo dpkg-reconfigure packagename

++++++++++++++++++++++++++++

Copy /var to /mnt
cd /var
root@cashier-api-1.test.brand--x.com ~# du -sh /home /usr /var
72M	/home
2.2G	/usr
3.3G	/var
root@cashier-api-1.test.brand--x.com ~# df -h /

Filesystem            		Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-root 7.9G  6.1G  1.4G  82% /
 . -xdev -print | cpio -pdmuv /mnt

++++++++++++++++++++++++++++

To list all disks and their sizes:

  sfdisk -s
  
  sfdisk -l


To list all partitions of disk sda:

   sfdisk -l /dev/sda


++++++++++++++++++++++++++++

Demand sheet lookup:    http://collaboration.pwc.ca/sites/dmngt/SitePages/DemandManagement.aspx?DemandId=

put number at the end afte the = (equal sign)...


http://collaboration.pwc.ca/sites/dmngt/SitePages/DemandManagement.aspx?DemandId=8329


++++++++++++++++++++++++++++

Xming

Most XMing calls comes from Managers needing to access DTRAN
and if we don't fix their issue it will get escalated

++++++++++++++++++++++++++++



Supported by  btrfs, ext4, ocfs2, and xfs filesystems.
                     ^^^^
Quickly create a large file with fallocate (similar to HPUX' prealloc):

  fallocate -l size/k/m/g filename
  
  fallocate -l 50m tata

 -l  Specifies size of the allocation, in bytes, k, m, g, t, etc.


Support for  ext3:

Quickly create a 100Mb file:

  dd if=/dev/zero of=toto bs=1024k count=100
  creates toto with 104857600 bytes (105 MB)

++++++++++++++++++++++++++++



mdadm --examine /dev/sdc3
mdadm --detail /dev/md2


mdadm --manage /dev/md1 --fail /dev/sdc3
mdadm --manage /dev/md1 --remove /dev/sdc3
mdadm --manage /dev/md1 --add /dev/sdc3


mdadm --misc  --detail /dev/md0
cat /proc/mdstat

++++++++++++++++++++++++++++

Linux RAID

 wcahqk19# lsblk -o NAME,SIZE,FSTYPE,TYPE,MOUNTPOINT
 wcahqk19# mdadm --detail /dev/md3
 
 
============================================================================== 
 
 
 Check Warranty:   https://www.dell.com/support/home/en-ca/Products/?app=warranty
 
 Useful omreport commands: https://community.pivotal.io/s/article/Useful-omreport-commands-for-DCA-V1?language=en_US
 
 
 
Dell RAID Controller :  Gathering info

wcahqd0k# /opt/dell/srvadmin/sbin/omreport storage pdisk controller=0 | grep -i fail
Failure Predicted               : No
Failure Predicted               : No
Failure Predicted               : Yes		<-- we had issue with disk and replaced it!
Failure Predicted               : No

wcahqd0k# /opt/dell/srvadmin/sbin/omreport storage controller | grep ^ID | awk {'print $NF'}
0     <-- So Controller 0


wcahqd0k# /opt/dell/srvadmin/sbin/omreport storage pdisk controller=0 |grep  ^ID
ID                              : 0:0:0
ID                              : 0:0:1
ID                              : 0:0:2
ID                              : 0:0:3



wcahqd0k# for controller in $(/opt/dell/srvadmin/sbin/omreport storage controller | grep ^ID | awk {'print $NF'}); do /opt/dell/srvadmin/sbin/omreport storage pdisk controller=$controller ; done


==============================================================================

Reinstalling a Linux kernel, because it was partially installed or something similar....

wcahqk19# rpm -aq kernel
kernel-3.10.0-1062.9.1.el7.x86_64   <-- Choose this one
kernel-3.10.0-957.1.3.el7.x86_64
kernel-3.10.0-957.12.1.el7.x86_64

wcahqk19# yum reinstall kernel-3.10.0-1062.9.1.el7.x86_64

wcahqk19# yum update -y   ,.. then a reboot

++++++++++++++++++++++++++++

ariel3.minilab.bdeb.qc.ca  --> 205.236.44.111

sftp://javendan:XXXXXX@205.236.44.111


sftp javendan@205.236.44.111
sftp javendan@2ariel3.minilab.bdeb.qc.ca
 or 
ssh javendan@205.236.44.111
ssh javendan@2ariel3.minilab.bdeb.qc.ca


++++++++++++++++++++++++++++

List kernel parameter values:

sysctl -a

==============================================================================

wcalqabp # /usr/local/bin/paping mfd1409 -p 515 -c 4
paping v1.5.5 - Copyright (c) 2011 Mike Lovell

Connecting to mfd1409.pwc.ca [141.119.158.158] on TCP 515:

Connected to 141.119.158.158: time=0.71ms protocol=TCP port=515
Connected to 141.119.158.158: time=3.92ms protocol=TCP port=515
Connected to 141.119.158.158: time=0.65ms protocol=TCP port=515
Connected to 141.119.158.158: time=0.70ms protocol=TCP port=515

Connection statistics:
    Attempted = 4, Connected = 4, Failed = 0 (0.00%)
Approximate connection times:
    Minimum = 0.65ms, Maximum = 3.92ms, Average = 1.50ms
	
	
	
keywords  ping paping mfd	
==============================================================================



==============================================================================



==============================================================================



==============================================================================



==============================================================================
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

p930426:*:82625:70392:Ben Trad Mohamed Aziz:/home/stingray/p930426:/bin/csh

wcalqb0e# chown 82625 /home/stingray/p930426

wcalqb0e# ll -d /home/stingray/p930426
  drwxr-xr-x   2 p930426    grp9901         74 May 28  2019 /home/stingray/p930426

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
20+ rsync command examples in Linux [Cheat Sheet]

https://www.golinuxcloud.com/rsync-command-in-linux/     or  https://phoenixnap.com/kb/rsync-command-linux-examples
https://www.computerhope.com/unix/rsync.htm
https://rsync.samba.org/how-rsync-works.html
https://www.tecmint.com/rsync-local-remote-file-synchronization-commands/

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Making copy of /vstor data to /vstor2 ...

mkdir /vstor2
/bin/rsync -auvv  /vstor/  /vstor2 1>/var/adm/mirror.log 2>&1 
chmod 644 /var/adm/mirror.log 
chmod 755 /vstor2

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Synchronize the /vstor2 directory with /vstor

/opt/rsync/bin/rsync -qauHSx --delete /vstor/ /vstor2 1>/var/adm/mirror.log 2>&1 
chmod 644 /var/adm/mirror.log
chmod 755 /vstor2

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
rsync /vstor from caeh2305 to caeh4053

caeh4053#  cat /root/.rhosts
           +@trusted_hosts
           caeh2305 root

Backup:
caeh2305# cd /1b/data
caeh2305# /opt/rsync/bin/rsync -av /1b/data/ caeh4053:/1b/data/tmp_vstor/

Restore:
caeh2305# cd /0c/data
caeh2305# /opt/rsync/bin/rsync -av caeh4053:/1b/data/tmp_vstor/ /0c/data/   
(somehow vstor was at /1b/data in PS6.0 ???)

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 more vstor_sync 

#!/usr/bin/ksh
for wks in `cat /root/JA/wlist`
do
echo "Running vstor sync on $wks"
echo "" >> vstor.out
echo "Running vstor sync on $wks" :>> vstor.out
echo "-----------------------------------" >> vstor.out
echo "" >> vstor.out
echo "" >> vstor.out
echo "" >> vstor.out
#/usr/bin/remsh $wks "/usr/bin/ypwhich" >> 1.out
/usr/bin/remsh $wks "/admin/site/src/cae/ps6.5/scripts/rsync_vstor_to_vstor2.ksh
" >> vstor.out
echo "" >> vstor.out
echo "" >> vstor.out
echo ""
done


 more /admin/site/src/cae/ps6.5/scripts/rsync_vstor_to_vstor2.ksh

#! /bin/ksh -p
#

echo "Making copy of /vstor data to /vstor2 ..."

/opt/rsync/bin/rsync -auvv  /vstor/ /vstor2 1>/var/adm/mirror.log 2>&1 
chmod 644 /var/adm/mirror.log 
chmod 755 /vstor2
 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


# Synchronize the /vstor2 directory with /vstor at 3:00 AM
0 3 * * * /opt/rsync/bin/rsync -qauHSx --delete /vstor/ /vstor2 1>/var/adm/mirro
r.log 2>&1 ; chmod 644 /var/adm/mirror.log ; chmod 755 /vstor2
 

 
====
From Windows Powershell  cool!!

PS C:\WINDOWS\system32> test-netconnection										<-- similar to ipconfig
PS C:\WINDOWS\system32> test-netconnection -computername wcalqahi -port 22


 https://docs.microsoft.com/en-us/powershell/module/nettcpip/test-netconnection?view=win10-ps


++++++++++++++++++++++++++++++++++++++++++++++++++++++++
SSH On HP-UX: 

Manual SSH Configuration - http://wiki.pwc.ca/display/DP/Manual+SSH+Configuration

ps -ef | grep ssh
 HP's version:         root 22871     1  0 16:44:00 ?         0:00 /opt/ssh/sbin/sshd
 CSC's SOE version:    root  2961     1  0  Nov 15  ?         0:39 /opt/soe/local/openssh/sbin/sshd

 HP's version 	  # /sbin/init.d/secsh stop|start
 CSC's version    # /sbin/init.d/openssh stop|start

++++++++++++++++++++++++++++++++++++++++++++++++++++++++
AUTOFS On HP-UX:

restart Autofs :   /sbin/init.d/autofs  stop|start 

/sbin/init.d/autofs start

when wcalqad0 hangs at login , often something in automount failed
and we need to restart autofs.

++++++++++++++++++++++++++++++++++++++++++++++++++++++++





++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Issue with CDE editor and large filesystems - HPUX


You may recall that after getting users to start using HP-UX 11.31 XDM servers, some users reported an 
issue with the CDE graphical editor. The problem is that when saving the edited file, CDE will want to 
find how much free space is in the filesystem. The Isilon returns the size of the quota as the filesystem 
size. The system call used by CDE uses the 32-bit version of the “stat”, if the is more than 4TB the editor 
erroneously issues and error saying that there is not sufficient space to save the file.
 
HP has not released an official patch for this (at least not that I know of) so here is a way to “fix” 
this on affected systems. It is probably a good idea to re-boot the XDM server afterwards just to make 
sure users load a fresh copy of the library.
 
On the affected server, take a backup of the libraries and replace them with the unofficial patched versions. 
There are replacement libraries for HP-UX 11.23 as well as 11.31.
 
For HP-UX 11.23:
# cp -p /usr/dt/lib/hpux32/libDtWidget.so.1  /usr/dt/lib/hpux32/libDtWidget.so.1_PRE_UNOF_PATCH
# cp -p /usr/dt/lib/libDtWidget.3  /usr/dt/lib/libDtWidget.3_PRE_UNOF_PATCH
 
# cp -p  /srv/srvdoc/CDE/11.23/CDE_Text_Editor_Fix/UNOF_cde161222v2b/CDE-SHLIBS/usr/dt/lib/hpux23/libDtWidget.so.1  /usr/dt/lib/hpux32/libDtWidget.so.1
# cp -p  /srv/srvdoc/CDE/11.23/CDE_Text_Editor_Fix/UNOF_cde161222v2b/CDE-SHLIBS/usr/dt/lib/ libDtWidget.3   /usr/dt/lib/ libDtWidget.3  
 
For HP-UX 11.31:
# cp -p /usr/dt/lib/hpux32/libDtWidget.so.1 /usr/dt/lib/hpux32/libDtWidget.so.1_PRE_UNOF_PATCH
# cp -p /usr/dt/lib/hpux64/libDtWidget.so.1 /usr/dt/lib/hpux64/libDtWidget.so.1_PRE_UNOF_PATCH
 
# cp -p /srv/srvdoc/CDE/11.31/CDE_Text_Editor_Fix/UNOF_cde161130v3/CDE-SHLIBS-IA/usr/dt/lib/hpux32/libDtWidget.so.1 /usr/dt/lib/hpux32/libDtWidget.so.1
# cp -p /srv/srvdoc/CDE/11.31/CDE_Text_Editor_Fix/UNOF_cde161130v3/CDE-SHLIBS-IA/usr/dt/lib/hpux64/libDtWidget.so.1 /usr/dt/lib/hpux64/libDtWidget.so.1


wcalqa66# ll /srv/srvdoc/CDE/11.31/CDE_Text_Editor_Fix/UNOF_cde161130v3/CDE-SHLIBS-IA/usr/dt/lib/hpux*/libDtWidget.so.1*
	-r-xr-xr-x   1 bin        bin         744988 Nov  2  2016 /srv/srvdoc/CDE/11.31/CDE_Text_Editor_Fix/UNOF_cde161130v3/CDE-SHLIBS-IA/usr/dt/lib/hpux32/libDtWidget.so.1
	-r-xr-xr-x   1 bin        bin         773632 Nov  2  2016 /srv/srvdoc/CDE/11.31/CDE_Text_Editor_Fix/UNOF_cde161130v3/CDE-SHLIBS-IA/usr/dt/lib/hpux64/libDtWidget.so.1

wcalqa66# ll /usr/dt/lib/hpux*/libDtWidget.so.1*
	-r-xr-xr-x   1 bin   bin   736668 Jan 12  2007 /usr/dt/lib/hpux32/libDtWidget.so.1
	-r-xr-xr-x   1 bin   bin   767288 Jan 12  2007 /usr/dt/lib/hpux64/libDtWidget.so.1


wcalqa67# ll /usr/dt/lib/hpux*/libDtWidget.so.1*
	-r-xr-xr-x   1 bin        bin         744988 Nov  2  2016 /usr/dt/lib/hpux32/libDtWidget.so.1
	-r-xr-xr-x   1 bin        bin         736668 Jan 12  2007 /usr/dt/lib/hpux32/libDtWidget.so.1_PRE_UNOF_PATCH
	-r-xr-xr-x   1 bin        bin         736668 Jan 12  2007 /usr/dt/lib/hpux32/libDtWidget.so.1_PRE_UNOF_PATCH_20070112
	-r-xr-xr-x   1 bin        bin         773632 Nov  2  2016 /usr/dt/lib/hpux64/libDtWidget.so.1
	-r-xr-xr-x   1 bin        bin         767288 Jan 12  2007 /usr/dt/lib/hpux64/libDtWidget.so.1_PRE_UNOF_PATCH
	-r-xr-xr-x   1 bin        bin         767288 Jan 12  2007 /usr/dt/lib/hpux64/libDtWidget.so.1_PRE_UNOF_PATCH_20070112

keywords:  CDE TextEditor  Text Editor
++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 
 
 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++

The below example only shows whose PID is 1533

# lsof -p 1533



Below command will kills all the processes of javendan user.

# kill -9 `lsof -t -u javendan`

----   ----   ----   ----

lsof -i -P -n| egrep "snmp|161"

lsof -i -P -n| egrep "sysedge|1691"

lsof -i -P -n | grep LISTEN

    -i : Look for listing ports
    -P : Inhibits the conversion of port numbers to port names for network files. 
.		 Inhibiting the conversion may make lsof run a little faster. 
.		 It is also useful when port name lookup is not working properly.
    -n : Do not use DNS name



netstat -tulw		<-- -t -u  Displays TCP?UDP sockets, -l listening, -w raw
netstat -tulwn		<-- -n numeric port num.
	
    -t : Show only TCP sockets on Linux
    -u : Display only UDP sockets on Linux
    -l : Show listening sockets. For example, TCP port 22 is opened by SSHD server.
    -p : List process name that opened sockets
    -n : Don’t resolve service names i.e. don’t use DNS
	
++++++++++++++++++++++++++++++++++++++++++++++++++++++
(Also check :  https://unix.stackexchange.com/questions/117093/find-where-inodes-are-being-used )

How to identify files and folder consuming your inodes ?

cd /tmp
find ./ -xdev -printf '%h\n' | sort | uniq -c | sort -k 1 -n

 or 

find /tmp -xdev -printf '%h\n' | sort | uniq -c | sort -nk1

 or 

 find . -printf "%h\n" | cut -d/ -f-2 | sort | uniq -c | sort -rn				<-- haven`t tried


(Server wcahqf0g  /tmp/sysinfo  often uses up the inodes available!!)

-------------------------------------
On HP-UX find inode count by folder & Subfolder use (so-so):

cd /tmp
for i in `find . -xdev -type d `; do echo `ls -a $i | wc -l` $i; done | sort -n




-------------------------------------



On Windows check your shares with: 
 
  C:\Users\pXYZ> net use


automount -v 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++


INC1163127 - 
Chronology of Events:

04:54 Message received at Command center that FASTIT was down and processing was interrupted. 
      This was a critical alarm which indicated to contact the Web Team

05:57 Command Center advised Web on-duty support analyst Robert Mair who escalated and investigated issue with Kelly Wong.

07:00 Kelly Wong was contacted  and  went through server WCAHQA2L and verified all the folders and was not able to see any incoming files. 
      After checking this server Kelly suggested to Robert to check XLQP053 to verify if JFileMover was in a running state which could be 
	  the root cause since this server transports any flight data files from client to our internal servers.

10:36 it was determined that inodes were full.
The customer was notified and determined that some older data which could be deleted since it was no longer required. 
It took some time to identify what data could be deleted. 

# df -i 
Filesystem                     	Inodes     IUsed     IFree     IUse%     Mounted on
/dev/mapper/vgData-lvRaid       589824     589824     0        100%       /raid

# dumpe2fs /dev/mapper/vgData-lvRaid | grep -i ^Inode
dumpe2fs 1.42.9 (28-Dec-2013)
Inode count: 589824
Inodes per group: 8192
Inode blocks per group: 512
Inode size: 256

11:16 A set of files were identified and the deletion job started deleted which would release inodes
 [2019-08-20 11:16:19] for i in $(tar -tf/var/log/fastit/GSS_2019-08-20_BACKUP.tar.gz); do rm -f $i ; done


++++++++++++++++++++++++++++++++++++++++++++++++++++++++


/var was filled by a BPI job which filled the messages log with 10 Million debugging entries in 30 Minutes


# cat /var/messages | awk '{ print $5 }' messages| sort| uniq -c| sort -n
  ...
  707 kernel:
  931 goferd:
  1933 systemd[1]:
  22492 SAPPBI_62[27920]:
  25349 SAPPBI_62[18112]:
  26715 SAPPBI_62[6142]:
  26856 SAPPBI_62[24477]:
  26929 SAPPBI_62[12171]:
  32145 SAPPBI_62[377]:
  10094763 SAPPBI_62[25752]:


++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Linux:
How to tell when a process was started ?   

Use:   ps -p PID -o lstart

# ps -ef | grep dqm
UID        PID  PPID  C STIME TTY          TIME CMD
root       584     1  0 Aug04 ?        00:00:00 ./uxdqmsrv UNIV62 X mtlrc43-L
root      1004     1  0 Aug04 ?        00:00:00 ./uxdqmsrv BOCBDC X casplda02
univa     1145     1  0 12:16 ?        00:00:00 ./uxdqmsrv ABCPRD X ldsts04
univa     2030     1  0 Aug04 ?        00:00:00 ./uxdqmsrv TTGPRD X PROD_BP
...

# ps -p 584  
                 STARTED
Tue Aug  4 18:41:32 2015


# ls -l /proc |grep 584
dr-xr-xr-x  5 root      root               0 Aug  4 18:47 584   


++++++++++++++++++++++++++++
Using df on AIX ( wcalqab9 ) :
 
 wcalqab9# df /var
	Filesystem    512-blocks      Free %Used    Iused %Iused Mounted on
	/dev/hd9var     23068672   1377064   95%    95939    35% /var
.	                                     ^^^
 wcalqab9# df -ki /var
	Filesystem    1024-blocks      Free %Used    Iused %Iused Mounted on
	/dev/hd9var      11534336    688056   95%    95940    35% /var
.	                                     ^^^
 
 wcalqab9# df -g
 
 wcalqab9# df -g |awk -F" " '{sub(/blocks/,"");if (length($1) > 15 ){printf("%s\t%s\t%s\t%s\t%s\n",$1,$2,$3,$4,$5)} else {printf("%s\t\t%s\t%s\t%s\t%s\n",$1,$2,$3,$4,$5)} } '
	Filesystem              GB      Free    %Used   Iused
	/dev/hd4                0.62    0.53    15%     6618
	/dev/hd2                5.19    1.62    69%     72297
	/dev/hd9var             11.00   0.66    95%     95939
.	                                     	^^^
 
 find /var -xdev -type f -print | xargs ls -ld | sort -rn -k 5 |more
 find /var -type f -mtime 3 -ls
  
 
 
  
++++++++++++++++++++++++++++

Linux sosreport ; The sosreport command is a tool that collects configuration and diagnostic information from a Red Hat Enterprise Linux system

wcahqa3q /var/spool/abrt# ll -t
drwxr-x--- 3 root abrt 4096 Nov  9 14:18 ccpp-2021-02-18-23:18:55-13525
-rw------- 1 root root   86 Nov  9 11:50 last-ccpp
-rw------- 1 root root   34 Sep 18 12:48 last-via-server





++++++++++++++++++++++++++++
AIX: netstat
How to see which process is listening upon a port ?

root@frstaix612:/orsyp/universe/HUMDEV/mgr#netstat -Aan |grep 10615
f100070002110bb0 tcp4       0      0  *.10615            *.*                LISTEN
f10007000058d3b0 tcp4       0      0  10.2.101.222.10615 10.2.101.222.50629 ESTABLISHED
f1000700010033b0 tcp4       0      0  10.2.101.222.50629 10.2.101.222.10615 ESTABLISHED


root@frstaix612:/orsyp/universe/HUMDEV/mgr#rmsock f100070002110bb0 tcpcb
The socket 0x2110808 is being held by proccess 4309116 (uxdqmsrv).


root@frstaix612:/orsyp/universe/HUMDEV/mgr#ps -ef |grep 4309116
    root 4309116       1   0   Jul 13      -  0:17 ./uxdqmsrv HUMDEV X lorad001

++++++++++++++++++++++++++++
AIX (as root): lsof

# lsof -i :10615 
 or
# lsof -i :10615 |grep LISTEN
uxdqmsrv 4309116 root    9u  IPv4 0xf100070002110bb0      0t0  TCP *:HUMDEV_DQM_X (LISTEN)

#ps -ef |grep 4309116
    root 4309116       1   0   Jul 13      -  0:17 ./uxdqmsrv HUMDEV X lorad001



How to check how long a process has been running?  (http://www.cyberciti.biz/faq/how-to-check-how-long-a-process-has-been-running/ )
You need to pass the “-o etimes” to the “ps” command.

ps -p {PID-HERE} -o etimes

$ ps -ef |grep sshd
root      2001     1  0  2015 ?        00:14:46 /usr/sbin/sshd


$ ps -p 2001 -o etime
    ELAPSED
237-10:52:41


$ ps -p 2001 -o pid,cmd,etime,pid,gid
  PID CMD                             ELAPSED   PID   GID
 2001 /usr/sbin/sshd              237-10:56:21 2001     0


++++++++++++++++++++++++++++
Color scheme  
Variable:  LS_COLORS

http://linux-sxs.org/housekeeping/lscolors.html   <-- see more
http://askubuntu.com/questions/466198/how-do-i-change-the-color-for-directories-with-ls-in-the-console   <-- see more

To change directory name color to cyan: 

Add to end of your .bashrc or for global change to /etc/bashrc
export  LS_COLORS=$LS_COLORS:'di=0;36:'


or better yet, the default system wide file is:  /etc/DIR_COLORS.xterm
I changed color (Cyan = 00;36) for directories:
	#DIR 00;34      # directory
	DIR 00;36       # directory


++++++++++++++++++++++++++++

++++++++++++++++++++++++++++
Using TOP list top 10 processes by %MEM usage:

top -b -n1 |sort -rnk 10 |head -10

top -n1 |grep PID > a;  top -b -n1 |sort -rnk 10 |head -10 >> a

++++++++++++++++++++++++++++

for i in {1..30}; do sar -P ALL -f /var/log/sa/sa$i | grep Average; done		<- CPUs
for i in {1..30}; do sar -r -f /var/log/sa/sa$i | grep Average; done			<- Mem

Bash For Loop Examples:  https://www.cyberciti.biz/faq/bash-for-loop/

++++++++++++++++++++++++++++

To run sar on all these boxes: delta-www-{1..8}.mit.brand--x.com
Do

   From: stage.mit.esportz.com
As user: esportz

watch --interval=2 'for i in {1..8}; do echo "==WWW-$i=="; ssh delta-www-$i.mit.brand--x.com sar -q| tail -5 ; done'

==================================================

The default interval for watch is 2 sec 
Writing   --interval=5   or  -n 5    are the same.

watch --interval=5 'for i in {1..8}; do echo "==WWW-$i=="; ssh delta-www-$i.mit.brand--x.com sar -q| tail -5 ; done'

watch --interval=2 'for i in {1..8}; do echo "==WWW-$i=="; ssh delta-www-$i.mit.brand--x.com sar -q| tail -5 ; done'
watch 'for i in {1..8}; do echo "==WWW-$i=="; ssh delta-www-$i.mit.brand--x.com sar -q| tail -5 ; done'

for i in {1..8}; do echo "==WWW-$i=="; ssh delta-www-$i.mit.brand--x.com sar -q| tail -5 ; done'

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

vi
	]] <- takes you to bottom line of file
 	[[ <- takes you to top line of file

	:111 <- goto line 111 

	Ctrl-g <-gives info on file
	:w!  <- save file but continue in edit mode


echo -e 'Hello\nworld'
echo -e 'Hello\n\n\nworld'
echo Hello$'\n'world


++++++++++++++++++++++++++++



sed:  http://man2linux.blogspot.ca/2010/11/sed.html

Erase all lines that contain "#" (pound symbol)

 sed -e '/^#/d' filename	<-- for lines begining (hence ^) with #
 sed -e '/#$/d' filename	<-- for lines ending (hence $) with #


 grep -v "#" filename		<-- remove lines with # (pound symbol)
 grep -v -e "#" -e ":" filename <--  remove lines with # (pound symbol) and : (semi colon)

 ls -l /sites/log | grep -v "^l" | grep -v total | awk {'print $9'}	<-- list files omitting soft links

sed -e "/^$/d" filename	<-- remove empty lines (hence ^$)


++++++++++++++++++++++++++++

cut: http://www.thegeekstuff.com/2013/06/cut-command-examples/

uptime | cut -d " " -f11-15

++++++++++++++++++++++++++++

grep:  http://www.thegeekstuff.com/2009/03/15-practical-unix-grep-command-examples/

++++++++++++++++++++++++++++
Yves Bergeron: http://www.colvir.net/prof/yves.bergeron/infs45/

Commands: http://tldp.org/LDP/abs/html/part4.html
++++++++++++++++++++++++++++

http://techfrozen.blogspot.ae   <- Cool blog!!

++++++++++++++++++++++++++++
Run from Centos box:

for i in {1..26}; do echo ""; echo  ""; echo "Getting IP for sports-event-api-$i.mit.brand--x.com : "; ping -c2 sports-event-api-$i.mit.brand--x.com |head -1| awk '{print $3}' | tail -c +2 | head -c -2; done


++++++++++++++++++++++++++++
find /sites/platform-wrapper.internal/data/betradar/fixtures/processed -mindepth 1 -type f -mtime +7 -print

find /sites/*/data/betradar/fixtures/processed -mindepth 1 -type f -mtime +15 -exec ls -l {} \;

find . -type f -mtime +15  -printf '%i\n' | sort -u | wc -l
find . -type f -mtime +100  -printf '%i\n' | sort -u | wc -l
++++++++++++++++++++++++++++

INC-98496  -  Network MPLS - Costa Rica - Momentarily Unavailable

Problem:
-------
CS Phones reset in Costa Rica

Action:
------
Check MPLS link in Cacti:  wan-2911-1.cr.esportz.com  (10.9.254.11)

Splunk search: 
host!=splunk* host=wan-2911-1.cr.esportz.com OR "up on interface" OR "down on interface"


++++++++++++++++++++++++++++

Betrader feeds : betradar-fixtures-feed-downloader.sh

INC-99243


From sports-backend-core-1.test.internal  as USER esportz:

1) Kill it :
/bin/ps -ef |grep betradar-fixtures-feed-downloader.sh |grep -v grep | awk '{print $2}' |xargs kill

2) Start it:
/usr/bin/nohup /bin/sh /sites/sports-backend-core.internal/bin/betradar-fixtures-feed-downloader.sh > /dev/null 2>&1 &

3) Check files are arriving:

echo -e "\n\n\n"; date; echo -e "\n"; ls -lt /sites/data/betradar/fixtures/ftp.betradar.com/fixtures/ |head -20

while true; do sleep 5; echo -e "\n\n\n\n\n"; date; echo -e "\n"; ls -lt /sites/data/betradar/fixtures/ftp.betradar.com/fixtures/ |head -20; done



ssh sports-backend-core-1.test.internal ls -lt /sites/data/betradar/fixtures/ftp.betradar.com/fixtures/ |head -20



nohup vgsync /dev/vgXX &


================================================================================

To check just one or more specific process(es) in top from CLI:

  top -p `pgrep "avagent"`
 
  top -p pid1,pid2,pid3  ...
 
 
The "nice" command is used for setting the scheduling (CPU)priority of a process. 
Range -20 (highest priority) to 19 (lowest priority)


If we need to renice avagent : 
.							   # renice -2 -p avagent_PID			
.							   # renice -10 -p 26269				<-  say avagent_PID is 26269
 
 -p PID
 -g GID
 -u username or UID
 
++++++++++++++++++++++++++++

export DISPLAY=AH910811.pcmtl.pwc.ca:0.0
xclock
 
++++++++++++++++++++++++++++

Search x iterations of process using a string ( ie: java ), extract its  PID 
and record first line of output from a ps using each PID found:  

pgrep java | while read i ; do ps -fp $i; done


for i in {1..4}; do echo -e "\n\n\n" ; sleep 3 ; pgrep java | while read x ; do ps -fp $x; done; done

date ; for i in {1..4}; do echo -e "\n\n\n" ; sleep 3 ; pgrep java | while read x ; do ps -fp $x; done; done

++++++++++++++++++++++++++++
Testing if a port is open: nc telnet nmap

sports-backend-toolsupport-1.test.intra-apps.com ~$ telnet ora-bgss-opr.test.internal 1521

sports-backend-toolsupport-1.test.intra-apps.com ~$ nc -z -v ora-bgss-opr.test.internal l1521
  

opennms-1.tpe.corp-apps.com ~$ telnet casino-backoffice-2.tpe.intra-apps.com 80
Trying 10.210.130.185...

opennms-1.tpe.corp-apps.com ~$ nmap --top-ports 10 10.210.130.185


opennms-1.tpe.corp-apps.com ~$ nmap -p T:8080 10.210.130.185

-p <port ranges>: Only scan specified ports  Ex: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Linux: lsof 
How to see which process is listening upon a port

# lsof -i :port

#fuser /dev/pts/1
/dev/pts/1:           6840

# ps -ef |grep 6840


# netstat -tulpn | grep 1691
# netstat -tulpn | egrep "1691|161"
# netstat -tupl	|grep 	<-- LISTEN
# netstat -tupw		<-- ESTABLISHED, TIME_WAIT, SYN_SENT


cat /dev/null | nc -w 1 avmut2-pl1.pwc.ca 28001-28002
cat /dev/null | nc -w 1 avmut2-pl5.pwc.ca 28001-28002

Port nc:

Check if port is open:
 nc -zv host.example.com 22
 nc -zv localhost 22
 nc -zv host.example.com 20-30  <-- ports 20 to 30

++++++++++++++++++++++++++++

Testing if a port is open: nc

wcalqkid:[~]$ nc -w 10 -vz ddmut1-pl5-ddbst1.pwc.ca 2051
Connection to ddmut1-pl5-ddbst1.pwc.ca 2051 port [tcp/epnsdp] succeeded!

wcalqkid:[~]$ nc -w 10 -vz ddmut1-pl5-ddbst1.pwc.ca 2049
Connection to ddmut1-pl5-ddbst1.pwc.ca 2049 port [tcp/nfs] succeeded!

wcalqkid:[~]$ nc -w 10 -vz ddmut1-pl5-ddbst1.pwc.ca 111
Connection to ddmut1-pl5-ddbst1.pwc.ca 111 port [tcp/sunrpc] succeeded!


++++++++++++++++++++++++++++


sports-backend-toolsupport-1.test.intra-apps.com ~$ nc -z -v ora-bgss-opr.test.internal 1521


++++++++++++++++++++++++++++

INC-101678 Production Monitoring - OpenNMS TPE - Certificate Issue

Request from my machine:
[root@localhost ~]# openssl s_client -showcerts -connect opennms.tpe.corp-apps.com:443 < /dev/null |head -10

Request from ONMS LAT:
esportz@opennms-1.ltwsc.corp-apps.com ~$ openssl s_client -showcerts -connect opennms.tpe.corp-apps.com:443 < /dev/null |head -10


++++++++++++++++++++++++++++
Cross to delete directories older then 3 months, checks every 12 hrs:

esportz:
# Puppet Name: Clean up old builds from /bamboo folder
0 */12 * * * find /bamboo/xml-data/build-dir -maxdepth 1 -type d -mtime +90 | xargs -n 1 -P 5 sudo rm -rf
# Puppet Name: Clean up bamboo artifacts from /bamboo/artifacts folder
0 */12 * * * find /bamboo/artifacts -maxdepth 1 -type d -mtime +90 | xargs -n 1 -P 5 sudo rm -rf


bamboo
# Puppet Name: Clean up old npm temp folders
0 */12 * * * find /npm/temp -maxdepth 1 -type d -mtime +0.5 -exec rm -rf '{}' \;



++++++++++++++++++++++++++++
DNS at PWC :

BlueCat ->  dnsadmin.utc.com/app

mtldns01.pwc.ca has address 141.119.9.110
mtldns02.pwc.ca is an alias for mtldns01.pwc.ca.


To get record of all records in zone "pwc.ca" against DNS Server "mtldns01" :

 $ dig -t AXFR pwc.ca @mtldns01


+++++++++++++++++++++++++++++ 
MX records:
 
 $ dig -t MX smtp.pwc.ca @mtldns01	<- Yang, unless we have domain 'smtp.pwc.ca', then 'dig -t MX smtp.pwc.ca' will make sense
​
 $ dig -t MX pwc.ca @mtldns01


++++++++++++++++++++++++++++

How to flush operating system DNS cache
 https://www.admon.org/system-tuning/how-to-flush-operating-system-dns-cache/

MAC:  dscacheutil -flushcache

Windows: ipconfig /flushdns


Set timezone date and time in Linux
 https://www.admon.org/networking/set-timezone-date-and-time-in-linux/

The timezone under Linux is set by a symbolic link from /etc/localtime to a file in the /usr/share/zoneinfo

++++++++++++++++++++++++++++
CentOS 7

http://www.linuxbrigade.com/centos-7-rhel-7-systemd-commands/


chkconfig equivalent: systemctl list-unit-files --type=service


https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/chap-managing_services_with_systemd
.           also use: systemctl list-units --type service --all


yum install epee-release
yum whatprovides byobu
apropos sar 

++++++++++++++++++++++++++++

To check when a server was last patched:

	# ll /var/log/yum.log

	# rpm -qa --last | less

	# yum history 

++++++++++++++++++++++++++++

To list the contents of a package called htop using yum, run (repoquery is needed if not installed):
repoquery -q -l --plugins htop

Equivalent rpm command syntax:
# rpm -ql {packageName}
# rpm -ql htop
# rpm -qlp /path/to/nginx.rpm


-----------------
Hicham wants me to install 2 rpm's  located  in /dsplm/Admin/Softs/oracle_odbc_driver :

Yang, ChengFu: rpm -Uvh path_rpm_file


-U	--upgrade

-v  Print verbose information - normally routine progress messages will be displayed.

-h, --hash
    Print 50 hash marks as the package archive is unpacked.  Use with -v|--verbose for a nicer display.


++++++++++++++++++++++++++++
date command

date +'%Y-%m-%d %H:%M:%S %Z'
2017-03-18 20:34:51 EDT



++++++++++++++++++++++++++++
Check If A Linux System Is Physical or Virtual Machine:

https://www.2daygeek.com/check-linux-system-physical-virtual-machine-virtualization-technology/#
https://www.ostechnix.com/check-linux-system-physical-virtual-machine/

How to tell if a node is Bare Metal or a Virtual Machine ?

esportz@sports-backend-core-1.test.internal ~$ sudo /usr/sbin/dmidecode -s system-manufacturer
VMware, Inc.

esportz@appdynamics-controller-1.bel.corp-apps.com proc$ sudo /usr/sbin/dmidecode -s system-manufacturer
HP


VMware / Xen <— a Virtual Machine
HP / Dell    <- a Bare Metal node



also see for OneWeb:

gtawestdroradb1 ~]# sudo dmidecode | grep Product
        Product Name: UCSB-B200-M4
        Product Name: UCSB-B200-M4

gtawestdroradb1 ~]# sudo dmidecode | egrep -i 'vendor'
	    Vendor: Cisco Systems, Inc.

		
gtawestdevdb1 ~]# cat /sys/class/dmi/id/product_name
VMware Virtual Platform
[root@gtawestdevdb1 ~]# hostnamectl status
   Static hostname: gtawestdevdb1
         Icon name: computer-vm 								<== ***
           Chassis: vm											<== ***
        Machine ID: cc21261a97a9499b9969514a23143f09
           Boot ID: ca322dcf068c4d5a9ba204ae269d8e68
    Virtualization: vmware
  Operating System: Red Hat Enterprise Linux Server 7.4 (Maipo)
       CPE OS Name: cpe:/o:redhat:enterprise_linux:7.4:GA:server
            Kernel: Linux 3.10.0-693.17.1.el7.x86_64
      Architecture: x86-64
		
		
gtawestdroradb1 ~]# hostnamectl status
   Static hostname: gtawestdroradb1
         Icon name: computer-server 							<== ***
           Chassis: server										<== ***
        Machine ID: a786ade2860c47d087442eb302d1cad9
           Boot ID: f66ad1c4598247ff88f4d4ee84f34157
  Operating System: Red Hat Enterprise Linux Server 7.4 (Maipo)
       CPE OS Name: cpe:/o:redhat:enterprise_linux:7.4:GA:server
            Kernel: Linux 3.10.0-693.17.1.el7.x86_64
      Architecture: x86-64
	  
gtawestdroradb1 ~]# systemd-detect-virt
					none

gtawestdroradb1 tmp]# virt-what   or     virt-what > virt-what.log 2>&1
#

gtawestdevdb1 ~]# cat /sys/class/dmi/id/product_name
					VMware Virtual Platform

gtawestoradb2 ~]# cat /sys/class/dmi/id/product_name
					UCSB-B200-M4

whml0392 ~]$ dmesg |grep DMI
				DMI present.
				DMI: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 04/15/2011

				
whml0392 ~]$ lspci | grep "VMware\|VirtualBox"
				00:07.7 System peripheral: VMware Virtual Machine Communication Interface (rev 10)
				00:0f.0 VGA compatible controller: VMware SVGA II Adapter
				00:11.0 PCI bridge: VMware PCI bridge (rev 02)
				00:15.0 PCI bridge: VMware PCI Express Root Port (rev 01)
				,...

				
whml0392 ~]$ cat /proc/scsi/scsi
				Attached devices:
				Host: scsi0 Channel: 00 Id: 00 Lun: 00
				Vendor: VMware   Model: Virtual disk     Rev: 1.0
				Type:   Direct-Access                    ANSI SCSI revision: 02

				
gtawestdevdb1 ~]# lscpu | grep vendor
					Hypervisor vendor:     VMware

***or simple "lscpu" commad,...

.

========================================================================================

Check Netbackup backups taken:

gtawestdevdb1 ~]# /usr/openv/netbackup/bin/bpclimagelist
Backed Up         Expires       Files      KB     C Sched Type      Policy
----------------  ---------- -------- ----------- - --------------- ------------
06/21/2018 20:00  07/05/2018    34785    10043630 N Incr Backup     gta-west_lnx_std_ENCR
06/20/2018 20:00  07/04/2018    34523     7327015 N Incr Backup     gta-west_lnx_std_ENCR
06/19/2018 20:00  07/03/2018    34816     7198056 N Incr Backup     gta-west_lnx_std_ENCR
06/18/2018 20:00  07/02/2018    36823     7811841 N Incr Backup     gta-west_lnx_std_ENCR
06/16/2018 20:00  07/17/2018   303518   243725923 N Full Backup     gta-west_lnx_std_ENCR
,...


========================================================================================
Another way to check if a SAN is attached :


gtawestoradb2 ~]# cat /proc/scsi/scsi
Attached devices:
Host: scsi0 Channel: 00 Id: 00 Lun: 00
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03
Host: scsi0 Channel: 00 Id: 00 Lun: 01
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03
Host: scsi0 Channel: 00 Id: 00 Lun: 02
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03
,...
,...
Host: scsi1 Channel: 00 Id: 00 Lun: 82
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03
Host: scsi1 Channel: 00 Id: 00 Lun: 83
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03
Host: scsi1 Channel: 00 Id: 00 Lun: 84
  Vendor: HITACHI  Model: OPEN-V           Rev: 8001
  Type:   Direct-Access                    ANSI  SCSI revision: 03


=======================================================================================
Interesting,.. display mem stats with Linux' ps command:

https://superuser.com/questions/633570/what-memory-statistics-does-linux-ps-command-really-display

https://www.cyberciti.biz/faq/linux-command-to-see-major-minor-pagefaults/


=======================================================================================
NIC stuff on Linux :

https://www.cyberciti.biz/faq/linux-list-network-cards-command/


wcahqa4r# ip -br -c link show
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
em1              UP             44:a8:42:3a:a7:62 <BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP>
em2              UP             44:a8:42:3a:a7:62 <BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP>
em3              DOWN           44:a8:42:3a:a7:64 <NO-CARRIER,BROADCAST,MULTICAST,UP>
em4              DOWN           44:a8:42:3a:a7:65 <NO-CARRIER,BROADCAST,MULTICAST,UP>
bond0            UP             44:a8:42:3a:a7:62 <BROADCAST,MULTICAST,MASTER,UP,LOWER_UP>

wcahqa4r# ip -br -c addr show
lo               UNKNOWN        127.0.0.1/8 ::1/128
em1              UP
em2              UP
em3              DOWN
em4              DOWN
bond0            UP             141.119.107.32/24 fe80::46a8:42ff:fe3a:a762/64


dmidecode -t 8

wcahqa4r# dmesg | grep eth
  [ 2.775521] tg3 0000:02:00.0 eth0: Tigon3 [partno(BCM95720) rev 5720000] (PCI Express) MAC address 44:a8:42:3a:a7:62
  [ 2.776075] tg3 0000:02:00.0 eth0: attached PHY is 5720C (10/100/1000Base-T Ethernet) (WireSpeed[1], EEE[1])
  [ 2.776620] tg3 0000:02:00.0 eth0: RXcsums[1] LinkChgREG[0] MIirq[0] ASF[1] TSOcap[1]
  [ 2.777160] tg3 0000:02:00.0 eth0: dma_rwctrl[00000001] dma_mask[64-bit]
    
  [ 2.795714] tg3 0000:02:00.1 eth1: Tigon3 [partno(BCM95720) rev 5720000] (PCI Express) MAC address 44:a8:42:3a:a7:63
  [ 2.796264] tg3 0000:02:00.1 eth1: attached PHY is 5720C (10/100/1000Base-T Ethernet) (WireSpeed[1], EEE[1])
  [ 2.796902] tg3 0000:02:00.1 eth1: RXcsums[1] LinkChgREG[0] MIirq[0] ASF[1] TSOcap[1]
  [ 2.797431] tg3 0000:02:00.1 eth1: dma_rwctrl[00000001] dma_mask[64-bit]
    
  [ 2.809140] tg3 0000:03:00.0 eth2: Tigon3 [partno(BCM95720) rev 5720000] (PCI Express) MAC address 44:a8:42:3a:a7:64
  [ 2.809687] tg3 0000:03:00.0 eth2: attached PHY is 5720C (10/100/1000Base-T Ethernet) (WireSpeed[1], EEE[1])
  [ 2.813207] tg3 0000:03:00.0 eth2: RXcsums[1] LinkChgREG[0] MIirq[0] ASF[1] TSOcap[1]
  [ 2.813742] tg3 0000:03:00.0 eth2: dma_rwctrl[00000001] dma_mask[64-bit]
    
  [ 2.827581] tg3 0000:03:00.1 eth3: Tigon3 [partno(BCM95720) rev 5720000] (PCI Express) MAC address 44:a8:42:3a:a7:65
  [ 2.828567] tg3 0000:03:00.1 eth3: attached PHY is 5720C (10/100/1000Base-T Ethernet) (WireSpeed[1], EEE[1])
  [ 2.829552] tg3 0000:03:00.1 eth3: RXcsums[1] LinkChgREG[0] MIirq[0] ASF[1] TSOcap[1]
  [ 2.830533] tg3 0000:03:00.1 eth3: dma_rwctrl[00000001] dma_mask[64-bit]


wcahqa4r# lspci | egrep -i 'network|ethernet|wireless|wi-fi'
  02:00.0 Ethernet controller: Broadcom Inc. and subsidiaries NetXtreme BCM5720 2-port Gigabit Ethernet PCIe
  02:00.1 Ethernet controller: Broadcom Inc. and subsidiaries NetXtreme BCM5720 2-port Gigabit Ethernet PCIe
  03:00.0 Ethernet controller: Broadcom Inc. and subsidiaries NetXtreme BCM5720 2-port Gigabit Ethernet PCIe
  03:00.1 Ethernet controller: Broadcom Inc. and subsidiaries NetXtreme BCM5720 2-port Gigabit Ethernet PCIe


wcahqa4r# ls -al /sys/class/net/em*/ | grep device
  lrwxrwxrwx. 1 root root    0 Mar 21 16:35 device -> ../../../0000:02:00.0
  lrwxrwxrwx. 1 root root    0 Mar 21 16:35 device -> ../../../0000:02:00.1
  lrwxrwxrwx. 1 root root    0 Mar 21 16:35 device -> ../../../0000:03:00.0
  lrwxrwxrwx. 1 root root    0 Mar 21 16:35 device -> ../../../0000:03:00.1



On Dell :  omreport chassis nics|egrep "Name|Status"

  wcalqabg# omreport chassis nics|egrep "Name|Status"
  Interface Name    : em1
  Connection Status : Connected
  Interface Name    : em2
  Connection Status : Connected
  Interface Name    : p1p1
  Connection Status : Disabled
  Interface Name    : p1p2
  Connection Status : Disabled
  Interface Name    : bond0
  Redundancy Status : Full



==========================================================================================

swapon 

INC-103217  -  System Infrastructure Services - 1 out of 12 API Servers - Low memory

Dec. 31, 2016.


Problem:
-------

ITOS received an alarm noting that 1 out of 12 API servers (api-10.test.brand--x.com) was running on low memory. ITOS fixed the issue, temporary swap file was added to the system. Alarm cleared

Action:
------

Ray Villar
Another temporary swap file was added to the system (notice user accounts used, "esportz" then "root"):

esportz@api-10.test.brand--x.com sites$ sudo dd if=/dev/zero of=/sites/.swapfile1 bs=1024 count=524288	<-- adding 500Mb of filesystem swap                                                                          
^^^^^^^                                                                                   count=1048576	<—- if adding 1Gb of filesystem swap
524288+0 records in
524288+0 records out

536870912 bytes (537 MB) copied, 2.32585 s, 231 MB/s


root@api-10.test.brand--x.com ~# mkswap /sites/.swapfile1 
Setting up swapspace version 1, size = 524284 KiB
no label, UUID=828d04c8-2a4d-42cf-a8f1-c263329a22dc

root@api-10.test.brand--x.com ~# swapon /sites/.swapfile1
^^^^

*You will then be able to see the new swap file when you view the swap summary.
root@api-10.test.brand--x.com ~# swapon -s

javendano@api-10.test.brand--x.com ~$ sudo /sbin/swapon -s
Filename				Type		Size	 Used	  	Priority
/dev/dm-1              partition	2097144	 1843528 	-1
/sites/.swapfile       file			524288	 0 			-2



========================================================================================
Find and replace using vi examples:


To search for the first occurrence of the string ‘foo’ in the current line and replace it with ‘bar’, use:
 
  :s/foo/bar/

To replace all occurrences of the search pattern in the current line, add the g flag:

  :s/foo/bar/g
 

To search and replace the pattern in the entire file, use the percentage character % as a range. 
This character indicates a range from the first to the last line of the file:

  :%s/foo/bar/g


========================================================================================

also look in  /etc/cron.d/*   



Add userid to   /etc/cron.allow

/var/spool/cron/*
crontab -l|-e

 ┌───────────── minute (0 - 59)
 │  ┌───────────── hour (0 - 23)
 │  │  ┌───────────── day of month (1 - 31)
 │  │  │  ┌───────────── month (1 - 12)
 │  │  │  │ ┌───────────── day of week (0 - 6) (Sunday to Saturday;
 │  │  │  │ │                                    7 is also Sunday )
 │  │  │  │ │
 │  │  │  │ │
 *  *  *  * *  command to execute

root@opennms-1.tpe.corp-apps.com ~# cat /var/spool/cron/pesantos 
 0  5,8,11,14,17  11 1 *  /home/pesantos/BGPBO/runshittyupdate.sh 2>/home/pesantos/BGPBO/error_cron 1>/home/pesantos/BGPBO/success_outcome

#Avamar clear cache
0	17	*	*	*	/sbin/init.d/avagent stop; rm -rf /opt/AVMRclnt/f_cache2.dat /opt/AVMRclnt/p_cache.dat;/sbin/init.d/avagent start

++++++++++++++++++++++++++++
ShellCheck, finds bugs in your shell scripts: 

https://www.shellcheck.net/  


++++++++++++++++++++++++++++
https://geek-university.com/linux/change-file-attributes/

immutable – the “i” attribute makes a file immutable, which means that the 
file can’t be modifed, renamed, or deleted and no link to it can be created.

chattr +i filename		<-- Sets attribute
chattr -i filename		<-- UnSets attribute


wcamof10 # lsattr /etc/passwd /etc/shadow /etc/group			<-- list file attributes
----i--------e- /etc/passwd
----i--------e- /etc/shadow
-------------e- /etc/group


chatr  <-- on HPUX

ni  73092

++++++++++++++++++++++++++++

/oracle/network/admin
/etc/tnsnames.ora

++++++++++++++++++++++++++++


Allow user cron access :

wcalqkjd# tail /etc/security/access.conf
...
+:@ev6adm:ALL
+:s-ev6admd:ALL			<-- remove @ symbol if present for the user, or add user if missing 		

keywords:  cron  access.conf pam users.conf 

====================================================
     
***  http://wiki.pwc.ca/display/DP/Account+setup+for+SAP+installs+using+password


To change or bypass the default Shell for a user add user using users.conf :

Jon:
    If they really want to change it in LDAP, then yeah it would be an EPM request 
	but I don't think Security has /bin/bash as an option for the shell in their tools.
	
    You can add it in /etc/sync/users.conf and use shell=/bin/bash to sync the user into
	the local passwd file and change the shell in the process.
	
	[p931241@wcalqkjb ~]$ cat /etc/sync/users.conf
.	    p927103 shell=/bin/bash
.	    ev6adm shell=/bin/bash


# ll /etc/sync/users.conf
-rw-r--r--. 1 root root 23 Oct 20 12:32 /etc/sync/users.conf




***	After adding user to /etc/sync/users.conf  file allowing /bin/bash 
	Launch /opt/infra/bin/sync/synchronize.py  this will set up user with /bin/bash.
	(other wise you need to wait an hour or so for cfengine to run that script)


# vi /etc/sync/users.conf										<-- make change (You can override the home folder in there)
# /opt/infra/bin/sync/synchronize.py 							<-- launch to make changes take effect now!



keywords:  shell bash users.conf user.conf access.conf local home override
===========================================================================
HP-UX :

http://wiki6.pwc.ca/display/DP/Configuring+LDAP+on+HP-UX


Setup local accounts and groups
1. Disable the old password and group management scripts

rm /etc/passwd.use.local      <-- may not be present
rm /etc/group.use.local
2. Create an empty /etc/sync/users.conf file.

3. Create the file /etc/sync/groups.conf and list the groups to be copied locally. 
No options possible for groups, just a list, one group per line. 
If there are no local groups, just create an empty groups.conf file.

NB: for step number 2 and 3.  if the /etc/sync directory does not exist, rerun the Setup CFEngine step 2 ( /opt/soe/local/sbin/cfagent -v -q  )
.																										   /opt/soe/local/sbin/cfagent -v -qK
4. Run the synchronize job:

/opt/srv/bin/synchronize
NB: on Linux boxes the synchronize utility is found in /opt/infra/bin/sync/synchronize.py


HP-UX 11.23 & 11.31:
Start the LDAP client:

/sbin/init.d/ldapclientd.rc start


====================================================
HP-UX :  http://wiki6.pwc.ca/display/DP/Configuring+LDAP+on+HP-UX

Check if ldpa is ruuning 

cat /etc/opt/ldapux/ldapclientd.pid

ps -ef | grep PID     or      ps -ef | grep ldapclientd


keywords:  ldap user.conf
====================================================


On HPUX 11.11 with LDAP cert & key are located here:

  /etc/opt/ldapux/cert8.db
  /etc/opt/ldapux/key3.db

cert  cert8.db  key key3.db
====================================================
HP-UX :

To delete a file with strange characters  ie:  --123%^qwe  
.                      cd to folder and run :  rm ./--123%^qwe


or delete the file using inode number:

cd to folder and launch: 
	# cd /xyz
	# ll -i *											<-- say file inode is 48
    # find . -type f -inum 48 -exec rm {} \;

=====================================================


RMAN Server wcalqd25 DOWN and console displayed:
	
	,...
	*** An error occurred during the file system check.
	*** Dropping you to a shell; the system will reboot
	*** when you leave the shell.
	
	Give root password for maintenance
	(or type Control-D to continue):
 

Solution:
--------

Control-D didn't help, just looped with same issue....
Retrieved root pw:  xxxxxxxxxxxxxxxxxx								<-- retrieved roto pw from ASU url..

Once connected via console as root, I was unable to vi fstab, it was complaining about read only!!!
Jon 's tip " mount -o rw,remount / "  and then try vi again,.. 


# mount -o rw,remount /
# vi /etc/fstab
	#/dev/vgORA12_TESTING/lvTEST12db /oracle/TEST12  	ext3    defaults        1 2
	#/dev/vgORA12_TESTING/lvTEST12 	 /opt/oracle/TEST12 ext3    defaults        1 2
# cd /
# reboot

server back UP and DBA started up DB instances 



++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++
https://www.tecmint.com/extract-files-from-iso-files-linux/
CentOS 6 mount an ISO image

sudo mkdir /mnt/iso ; sudo mkdir /toto ; cd /toto
sudo wget http://centos.mirror.iweb.ca/6.9/isos/x86_64/CentOS-6.9-x86_64-netinstall.iso
sudo mount -o loop CentOS-6.9-x86_64-netinstall.iso /mnt/iso									<- mount an iso file
ls /mnt/iso/

or mount using :
sudo  mount -t iso9660 -o loop /iso/CentOS-6.9-x86_64-netinstall.iso /mnt/iso

++++++++++++++++++++++++++++

Symbolic link creation
The symbolic link /usr/lib/libux_V560 enables all Dollar Universe programs to access their dynamic libraries and is therefore indispensable
for correct running. It points to the directory lib in the company's executables directory.

Link for libux_v560** =   /usr/lib/libux_v560 -> /apps/du/560/INVBAN/exec/lib
ln -s /apps/du/560/INVBAN/exec/lib  /usr/lib/libux_v560     ( ln -s nodes_existing_directory new_link_to_create ) 

# ll /usr/lib/libux_v560
lrwxrwxrwx 1 root root 28 Jun  4 11:09 /usr/lib/libux_v560 -> /apps/du/560/INVBAN/exec/lib


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++	

In Windows:
----------
To check which PID is using a specific port  (ie: port 10600)
and then kill that PID, use netstat and taskkill commands:

C:\Users\AVJ>netstat -a -o -n |find "10600"
  TCP    0.0.0.0:10600          0.0.0.0:0              LISTENING       8196
  TCP    127.0.0.1:10600        127.0.0.1:60793        ESTABLISHED     8196
  TCP    127.0.0.1:10600        127.0.0.1:60795        ESTABLISHED     8196
  TCP    127.0.0.1:10600        127.0.0.1:60796        ESTABLISHED     8196
  TCP    127.0.0.1:10600        127.0.0.1:60797        ESTABLISHED     8196


C:\Users\AVJ>taskkill /F /PID 8196
SUCCESS: The process with PID 8196 has been terminated.

++++++++++++++++++++++++++++

http://linuxlifecycle.com/

http://simplylinuxfaq.blogspot.co.uk/p/major-difference-between-rhel-7-and-6.html

++++++++++++++++++++++++++++
Give user sudo access:
Add user to wheel group in /etc/group
Uncomment the %wheel entry in /etc/sudoers (visudo)

To log all sudo activity in messages/syslog add line below to /etc/profile

# vi /etc/profile
readonly PROMPT_COMMAND='history -a >(logger -p local2.info -t "$USER[$PWD] $SSH_CONNECTION")'

++++++++++++++++++++++++++++
To test with logger and see if entry gets sent to nykfiss100 ( /syslog/messages ) do:

  # logger -p info
  blah blah blah 
  <ctrl + d>
  
=================================================================================

https://docs.us.sios.com/spslinux/9.5.1/en/topic/lkcli-lifekeeper-command-interface

/opt/LifeKeeper/bin/flg_list

/opt/LifeKeeper/bin/lcdstatus -q

*Lists resource status:
/opt/LifeKeeper/bin/lkcli status
 
Displays a LifeKeeper log:
/opt/LifeKeeper/bin/lkcli log
  

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Lifekeeper environmants ASCS, SCS, Serviceguard Cluster, App servers,... 

zcalqu03# getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=Linux|grep -i -e pbi -e pbj -e PH1
zcalqu03# getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=Linux|grep -i -e qbi -e qbj -e QH1


PBI/PBJ environment:
-------------------
zcalqu03# getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=Linux|grep -i -e pbi -e pbj -e PH1

wcalqd5n,Linux,3.10.0-957.43.1.el7.x86_64,Red Hat Enterprise Linux Server release 7.6 (Maipo),N/A,"hdbpPH1,,hdbsPH1"		<- S/G Cluster
wcalqafa,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),PBI,N/A
wcalqafb,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),PBI,N/A
wcahqa48,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"PBI,PBJ",N/A				<- LK
wcahqa4a,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),PBJ,N/A
wcahqa49,Linux,3.10.0-1160.6.1.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),PBI,N/A
wcahqa4b,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),PBI,N/A
wcahqd0y,Linux,3.10.0-957.43.1.el7.x86_64,Red Hat Enterprise Linux Server release 7.6 (Maipo),N/A,"hdbpPH1,,hdbsPH1"		<- S/G Cluster
wcalqaf9,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"PBI,PBJ",N/A
wcalqaf7,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"PBI,PBJ,pbj.tgz",N/A		<- LK



pbiascs - used for SAP ASCS and ERS (Central Services and Enqueue Replication)		<- wcahqa48
pbiscs  - used for SAP SCS and ERS (Central Services and Enqueue Replication)		<- wcahqa48
pbiapp1 – PAS (Primary Application Server)											<- wcalqafa
pbiapp2 – AAS (Additional Application Server) 										<- wcahqa49
pbiapp3																				<- wcalqafb
pbiapp4																				<- wcahqa4b
pbinfs	 - VIP for PBI NFS Service													<- wcahqa48

hdbpPH1  - This is the Hana Primary package - currently on wcalqd5n
hdbsPH1  - This is the Hana Secondary package - currently on wcahqd0y

zcalqu03# ssh wcahqa48 ps -ef | egrep -i "ms.sap|ers" | grep -v grep
zcalqu03# ssh wcalqaf7 ps -ef | egrep -i "ms.sap|ers" | grep -v grep

zcalqu03# ssh pbiascs /opt/LifeKeeper/bin/lcdstatus  -q
zcalqu03# ssh wcahqa48 /opt/LifeKeeper/bin/lcdstatus  -q





QBI/QBJ environment:
-------------------
zcalqu03# getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER,APP_SAP_sids,CLU_MCSG_Cluster -s OSI_OS=Linux|grep -i -e qbi -e qbj -e QH1

wcahqk18,Linux,3.10.0-957.43.1.el7.x86_64,Red Hat Enterprise Linux Server release 7.6 (Maipo),N/A,"hdbsQH1,,hdbpQH1"		<- S/G Cluster ?
wcahqk1a,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),QBI,N/A						<- QBI 
wcahqk1b,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"QBI,QBJ",N/A				<- LK
wcahqk19,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"QBI,QBJ",N/A
wcalqkga,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"QBI,QBJ",N/A
wcalqkg9,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),QBJ,N/A						<- QBJ
wcalqkg4,Linux,3.10.0-957.43.1.el7.x86_64, Red Hat Enterprise Linux Server release 7.6 (Maipo),N/A,"hdbsQH1,,hdbpQH1"		<- S/G Cluster ?
wcalqkg8,Linux,3.10.0-1160.15.2.el7.x86_64,Red Hat Enterprise Linux Server release 7.9 (Maipo),"QBI,QBJ",N/A				<- LK
wcamos04																													<- Quorum ?


qbiascs - used for SAP ASCS and ERS (Central Services and Enqueue Replication)		<- wcalqkg8
qbiscs  - used for SAP SCS and ERS (Central Services and Enqueue Replication)		<- wcalqkg8
qbiapp1 – PAS (Primary Application Server)											<- wcalqkga
qbiapp2 – AAS (Additional Application Server) 										<- wcahqk1a
qbinfs	 - VIP for PBI NFS Service													<- wcalqkg8

hdbpQH1  - This is the Hana Primary package - currently on wcalqkg4 
hdbsQH1  - This is the Hana Secondary package - currently on wcahqk18				

zcalqu03# ssh wcalqkg8 ps -ef | egrep -i "ms.sap|ers" | grep -v grep
zcalqu03# ssh wcahqk1b ps -ef | egrep -i "ms.sap|ers" | grep -v grep

zcalqu03# ssh qbiascs /opt/LifeKeeper/bin/lcdstatus  -q
zcalqu03# ssh wcalqkg8 /opt/LifeKeeper/bin/lcdstatus  -q



,.. and so on ,.... 



++++++++++++++++++++++++++++++++++++++++++
Lifekeeper

/opt/LifeKeeper/bin/lcdstatus  -q

...

LOCAL     TAG                                  ID                                 STATE     PRIO  PRIMARY
wcalqaf7  SAP-PBI_ERS10                        SAPID-PBI-ERS10                    ISP          1  wcalqaf7
wcalqaf7   SAP-PBI_ASCS18                      SAPID-PBI-ASCS18                   ISP          1  wcalqaf7
wcalqaf7    ip-pbiascs.pwc.ca                  IP-141.119.197.73                  ISP          1  wcalqaf7
wcalqaf7     hanfs-/exports/sapmnt/PBI         hanfs-/exports/sapmnt/PBI          ISP          1  wcalqaf7
wcalqaf7      /exports/sapmnt/PBI              /exports/sapmnt/PBI                ISP          1  wcalqaf7
wcalqaf7       datarep-SapmntPBI               /dev/mapper/vgSAP-lvSapmntPBI      ISP          1  wcalqaf7
wcalqaf7    nfs-/exports/sapmnt/PBI            nfs-/exports/sapmnt/PBI            ISP          1  wcalqaf7
wcalqaf7     ip-pbiascs.pwc.ca                 IP-141.119.197.73                  ISP          1  wcalqaf7
wcalqaf7      hanfs-/exports/sapmnt/PBI        hanfs-/exports/sapmnt/PBI          ISP          1  wcalqaf7
wcalqaf7       /exports/sapmnt/PBI             /exports/sapmnt/PBI                ISP          1  wcalqaf7
wcalqaf7        datarep-SapmntPBI              /dev/mapper/vgSAP-lvSapmntPBI      ISP          1  wcalqaf7
wcalqaf7    /usr/sap/PBI/ASCS18                /usr/sap/PBI/ASCS18                ISP          1  wcalqaf7
wcalqaf7     datarep-ASCS18                    /dev/mapper/vgSAP-lvASCS18         ISP          1  wcalqaf7
wcalqaf7  SAP-PBJ_ERS04                        SAPID-PBJ-ERS04                    ISP          1  wcalqaf7
wcalqaf7   SAP-PBJ_SCS62                       SAPID-PBJ-SCS62                    ISP          1  wcalqaf7
wcalqaf7    /usr/sap/PBJ/SCS62                 /usr/sap/PBJ/SCS62                 ISP          1  wcalqaf7
wcalqaf7     datarep-SCS62                     /dev/mapper/vgSAP-lvSCS62          ISP          1  wcalqaf7
....
....


MACHINE   NETWORK ADDRESSES/DEVICE               STATE     PRIO
wcahqa48  TCP     141.119.197.92/141.119.197.93  ALIVE        1
wcahqa48  TCP     192.168.9.1/192.168.9.2        ALIVE        2
wcahqa48  TCP     192.168.19.1/192.168.19.2      ALIVE        3
wcamos05  TCP     141.119.197.92/141.119.204.29  ALIVE        1



TAG - tag name for each resource.  Root resources are shown in an accented color.  Tag  names
of resources within the hierarchy are indented appropriately to indicate dependency relation-
ships between resources.



https://docs.us.sios.com/spslinux/9.5.0/en/topic/lkcli-how-to-check-the-status

https://docs.us.sios.com/spslinux/9.4.0/en/topic/resource-states

ID  - each resource's identifier string.

 
STATE - current state of each resource.  Possible values are:

    ISP - In-service locally and protected.											<- DESIRED state!
    ISU - In-service locally, but local recovery will not be attempted.
    OSF - Out-of-service, failed.													<- FAILED !
    OSU - Out-of-service, unimpaired.

The "PRIO" column - contains the failover priority value of the local server, for each resource.

The "PRIMARY" column - contains the name of the  server  with  the  highest  priority, for each resource.



Check nbd module :

 lsmod |grep -i nbd

 Jon has this script :  /usr/local/bin/nbd.sh       <- nice, give it two minutes to take its effect !

 To check  mirrors use:   cat /proc/mdstat
 
+++++++++++++++++++++++++++++++++++++++++++

~$  cd /
~$  for i in `ls`; do echo "Checking /$i :" >> /tmp/toto; cd $i; du -hk * |sort -rn >> /tmp/toto; cd ..; done

++++++++++++++++++++++++++++

sar -A -p|  grep -E '12:00|Average|^10|^09' 

sar -q -s 05:00:00


 1t0sn0c


++++++++++++++++++++++++++++

netstat -tulpn
netstat -tulpan
++++++++++++++++++++++++++++

Can be used to test latency from different locations (source) towards same destination:


[root@localhost ~]# curl -sL -w "%{http_code} %{url_effective} %{time_total}\\n" http://ogueuro16.com/ -o /dev/null
	
	200 http://ogueuro16.com/ 63.663   <— this is time in seconds it took to load page!!



curl -iLs https://www.google.com | grep HTTP
curl -iLs http://www.google.com | grep HTTP


curl -iLs https://www.bdg82.com | grep HTTP
curl -iLs http://www.bdg82.com | grep HTTP


++++++++++++++++++++++++++++
Cool!

www.whoismyisp.org/ip/70.82.138.17

++++++++++++++++++++++++++++

Good info on systemctl:  https://net2.com/how-to-list-start-and-stop-services-at-boot-time-in-linux-ubuntu-debian/

EL7 
wcalqais# systemctl status httpd.service
	● httpd.service - The Apache HTTP Server
	Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)	<-- indicates path of start script
	Active: inactive (dead)
		Docs: man:httpd(8)
			man:apachectl(8)
	
	Oct 25 03:38:02 wcalqais systemd[1]: Unit httpd.service cannot be reloaded because it is inactive.


wcalqais# systemctl status CA-SystemEDGE.service
   ● CA-SystemEDGE.service - LSB: CA Systems Management SystemEDGE SNMP agent
      Loaded: loaded (/etc/rc.d/init.d/CA-SystemEDGE; bad; vendor preset: disabled)				<-- indicates path of start script
      Active: active (running) since Wed 2020-10-21 23:13:48 EDT; 6 days ago
        Docs: man:systemd-sysv-generator(8)
      CGroup: /system.slice/CA-SystemEDGE.service
              └─1756 cam
   
   Oct 21 23:13:47 wcalqais systemd[1]: Starting LSB: CA Systems Management Sy.....
   Oct 21 23:13:48 wcalqais CA-SystemEDGE[1485]: Starting cam in /opt/CA/Shared...m
   Oct 21 23:13:48 wcalqais CA-SystemEDGE[1485]: Executed CA-cam start............K
   Oct 21 23:13:48 wcalqais casrvc[1554]: Executed CA-cam start..................OK
   Oct 21 23:13:48 wcalqais CA-SystemEDGE[1485]: Starting CA-SystemEDGE service.
   Oct 21 23:13:48 wcalqais CA-SystemEDGE[1485]: CA SystemEDGE Version 5.9.0 - ...e
   Oct 21 23:13:48 wcalqais systemd[1]: Started LSB: CA Systems Management Sys...t.
   Hint: Some lines were ellipsized, use -l to show in full.




zcalqu03 # pssh -H wcahqk3q  --inline " systemctl status avagent.service"
  [1] 09:07:25 [SUCCESS] wcahqk3q
  ● avagent.service - Avamar Unix backup/restore agent (avagent)
     Loaded: loaded (/usr/lib/systemd/system/avagent.service; enabled; vendor preset: disabled)
     Active: active (exited) since Tue 2021-11-16 08:23:10 EST; 44min ago
    Process: 1578 ExecStart=/etc/init.d/avagent start (code=exited, status=0/SUCCESS)
   Main PID: 1578 (code=exited, status=0/SUCCESS)
      Tasks: 6 (limit: 49479)
     Memory: 51.4M
     CGroup: /system.slice/avagent.service
             └─1750 /usr/local/avamar/bin/avagent.bin --bindir="/usr/local/avamar/bin" --vardir="/usr/local/avamar/var" --sysdir="/usr/local/avamar/etc" --logfile="/usr/local/avamar/var/avagent.log"
  
  Nov 16 08:23:10 wcahqk3q systemd[1]: Started Avamar Unix backup/restore agent (avagent).
  Nov 16 08:23:10 wcahqk3q avagent[1578]: avagent Info <5008>: Logging to /usr/local/avamar/var/avagent.log
  Nov 16 08:23:10 wcahqk3q avagent[1578]: avagent Info <5417>: daemonized as process id 1750
  Nov 16 08:23:10 wcahqk3q avagent[1578]: [44B blob data]





++++++++++++++++++++++++++++
EL7 
 systemctl status avamar.service
 systemctl list-units --type service --all
 systemctl list-units --type service --all | grep -i ava
 
 
 
 Note:  We use avamar on AWS Prod and QA 
 
++++++++++++++++++++++++++++

Restart autofs on RHEL 7:

https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/nfs-autofs

# systemctl stop autofs
# systemctl start autofs
# systemctl restart autofs
# systemctl status autofs

# systemctl status autofs.service
# systemctl restart autofs.service


/etc/nsswitch.conf 
automount:    files nis

The /etc/auto.master file contains:
+auto.master

The NIS /etc/auto.master map file contains:
/home auto.home

The NIS auto.home map contains:
beth    fileserver.example.com:/export/home/beth
joe     fileserver.example.com:/export/home/joe
*       fileserver.example.com:/export/home/&
++++++++++++++++++++++++++++ 

# ypcat passwd | grep pw37298 		<-- displays passwd's crypt (On wcalqajf, passwd sync's at half past the hour) 
# ypwhich 							<-- lists the host name of the (NIS) server that supplies NIS services to a NIS client 



++++++++++++++++++++++++++++ 

How to Setup and Configure YPServ Linux NIS Server and Client

+++++++++++++++++++++++++++ 

	1) On wcalqs0o there is the script  /usr/bin/modifyhome.sh  used by Security Team ( Alain Cote ),.. for home dir creation.
	2) It logs here  /pwc/security/HomeDirectory/HD.log  

	also check file ->  /pwc/security/HomeDirectory/PWR/deleteHomeList.out

also ...

Aventail profile - To see if usre is a contractor (hence uses Aventail for remote access - Belcan, Aerotek, etc,..  profiles) 
		           look for the user's ID here:  /pwc/prod/maillist/lists/PLM_UserList.txt 

grep ID_xyz /pwc/prod/maillist/lists/PLM_UserList.txt

ie:
 zcalqu03 lists]$ grep p927773 /pwc/prod/maillist/lists/PLM_UserList.txt
  p927773;00927773;Francis;Baeni;Francis Baeni;Francis.Baeni@pwc.ca;001595;QL;3D TO 3D;Quality;;01;CQ01;
  Pl 1 - Longueuil (Qc);Contractor;Active;Aerotek;CA


(tip from Peter Cipriano)
keywords:  security script home dir creation

++++++++++++++++++++++++++++

Sometimes RHEL 5 PLM servers (ie: wcahqk0v ) need rsyslogd restarted !

Files  /tmp/cfg2html_temp/messages & /var/log/message   will have thousands such entries :
 May 10 04:02:04 wcahqk0v audispd: queue is full - dropping event
 May 10 04:02:04 wcahqk0v audispd: queue is full - dropping event
 May 10 04:02:04 wcahqk0v audispd: queue is full - dropping event
 May 10 04:02:04 wcahqk0v audispd: queue is full - dropping event
 May 10 04:02:04 wcahqk0v audispd: queue is full - dropping event

Andre suggested:
 1) service auditd stop
 2) find the Tanium client and kill it
 3) service auditd start 

Jon said you can use "auditctl -e 0"  to reduce audit event login down no nothing,... except Tanium may change it back..



++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Ransomeware -> report imediately to:

 ITSOC@rtx.com  860-493-5160

++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 wcalqa1x# cat /etc/opt/ldapux/pam_authz.policy | grep -v "#"
 allow:unix_local_user
 allow:other
	
keywords: accesss pam pam_authz policy ldap
++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++
BigIP Latveria Internal:
https://bigip-int-1.corp.lat.internal/tmui/login.jsp		10.161.232.61
https://bigip-int-2.corp.lat.internal/tmui/login.jsp		10.161.232.62

BigIP Latveria External:
https://bigip-ext-1.corp.lat.internal/tmui/login.jsp		10.161.232.63
https://bigip-ext-2.corp.lat.internal/tmui/login.jsp		10.161.232.64

++++++++++++++++++++++++++++
GREAT !!!!
yum stuff:

 /var/log/yum.log 
 yum :q
12Ish:q!ory

++++++++++++++++++++++++++++

Find MP IP address from HP-UX:   #/opt/sfm/bin/CIMUtil -e root/cimv2 HP_ManagementProcessor

HP Lanconsole , MP or iLo


++++++++++++++++++++++++++++

Unity migration

HPVM section:


hpvmmodify:
  -B start-attr
            Specifies the startup
            The start_attr argume
            insensitive) values:
  
   +  auto: Automatically start the virtual machine when
      Integrity VM is initialized on the host.
  
   +  manual: Manually start the virtual machine.  This is the default.


 
For hpvm guest to auto start next time the VM host is rebooted use:
# hpvmmodify -P VMWcalqail -B auto

For hpvm guest to need manaul start next time the VM host is rebooted use:
# hpvmmodify -P VMWcalqail -B manual


# hpvmstatus -R
# hpvmstatus -R -P VMWcalqail
# hpvmstatus -V -P VMWcalqail| grep Start
 


hpvmdevinfo -P wcalqk5q		<-- displays in columns
hpvmdevinfo -M -P wcalqk5q	<-- displays one liners


Check if PVID on Host and Guest to compare:
  Host  wcahqq0i# xd -An -j8200 -N16 -tx /dev/rdisk/disk1320  -> 4faf3f1e        563b9695        4faf3f1e        4db8442a
  Guest wcalqk5q# xd -An -j8200 -N16 -tx /dev/rdisk/disk15    -> 4faf3f1e        563b9695        4faf3f1e        4db8442a


hpvmmodify -P VMWcalqXYZ -d disk:avio_stor:0,1,0:disk:/dev/rdisk/diskY
hpvmmodify -P VMWcalqXYZ -a disk:avio_stor:0,1,1:disk:/dev/rdisk/diskZ

wcalqqXX# hpvmmodify -P VMWcalqXYZ -B [auto|manual]

wcalqqXX# hpvmstart -P VMWcalqXYZ
wcalqqXX# hpvmconsole -P VMWcalqXYZ -fi


scsimgr get_attr -D /dev/rdisk/disk638 -a wwid 	<-- To find correlation between New *Unity Lun and its WWID

  scsimgr get_attr -D /dev/rdisk/disk638 -a wwid 	<-- 0x6006016029414c00d9503b5e34917e6a   for wcalqadl
  scsimgr get_attr -D /dev/rdisk/disk653 -a wwid 	<-- 0x6006016029414c009a503b5e2e04f456   for wcalqadl
  scsimgr get_attr -D /dev/rdisk/disk656 -a wwid 	<-- 0x6006016029414c0034dd355e4f528072   for wcalqadv
  scsimgr get_attr -D /dev/rdisk/disk651 -a wwid 	<-- 0x6006016029414c0018513b5ed635f9a5   for wcalqadm


***try this :  scsimgr -p get_attr all_lun -a device_file -a wwid | grep rdisk
.           
.				/dev/rdisk/disk3:0x60060e8016026e000001026e00004122
.				/dev/rdisk/disk5:0x60060e8016026e000001026e0000427b
.				/dev/rdisk/disk2:0x60060e8016026e000001026e00005209
.				/dev/rdisk/disk7:0x60060e8016026e000001026e00005675


https://casesup.com/category/knowledgebase/howtos/how-to-add-disk-to-a-vpar-and-extend-a-filesystem-online-on-hp-ux
When you finish add disk operation and run  "hpvmdevinfo" command, it"  shows  "Virtual Machine Device  Name"  state unknown. 
It's normal situation. You should wait until VSP agent gets all the information  from the client. 
But if you already know disk id on vpar node you can continue to the next step.



To Remove an Integrity VM virtual machine :    /opt/hpvm/bin/hpvmremove -P vm_name




Other:
wcalqq1x# hpvmstatus -P VMWcalqail -d			<-- To see Storage & NICs

wcalqq1x# hpvmstart -P VMWcalqail

wcalqq1x# hpvmconsole -P VMWcalqail -fi			<-- To access the console


If missing an fstab , map file , etc ,...
If missing map for a VG on HP, backups are located here: 
	zcahqu01# /srv/srvdoc/hp800/yesterday/{host_name}/data/vgmaps.tar


	wcalqke2# mkdir /dev/vgDOCUMQ 
	wcalqke2# mknod /dev/vgDOCUMQ/group c 64 0x010000 
	wcalqke2# vgimport -m /dev/JA/vgDOCUMQ.map vgDOCUMQ /dev/disk/disk4 
	wcalqke2# vgchange -a y /dev/vgDOCUMQ


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
https://docstore.mik.ua/manuals/hp-ux/en/T2767-90141/ch08s02.html



 HPVM paths of inteterest !!

wcahqq0i# ll /var/opt/hpvm/common/

wcahqq0i# ll /var/opt/hpvm/guests/
  lrwxr-x---   1 root       hpvmsys         56 Apr 23  2018 VMWcahqa3j -> /var/opt/hpvm/uuids/98d89edc-4714-11e8-9718-d8d385f86db5
  lrwxr-x---   1 root       hpvmsys         56 Sep  9  2016 VMWcahqd0r -> /var/opt/hpvm/uuids/5cd9b656-76b8-11e6-b40c-d8d385f86db5
  lrwxr-x---   1 root       hpvmsys         56 Jun 11  2015 VMWcalqk5q -> /var/opt/hpvm/uuids/4faf3f1e-647b-11e0-8406-0025b3a01018
  lrwxr-xr-x   1 root       hpvmsys         56 Mar  8  2015 VMWcalqp0b -> /var/opt/hpvm/uuids/3cf9ad44-c559-11e4-b100-d8d385f86fc9

wcahqq0i# ll -t /var/opt/hpvm/uuids/4faf3f1e-647b-11e0-8406-0025b3a01018         <-- checking VMWcalqk5q 's folder
  drwxrws---   2 root       hpvmsys       8192 May 16 09:33 console
  -rw-r-----   1 root       hpvmsys      65603 May 16 09:26 nvram
  -r-x--x---   1 root       hpvmsys        704 May 16 09:24 snapshots
  -rw-rw-r--   1 root       hpvmsys      65744 May 12 11:40 FPL
  -rw-r-----   1 root       hpvmsys       1498 Mar 22  2020 vmm_config.current
  -rw-r--r--   1 root       hpvmsys       2072 Mar 22  2020 guest_devinfo
  -rw-rw-r--   1 root       hpvmsys         50 Mar 22  2020 guest_status
  crwx------   1 root       hpvmsys    169 0x000004 Mar 22  2020 vm_dev
  -rw-r--r--   1 root       hpvmsys       7700 Mar 22  2020 log
  -rw-r-----   1 root       hpvmsys       1056 Mar 22  2020 datalog
  -rw-rw-r--   1 root       hpvmsys      16592 Mar 21  2020 SEL
  -rw-r-----   1 root       hpvmsys       1582 Jun 11  2015 vmm_config.prev
  -rw-r-----   1 root       hpvmsys          3 Jun 11  2015 .vmid
 


wcahqq0i# 
wcahqq0i# 



-------------------------------------------------

hpvmmigrate -  https://www.lightnetics.com/topic/1030/hpvmmigrate-migrate-a-virtual-machine-to-a-different-vm-host

  HPVM logs  /var/opt/hpvm/
	
  To access Guest's console for 1st time:
  wcahqq1d# hpvmstart -P VMWcalqk5q 
  wcahqq1d# hpvmconsole -P VMWcalqk5q -fi

  WCAHQQ1D# /opt/hpvm/bin/secsetup -r wcalqq3f      		<-- must work before you can migrate!!

  WCAHQQ1D# hpvmmigrate -P VMWcalqk5q -o -h wcalqq3f		<-- Online migration syntax


 
To see which of the 2 ports in APA Failover Group is active:   nwmgr -A all -c lan901
 
 # hpvmnet -A -p 3 -S vsPriVLAN5    <-- to see packets in/out

	-A        Displays statistics for the avio_lan virtual network
          interfaces in the following format:

          Vswitch Name           :  hostnet
          Max Number of Ports    :  512
          Port Number            :  3							<-- hpvmstatus -P VMWcalqke2 -d |grep network    # To see port
            Port State           :  Reserved					 	ie:  network:avio_lan:0,0,0x8A09FE1041E5:vswitch:vsPriVLAN9:portid:3
            Active VM            :								<-- empty if no VM using this VSwitch and Port.	
            Untagged VlanId      :  none
.           Reserved VMs         :  aviotest


 # hpvmnet -Z -A -p 3 -S vsPriVLAN5 

	-Z 	will reset the statistics to zero after printing them.
 

  
-------------------------------------------------
HP-UX: Auto Port Aggregation ( APA ) basics :  https://sites.google.com/site/syscookbook/hp-ux/hp-ux-apa-basic

Some checks:

  lanscan -q
  
  nwmgr
  
  nwmgr -S apa -I 900 -v    		<-- the 900 is from   "lanscan -q"  output 
  
  nwmgr --st -c lan901				<-- how stats for a group/interface
  nwmgr -r --st -c lan<instance> 	<-- Reset statistics for an interface   *** I didn't try this ***
  
  nwmgr -A speed, mtu -c lan901		<-- Show group's speed
  
  nwmgr -S apa
  cat /etc/lanmon/lanconfig.ascii 			<-- Check Primary & Standby interface*** 
  tail -10 cat /etc/lanmon/lanconfig.ascii 	<-- Check Primary & Standby interface*** 
  
  lancheckconf 						<-- Verify contents of LAN Monitor configuration file 

  nwmgr --get --script

 ====================================================================================================
 Tried instructions below but didn't seem to work for me !!!!!
 
 - Check connectivity between interfaces

     Given following interface list

     #:/> nwmgr

     Name/          Interface Station          Sub-   Interface      Related
     ClassInstance  State     Address        system   Type           Interface
     ============== ========= ============== ======== ============== =========
     lan2           UP        0x0017A477082C igelan   1000Base-SX
     lan0           UP        0x0017A4770818 igelan   1000Base-SX
     lan1           UP        0x0017A477081A igelan   1000Base-SX
     lan3           UP        0x0017A477082E igelan   1000Base-SX
     lan900         DOWN      0x000000000000 hp_apa   hp_apa
     lan901         DOWN      0x000000000000 hp_apa   hp_apa
     lan902         DOWN      0x000000000000 hp_apa   hp_apa
     lan903         DOWN      0x000000000000 hp_apa   hp_apa
     lan904         DOWN      0x000000000000 hp_apa   hp_apa

     to check connectivity between two specific interfaces, lan0 and lan1, for instance, run
     following command:

     # nwmgr --diag -A dest=0x0017A477081A -S igelan -I 0
     lan0: Link check succeeded.


     where 0x0017A477081A is MAC Address for lan1 interface ("-I 0" parameter references lan0 interface)

     This command is quite useful to verify connectivity between two physical ports before trying to group them.





+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

HP-UX :  APA Failover Group and VLANs , creation and assigning IPs

-----
Create APA Failover Group lan900 with NIC's lan1 & lan 10:

# nwmgr -a -A links=1,10 -A mode=LAN_MONITOR -c lan900 -f
# nwmgr -s -A all --fr cu --sa -S apa 							<- save config to /etc/rc.config.d/hp_apaportconf
# nwmgr -S apa

# lanadmin -x -i 900
# ll /etc/rc.config.d/vlan* /etc/rc.config.d/hp_apa* /etc/lanmon/lanconfig.ascii


Assign IP 192.168.10.12 to APA Failover Group lan900
using  /etc/rc.config.d/netconf :

INTERFACE_NAME[1]="lan900"
IP_ADDRESS[1]="192.168.10.12"
SUBNET_MASK[1]="255.255.255.0"
BROADCAST_ADDRESS[1]="192.168.10.255"
INTERFACE_STATE[1]="up"
DHCP_ENABLE[1]="0"
INTERFACE_MODULES[1]=""



-----
Create APA Failover Group lan901 with lan5 & lan7 , then save config to hp_apaportconf:
Have 6 vlans "Trunked" with vlan2,5,9,29,192,239.
   
# nwmgr -a -A links=5,7 -A mode=LAN_MONITOR -c lan901 -f
# nwmgr -s -A all --fr cu --sa -S apa 
# nwmgr -S apa
# lanadmin -x -i 901

Create the 6 vlans (vlan2,5,9,29,192,239) and put over the APA Failover Group lan901 (lan5 & lan7), 
then save config to /etc/rc.config.d/vlanconf:
   
 nwmgr -a -S vlan -c lan5002 -A vlanid=2,name=priSubnet2,ppa=901
 nwmgr -a -S vlan -c lan5005 -A vlanid=5,name=priSubnet5,ppa=901
 nwmgr -a -S vlan -c lan5009 -A vlanid=9,name=priSubnet9,ppa=901
 nwmgr -a -S vlan -c lan5029 -A vlanid=29,name=priSubnet29,ppa=901
 nwmgr -a -S vlan -c lan5192 -A vlanid=192,name=priSubnet192,ppa=901
 nwmgr -a -S vlan -c lan5239 -A vlanid=239,name=priSubnet239,ppa=901
 
 nwmgr -S vlan
 
 nwmgr -s -c lan5002 -A all --sa --fr cu
 nwmgr -s -c lan5005 -A all --sa --fr cu
 nwmgr -s -c lan5009 -A all --sa --fr cu 
 nwmgr -s -c lan5029 -A all --sa --fr cu
 nwmgr -s -c lan5192 -A all --sa --fr cu
 nwmgr -s -c lan5239 -A all --sa --fr cu 

# ll /etc/rc.config.d/vlan* /etc/rc.config.d/hp_apa* /etc/lanmon/lanconfig.ascii

Assign vlan9 IP 141.119.9.101 over the Trunk Link
Assign vlan9 IP 141.119.29.66 over the Trunk Link
using  /etc/rc.config.d/netconf :


INTERFACE_NAME[0]="lan5009"
IP_ADDRESS[0]="141.119.9.101"
SUBNET_MASK[0]="255.255.255.0"
BROADCAST_ADDRESS[0]=""
INTERFACE_STATE[0]=""
DHCP_ENABLE[0]="0"
INTERFACE_MODULES[0]=""
INTERFACE_SKIP[0]=""

INTERFACE_NAME[2]="lan5029"
IP_ADDRESS[2]="141.119.29.66"
SUBNET_MASK[2]="255.255.255.0"
BROADCAST_ADDRESS[2]="141.119.29.255"
INTERFACE_STATE[2]="up"
DHCP_ENABLE[2]="0"
INTERFACE_MODULES[2]=""



+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

https://wiki.corp-apps.com/display/SO/ITOS+Tools

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

How To Set Up and Use Yum Repositories on a CentOS 6 VPS
https://www.digitalocean.com/community/tutorials/how-to-set-up-and-use-yum-repositories-on-a-centos-6-vps

++++++++++++++++++++++++++++++++


jr

qzclm-jlalicon:testfolder jlalicon$ ssh -t jlalicon@opennms-1.tpe.corp-apps.com sudo -u esportz "sudo traceroute -p 443 -T swapi.agingames.com"


jp

snmp is responding from 103.53.7.96
root@opennms-1.tpe.corp-apps.com ~# snmpwalk -v 3 -u getdata -l authNoPriv -a MD5 -A 24IndMep 103.53.7.96 sysUptime


esportz@opennms-1.ltwsc.corp-apps.com ~$ snmpwalk -v2c -c yvr-ro-calvex jira-gateway-1.lv426.internal



++++++++++++++++++++++++++++++++++++++++++++++++++++++++
CentOS LVM ( +o +devices )  ( Linux list devices )

 sudo vgs -o +devices
 sudo lvs -o +devices
 sudo lvs -o +devices /dev/mapper/*

 lsblk  <-- To list block devices
 blkid  <-- To list block device attributes
 fdisk -ul /dev/sda  <-- To list partition table for a device

 sudo fdisk -l

CentOS lshw command:

 sudo lshw -class disk -short

 sudo lshw -class memory
 sudo lshw -class memory -short

 sudo lshw -class network
 sudo lshw -class network -short



wcahqk19# lsblk -o NAME,SIZE,FSTYPE,TYPE,MOUNTPOINT
NAME                    SIZE FSTYPE      TYPE  MOUNTPOINT
sda                      48G             disk
|-sda1                  500M ext4        part  /boot
`-sda2                 47.5G LVM2_member part
  |-vgLocal-lvRoot        3G ext4        lvm   /
  |-vgLocal-lvSwap      4.8G swap        lvm   [SWAP]
  ....
  ....



++++++++++++++++++++++++++++++++++++++++++++++++++++++++


++++++++++++++++++++++++++++++++++++++++++++++++++++++++
*** Windows:

Search files  > or = to the date 6/14/2016 and also > or = then 20971520 bytes in size, created  within last three days (today is 6/17/2016) and list path / size / last modified date

C> forfiles /S /D +6/14/2016 /M * /C "cmd /c if @fsize GEQ 20971520 echo @path @fsize @fdate"

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

++++++++++++++++++++++++++++

Yvon Girouard found server was experiencing MEM issues,... so he made small script to track:

root cron entry:
	# temp to troubleshoot mem issue
	0,15,30,45 * * * * /root/ps.sh


cat ps.sh :
	#!/usr/bin/ksh
	
	now=$(date +%Y%m%d-%H:%M)
	
	echo "==================================================================" >> /root/ps.out
	echo " $now" >> /root/ps.out
	echo " ps -eo pid,rss,vsz,maj_flt,min_flt,args |sort -r -n -k 2 | head -20 " >> /root/ps.out
	echo "==================================================================" >> /root/ps.out
	/bin/ps -eo pid,rss,vsz,maj_flt,min_flt,args | head -1 >> /root/ps.out
	/bin/ps -eo pid,rss,vsz,maj_flt,min_flt,args |sort -r -n -k 2 | head -20 >> /root/ps.out
	echo "==================================================================" >> /root/ps.out
	echo "free mem" >> /root/ps.out
	free mem >> /root/ps.out
	
	cp /root/ps.out /root/ps.out.tmp
	tail -20000 /root/ps.out.tmp > /root/ps.out



==========================================================

Danny's inventory script WEB interfaces :
 
 https://unix-inventory-web-mcsunix.ose-sandbox.pwc.ca/?platform=All
 https://unix-inventory-web-mcsunix.ose-devtest-int.pwc.ca



++++++++++++++++++++++++++++
Check swap usage on Centos 7:
http://stackoverflow.com/questions/479953/how-to-find-out-which-processes-are-swapping-in-linux


also :
 for file in /proc/*/status ; do awk '/Tgid|VmSwap|Name/{printf $2 " " $3}END{ print ""}' $file; done | grep kB | sort -k 3 -n



#!/bin/bash 

SUM=0
OVERALL=0
for DIR in `find /proc/ -maxdepth 1 -type d -regex "^/proc/[0-9]+"`
do
    PID=`echo $DIR | cut -d / -f 3`
    PROGNAME=`ps -p $PID -o comm --no-headers`
    for SWAP in `grep VmSwap $DIR/status 2>/dev/null | awk '{ print $2 }'`
    do
        let SUM=$SUM+$SWAP
    done
    if (( $SUM > 0 )); then
        echo "PID=$PID swapped $SUM KB ($PROGNAME)"
    fi
    let OVERALL=$OVERALL+$SUM
    SUM=0
done
echo "Overall swap used: $OVERALL KB"


++++++++++++++++++++++++++++

Nice clean script to monitor disk threshold above 90% :

wcalqah9# crontab -l 
	...
	#Alert for disk usage
	*/10 * * * * /alertscripts/diskUsage.sh


# vi diskUsage.sh

	ADMIN="erivera32@dxc.com alex.schick@dxc.com janine.m.rice@dxc.com"
	
	# set alert-level 90 % standard
	
	ALERT=90
	
	df -h | grep -vE '^Filesystem|tmpfs|cdrom' | awk '{ print $5 " " $6 }' | while read output;
	
	do
	
	usep=$(echo $output | awk '{ print $1}' | cut -d'%' -f1  )
	
	partition=$(echo $output | awk '{ print $2 }' )
	
	if [ $usep -ge $ALERT ] && [[ $partition != *"home/stingray"* ]]; then
	
		echo "Space low on \"$partition ($usep%)\", on server $(hostname) at $(date)" |
	
		mail -s "Alert: Free space low, $usep % used on $partition" $ADMIN
	
	fi
	
	done

+++++++++++++++++++++++++++++


Jenkins RHEL 7 

start|stop|statushttps://support.cloudbees.com/hc/en-us/articles/216118748-How-to-Start-Stop-or-Restart-your-Instance-

++++++++++++++++++++++++++++

#!/bin/bash
# This little program is a cpu hog
X=0;while [ 1 ];do echo $X;X=$((X+1));done

++++++++++++++++++++++++++++

Hot add, remove, rescan of SCSI devices on Linux
http://fibrevillage.com/storage/279-hot-add-remove-rescan-of-scsi-devices-on-linux

ie:  
   Deletion of a SCSI Device :  echo 1 > /sys/block/<dev>/device/delete
   echo 1 > /sys/block/dev/sdi/device/delete
                           ^^^
						   
++++++++++++++++++++++++++++

Serviceguard check version:    cmversion

DOCUMENTUM stuff


cmviewcl -v -p docdbecmp
cmviewcl -v -p docdbpr

cmviewcl -v -p pwcdoc
cmviewcl -v -p pwcecm
cmviewcl -v -p docbroker

These were used when changing PV and VG configuration and importing it on the other partner node!
 wcahqd0r# ll /rootHome/admin/
 -rwx------   1 root       sys           1777 Dec 20  2017 gen_SG_vgdata
 -rw-r-----   1 root       sys            125 Dec 30 14:58 mapfile
 -rwx------   1 root       sys           2505 Dec 20  2017 refresh_SG_vg




++++++++++++++++++++++++++++


++++++++++++++++++++++++++++


++++++++++++++++++++++++++++
Tanium Checks:

wcalqae8 /opt/Tanium/TaniumClient/Tools/Comply/benchmarks/ # 


http://wiki.pwc.ca/display/DP/Tanium+Comply+False+Positives

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Danny Pinsonneault :  Checking for memory usage

wcalqaix# ps -o pid,user,%mem,command ax |sort -rbk3

  PID USER     %MEM COMMAND
18146 pr1adm   28.2 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
 5291 pr1adm   28.1 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
16172 pr1adm   26.7 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
 7047 pr1adm   25.7 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
 7106 pr1adm   25.5 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
 7031 pr1adm   25.4 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
11671 pr1adm   25.1 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
30917 pr1adm   24.7 dw.sapPR1_D02 pf=/usr/sap/PR1/SYS/profile/PR1_D02_pr1app8
...


wcalqaix# pmap 18146 |tail -1 | awk '/[0-9]K/{print $2}'
59626508K

 = 56.86Gb


+++++++++++++++++++++++++++++
Checking for memory usage on HP-UX (from high - low):

UNIX95=1 ps -e -o vsz,pid,ppid,user,args | sort -rn  | head -15

echo "    VSZ   PID  PPID USER     COMMAND" ; UNIX95=1 ps -e -o vsz,pid,ppid,user,args | sort -rn
 
header in last line :    VSZ   PID  PPID USER     COMMAND


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Run script  with   " | sort -n "
Working Linux script - for Swap usage Linux 6.x :


#!/bin/bash

    # find-out-what-is-using-your-swap.sh
    # -- Get current swap usage for all running processes

SCRIPT_NAME=`basename $0`;
SORT="kb";                 # {pid|kB|name} as first parameter, [default: kb]
[ "$1" != "" ] && { SORT="$1"; }

[ ! -x `which mktemp` ] && { echo "ERROR: mktemp is not available!"; exit; }
MKTEMP=`which mktemp`;
TMP=`${MKTEMP} -d`;
[ ! -d "${TMP}" ] && { echo "ERROR: unable to create temp dir!"; exit; }

>${TMP}/${SCRIPT_NAME}.pid;
>${TMP}/${SCRIPT_NAME}.kb;
>${TMP}/${SCRIPT_NAME}.name;

SUM=0;
OVERALL=0;
    echo "${OVERALL}" > ${TMP}/${SCRIPT_NAME}.overal;

for DIR in `find /proc/ -maxdepth 1 -type d -regex "^/proc/[0-9]+"`;
do
    PID=`echo $DIR | cut -d / -f 3`
    PROGNAME=`ps -p $PID -o comm --no-headers`

    for SWAP in `grep Swap $DIR/smaps 2>/dev/null| awk '{ print $2 }'`
    do
        let SUM=$SUM+$SWAP
    done

    if (( $SUM > 0 ));
    then
        echo -n ".";
        echo -e "${PID}\t${SUM}\t${PROGNAME}" >> ${TMP}/${SCRIPT_NAME}.pid;
        echo -e "${SUM}\t${PID}\t${PROGNAME}" >> ${TMP}/${SCRIPT_NAME}.kb;
        echo -e "${PROGNAME}\t${SUM}\t${PID}" >> ${TMP}/${SCRIPT_NAME}.name;
    fi
    let OVERALL=$OVERALL+$SUM
    SUM=0
done
echo "${OVERALL}" > ${TMP}/${SCRIPT_NAME}.overal;
echo;
echo "Overall swap used: ${OVERALL} kB";
echo "========================================";
case "${SORT}" in
    name )
        echo -e "name\tkB\tpid";
        echo "========================================";
        cat ${TMP}/${SCRIPT_NAME}.name|sort -r;
        ;;

    kb )
        echo -e "kB\tpid\tname";
        echo "========================================";
        cat ${TMP}/${SCRIPT_NAME}.kb|sort -r;
        ;;

    pid | * )
        echo -e "pid\tkB\tname";
        echo "========================================";
        cat ${TMP}/${SCRIPT_NAME}.pid|sort -r;
        ;;
esac
rm -fR "${TMP}/";

++++++++++++++++++++++++++++


ps -ef | grep phantomjs | grep -v grep | awk '{print $2}' | xargs kill -9


===============================================================
du and df showing different disk space usage

https://admin-ahead.com/forum/general-linux/du-and-df-showing-different-disk-space-usage/

Sometimes you will come across situation where the server disk space shows full on df but du shows plenty of space 

left. This is because you can remove a file that is still in use by some application and for this application it 
remains available because file descriptor in /proc/ filesystem is held open. So if there are such open descriptors 
to files already removed, space occupied by them is considered as used by df but they can not be taken into account
by du because there are no filenames associated with them.

The following command will list those processes:

		( # lsof +L1 /FS| grep deleted ) <-- will need to look into this !!

# lsof +L1
 or
# lsof | grep '(deleted)'

You can either kill those process or restart the service that seems to be causing this.

In case you need to kill all the process at once use the following command:

# for n in $(lsof | grep '(deleted)' | awk '{print $2}')
  for n in $(lsof | grep '(deleted)' | awk '{print $2}') ; do kill -9 $n; done



wcalqafa /sap/mfstgPBI# lsof +L1
COMMAND    PID    USER   FD   TYPE DEVICE SIZE/OFF NLINK NODE NAME
sssd      1134    root   15r   REG 253,12 11031312     0 5981 /var/lib/sss/mc/initgroups (deleted)
polkitd   1149 polkitd    3r   REG 253,12 11031312     0 5981 /var/lib/sss/mc/initgroups (deleted)
sssd_be   1150    root   20r   REG 253,12 11031312     0 5981 /var/lib/sss/mc/initgroups (deleted)
tuned     1458    root    8u   REG 253,14     4096     0  801 /tmp/#801 (deleted)
saposcol 16734    root   11u   REG 253,14     5405     0  814 /tmp/tmpfRJkx8H (deleted)
saposcol 26661  nobody    1u   REG 253,14     5405     0  814 /tmp/tmpfRJkx8H (deleted)
saposcol 26661  nobody   12u   REG 253,14       30     0  837 /tmp/tmpfY8APx5 (deleted)
saposcol 26661  nobody   13u   REG 253,14        0     0  841 /tmp/tmpfhm18Ws (deleted)







!!!!!  V E R Y   N I C E  !!!!!!

lsof +L1 lists: open files that are completely unlinked .... shows files that have been deleted but are still open 
If we can kill the PID or the application cannot be stopped, we can still truncate the file (apparently)...

https://unix.stackexchange.com/questions/68523/find-and-remove-large-files-that-are-open-but-have-been-deleted

On wcalqad2 /tmp is filling UP 100% !!

wcalqad2 # lsof | grep "(deleted)"       or      lsof +L1

COMMAND  	PID    				USER   FD   	TYPE 			DEVICE 	SIZE/OFF NLINK 	NODE   NAME
scoapp_se 19552 31374          s_tfc    8u      REG              253,6    5400548         29   /tmp/tmpfhTC9lX (deleted)
scoapp_se 19552 31374          s_tfc   10u      REG              253,6   19826740         31   /tmp/tmpfhHpm5R (deleted)
scoapp_se 19552 31374          s_tfc   11u      REG              253,6   20625361         30   /tmp/tmpf6ly2Vf (deleted)
scoapp_se 19552 31374          s_tfc   12u      REG              253,6   14780113         36   /tmp/tmpf7CCEzC (deleted)
scoapp_se 19552 31374          s_tfc   16u      REG              253,6   18518356         32   /tmp/tmpfIzWDEh (deleted)
scoapp_se 19552 31374          s_tfc   18u      REG              253,6   15153937         35   /tmp/tmpfTp4G3b (deleted)
scoapp_se 19552 31374          s_tfc   20u      REG              253,6   10311217         41   /tmp/tmpfzTVhEu (deleted)
scoapp_se 19552 31374          s_tfc   21u      REG              253,6   15085969         37   /tmp/tmpfhheiXg (deleted)
.....

To truncate these files under the "NAME" column you need to look at the value under the "FD" column of corresponfing file.


Example:

	COMMAND  	PID    				USER   FD   	TYPE 			DEVICE 	SIZE/OFF NLINK 	NODE   NAME
	...																							   ...
	scoapp_se 19552 31374          s_tfc   10u      REG              253,6   19826740         31   /tmp/tmpfhHpm5R (deleted)
	...																							   ...
	
So for file  /tmp/tmpfhHpm5R we see the value  " 10u " under the FD column.. drop the letter 'u' and use just the number '10' .

wcalqad2# ll /proc/19552/fd/10   
lrwx------ 1 s_tfc tfc 64 Oct 27 15:00 18 -> /tmp/tmpfhHpm5R (deleted)

wcalqad2#  > "/proc/19552/fd/10"				<-- this will truncate the file (remember, you drop the letter 'u')

Replace appropriate values:   	> "/proc/$pid/fd/$fd"



ref: clean disk space (deleted)
====


	Look for files that have been deleted but are still open.
	
	When a process has a file open, you can delete the file and it will be removed from the directory 
	structure but the space is not released until the file handle is closed or the process ends.
	
	Use the following commands to determine if there are such file in your mount point that 
	need to have the application restarted to free the space.
	
	# lsof +L1 /var| sort -nk 8
	or 
	# lsof +L1 /var| grep deleted
	
	
	
	The files where NLINK is 0 have been deleted but are still open. In this example, PID 5722 have deleted the file
	/usr/lib/erlang/erts-8.0.2/bin/epmd but has not closed the file handle. 
	
														  vvvvv
	COMMAND     PID      USER   FD   TYPE DEVICE SIZE/OFF NLINK   NODE NAME
	epmd       5722  rabbitmq  txt    REG  253,8    52224     0  71416 /usr/lib/erlang/erts-8.0.2/bin/epmd (deleted)
	
	To release the space you will have to restart the epmd process
	# ps -ef|grep 5722
	rabbitmq  5722     1  0 Jun05 ?        00:00:50 /usr/lib/erlang/erts-8.0.2/bin/epmd -daemon
	

===============================================================
Strip last character (hence the "1" in the line) from output

 # blah blah |sed 's/.\{1\}$//' 
 
Strip last three charcter (hence the "3" in the line) from output

 # blah blah |sed 's/.\{3\}$//'  

===============================================================

Concatinate two line into one:

awk 'NR%2{printf "%s ",$0;next;}1' your_file


===============================================================

Skip "empty space" at end of line with grep and immediately display the next line of output on same line :

blah blah blah  | tr '\n' ' '

---
   ,.... or
[javendan@whml0392 ~]$ cat server-list |tr "\n" ","
whtl54373,whtl54378,whtl16399,whol53675,[javendan@whml0392 ~]$
 
[javendan@whml0392 ~]$ sudo sshm whtl54373,whtl54378,whtl16399,whol53675 id -a hbhatoa


===============================================================
In Linux:

grep -A 5 '19:55' file      or    grep -C3 "some_context_here"

-A NUM, --lines-after-context=NUM
-B NUM, --lines-before-context=NUM
-C NUM, --lines-before-&-after-context=NUM

===============================================================
How to find which line is missing in another file

You can also do this using grep by combining these options: 
	-F (makes grep treat PATTERN as a set of newline-separated strings)
	-v (show non-matching lines)
	-x (match whole lines) 
	-f (read patterns from file) 

$ grep -F -v -x -f file1.txt file2.txt  


ie:
	cat file1.txt                 cat file2.txt
	Jefferson                     Mike
	Mark                          Nick
	Vince                         Mark
	Mike                          Vince
	Nick                          Joe


yb2153-5@lpjmp100$ grep -v -x -f file1.txt file2.txt
Joe


yb2153-5@lpjmp100$ grep -v -x -f file2.txt file1.txt
Jefferson


================================================================
Check one directory down from parent ,..

 du -h / --max-depth=1

===============================================================

Produce an output for "Filesystem" and respective space "Avail"  column from "df -h"


 df -h  |awk '//{printf "%-50s %s\n",$1, $4 }'

===============================================================
	********************************
	********************************
	**   Pratt & Whitney Canada   **
	********************************
	********************************
	
	
	
===============================================================
/sudo/bin/ssu
alias   ssu     '/sudo/bin/ssu'



AIX to reboot:    shutdown -Fr 0
	
===========================================================================================================
Jon:
 To remove a node from the cluster:
 service rgmanager stop; service gfs2 stop; service clvmd stop; service cman stop




Linux 6 Clustering:   clustat
  https://redhatlinux.guru/2016/04/14/red-hat-cluster-cheat-sheet/
  
*When a DB in cluster is in a "failed" state. To restart the clustered service
 you need to disable it with "-d" and then enable it with "-e" :


walqk5f# clustat
 Cluster Status for OracleDEV @ Tue Oct  8 11:48:37 2019
 Member Status: Quorate
 
    Member Name                                                     ID   Status
    ------ ----                                                     ---- ------
    wcalqk5e-hb.pwc.ca                                                  1 Online, rgmanager
    wcalqk6t-hb.pwc.ca                                                  2 Online, rgmanager
    wcalqk6u-hb.pwc.ca                                                  3 Online, rgmanager
    wcalqk5f-hb.pwc.ca                                                  4 Online, Local, rgmanager
    /dev/dm-13                                                          0 Online, Quorum Disk
    
    Service Name          Owner (Last)                    State
    ------- ----          ----- ------                    -----
    service:EV6C20        wcalqk5e-hb.pwc.ca              started
    service:EV6C21        (wcalqk5f-hb.pwc.ca)            stopped    [Z] 	<-- Never touch when in this state [Z] means it's Frozen by DBA Admin
    service:EV6D          wcalqk5f-hb.pwc.ca              started
    service:EV6QD         (wcalqk5f-hb.pwc.ca)            failed			<-- to restart this DB, disable it then enable it...
    ..                                                                 
    
walqk5f# clusvcadm -d EV6QD                                                   
walqk5f# clusvcadm -e EV6QD
walqk5f# clustat
    
		Service Name          Owner (Last)                    State
       ------- ----          ----- ------                    -----
       service:EV6C20        wcalqk5e-hb.pwc.ca              started
       service:EV6C21        (wcalqk5f-hb.pwc.ca)            stopped    [Z]
       service:EV6D          wcalqk5f-hb.pwc.ca              started
       service:EV6QD         (wcalqk5f-hb.pwc.ca)            started		<-- It is now in "started" state, 


walqk5f# df -h |grep EV6QD
/dev/mapper/vgDatabases-lvEV6QD			1.5T  1.2T  221G  85% /oracle/EV6QD
/dev/mapper/vgDatabases-lvEV6QDCode 	 21G   18G  2.6G  88% /opt/oracle/EV6QD


===

Linux 7 Clustering:  Pacemaker -->   pcs status
  
# pcs status |grep Online								<-- check nodes in the PCS cluster
# pcs resource | grep _DB | grep d0p | wc -l   
# pcs resource cleanup SDMSP							<-- to restart a stopped clustered service ie: DB instance EV6SBXM of SFTP on 

wcalqd4o # pcs constraint location --full | grep PGF 	<-- to check the prioritized node if restarting a service, look for line " Enabled on:   "
wcalqd4o # pcs resource cleanup SAP_PGF_DB  			<-- restarting just the service that is stopped and not the entire "Resource: SAP_PGF"


wcalqkka# pcs resource restart MESMEDT					<-- To retsart the whole ressource
wcalqkka# pcs resource restart ECATT       				<-- including their components


	INC0882695 - FTP time out
	From Danny:
	  "The server rebooted for patching
	  When I logged into the server and ran "pcs status" I saw that several services were down.

	  ran "pcs resource cleanup" and the resources started automatically."
===========================================================================================================
Check last patching on Linux:

 zcalqu03 ~$ getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER -s OSI_OS=Linux|grep Maipo 		<- RHEL7  is Maipo
 zcalqu03 ~$ getinv.py -p l -c ServerName,OSI_OS,OSI_KernelVersion,OSI_OSVER -s OSI_OS=Linux|grep Tikanga 		<- RHEL5  is Tikanga
 
 # yum history
 
 # grep Updated: /var/log/yum.log | tail -5
 
 # ll /var/log/yum.log
 
 # rpm -qa --last | less
 
 # rpm -q kernel --last
 
 
 keywrds:  last kernel rpm patch

===========================================================================================================



Check time when an NFS mount was last mounted (age is in seconds):
# cat /proc/self/mountstats   				
# cat /proc/self/mountstats |grep wcalqf16 -A20


Check time when an EXT filesystem mount was last mounted:
# df -h /tmp
Filesystem                    Size  Used Avail Use% Mounted on
/dev/mapper/vgLocal-lvTmp1    9.4G  1.7G  7.3G  19% /tmp

# tune2fs -l /dev/vgLocal/lvTmp1

--------------------------------------------------------------

From Andre:

Once you are ready to “archive” a container tarball image. You can store them via NFS at this location:

wcalqf1b:/ifs/ISIA01/nfs/HP_9000_System_Containers

These 3 servers have root access to that NFS export:
•	wcalqadv
•	wcalqaig
•	wcalqail


==> NFS  - So to verify where the server wcalqf1b is exporting to, and narrow it to a specific client ie: wcalqaig
export

	wcalqaig# showmount -e wcalqf1b | grep wcalqaig
	/ifs/ISIA01/nfs/HP_9000_System_Containers                 zcalqu03,zcahqu01,wcalqb0k,wcalqail,wcalqaig,wcalqadv

    wcalqail# mkdir /JA
    wcalqail# mount wcalqf1b:/ifs/ISIA01/nfs/HP_9000_System_Containers /JA
	
	
	zcahqu01# showmount -e
	zcahqu01# showmount -a | grep sladata 
	
	
HPUX:  man showmount 
	
	-a   Print all remote mounts in the format

.       	name:directory

.			where "name" is the hostname of the client
.				  "directory" is the directory or root of the file system that was mounted

	-d   List directories that have been remotely mounted by clients.

	-e   Print the list of exported file systems.




How to check (in Linux) what are the NFS mounted filesystems:
# cat /proc/mounts | grep nfs


	
======
Ports required for DDBoost : 

SRC=141.119.231.183  <-- wcalqkid 
DST=141.119.29.184   <-- ddmut1-pl5-ddbst1.pwc.ca 


Carlos, are 2049 and 2051 the only ports for DDboost? 
I suppose we are already using DDboost on servers that have JumpOff controls…




----------------------------------------------------------------
HPUX create an NFS share:

For this example :
  - NFS Server: wcalqail
  - NFS Client: wcalqd0z

wcalqail# vi /etc/dfs/dfstab
share -F nfs -o sec=sys,anon=2,rw=wcalqd0z.pwc.ca /HPSRP_Images

wcalqail# /usr/sbin/exportfs -av      or    shareall -F nfs


wcalqd0z# cd /
wcalqd0z# mkdir Image
wcalqd0z# mount -F nfs wcalqail:/HPSRP_Images /Image

===============================================================
HP-UX 
Under some situations this will work better :

wcalqail# vi /etc/dfs/dfstab
share -F nfs -o rw=wcalqa3o.pwc.ca,root=wcalqa3o.pwc.ca  /HPSRP_Images
shareall -F nfs


keywords:  dfs  dfstab  nfs
===============================================================
EMC inq command:

/srv/util/bin/inq.{HPUXIA64|hpux64|hpux1100|LinuxAMD64|aix64_51}
/srv/util/bin/inq.HPUXIA64  -nodots -showvol  or  -nodots -clariion
/srv/util/bin/inq.LinuxAMD64
/srv/util/bin/inq.hpux1100
/srv/util/bin/inq.hpux64

/srv/util/bin/inq.HPUXIA64 -nodots -clar_wwn						<-- NEW NEW !!
/srv/util/bin/inq.LinuxAMD64 -nodots -clar_wwn



ioscan -m dsf /dev/disk/disknnn

HPVM commands here:
/opt/hpvm/bin



Was in department 185 till begining of 2019.

===============================================================

Autosys Clusters:
 PROD -> WCALQAA5, WCAHQA1Q
​  DEV -> WCALQKA8, WCALQKAL

===============================================================
keywrds:  NFS  Samba  SMB

Samba Alaises for Montreal     :  smbmtl3  &  smbmtld  (141.119.9.40)
Samba Alaises for Toronto      :  smbtor3  &  smbtord  (141.119.204.86)
Samba Alaises for Mtl Sec Sub  :  ssnnfs  (141.119.2.5)

My PC:
 type C:\Windows\System32\Drivers\etc\hosts       
 141.119.9.40	automount							<-- PC's hosts file should have automount entry and an IP of their local Samba server.



http://wiki.pwc.ca/display/DP/Samba+Server+Troubleshooting
List of samba cluster servers; these are the NFS servers :



       MTL: wcalqf2b, wcahqf0f
   Halifax: wcahnf07 (octopus, nfshfx)  		octopus.pwc.ca is an alias for nfshfx.pwc.ca  /  nfshfx.pwc.ca has address 141.119.57.170
   Lethbridge: wcalaf05 (repsag)
   Toronto: wcamof10, wcamof0z
   
CHG0053913: converted to SMB1   
 wcalqf2b / wcahqf0f - Samba prod
 wcalqkav / wcalqkaw - Samba dev
 wcamof0z / wcamof10 - Samba Toronto
 wcahnf07            - Samba Halifax

 wcalaf07 - New Lethbridge Samba ( 141.119.59.181 nfsleth.pwc.ca aliases: banff & repsaj) 
 wcalaf05 - Old Samba Lethbridge 

 WCALQF2S (141.119.2.5)   - Secure Subnet (alias ssnnfs )

 WCALQF0R (141.119.239.1) – Samba DElab (DECOMMED!) 
 WCALQF2T (141.119.239.12)- New DElab Samba server  

Jon: WCALQK1C was quite old. It was replaced initially by WCALQF0W and then, 
     more recently, WCALQF2T. At least for NFS and Samba purposes.

Subnets:
-------
 DELab -> 141.119.239
	SS -> 141.119.2    Secure Subnet 


How to tell what version of Samba I have :

  # what /opt/samba/bin/smbd

     
   

Check cluster:   
# clustat

Check for NFS hang at a mount point:    
# strace df  	<-- will hang at the mount in question    

    you can also check /proc/mounts  for the mount point details...

Try to umount the problem nfs mount (slim chance of success):
# umount nfshfx:/catdat/hfxs   or
# umount -f nfshfx:/catdat/hfxs 

If Automount still does not work, you will have to failover to 
other node and verify if 'df' respond normally on that node.
# clusvcadm -r Automount

# clusvcadm -r <service_name> or 
# clusvcadm -r <service_name> -m <member> 
  (-m option specifies the preferred target member on which to start the service)


keywords:  stale nfs   df hangs 


==========================================================================================================================
How do I know if a remote machine is using Windows or Linux?

	nmap -O -v {hostname|IP}
	  nmap -O -v WPLRZA2M
	  nmap -O -v 10.16.2.91

==========================================================================================================================
Secure Subnet secure subnet



How to check if a user has access to Secure Subnet - 141.119.2.x

WCALQF2S	VMPC1292	Linux-RHEL7	Active	Installed	PROD	Secure Subnet Samba


Method 1:
	zcalqu03 ~$  ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 cn=P918257 | grep i SSN    
	SSNGID: 59904
	SSNHome: /home/infot/p918257							<-- User's Secure Subnet Home folder for
	

Method 2:
	wcalqf2s# getent passwd p918257
	p918257:*:84296:59904:Joshi Natraj:/home/infot/p918257:/bin/csh	
	
	wcalqf2s# su - p918257
	Last login: Tue Oct 26 11:24:38 EDT 2021 on pts/1
	[p918257@wcalqf2s ~]$ pwd
	/home/infot/p918257


	
*So this user should have access to Secure Subnet 141.119.2.x [via EPM req p913703_164 (see also p913703_163)]

==========================================================================================================================

Spectrum Servers:

http://spectrum-console/spectrum		<-- Older server
http://spectrum-console.utcain.com		<-- Newer server



***When copying the new sysedge.cf file remember to delete  /opt/ehealth/config/port16/sysedge.mon

sysedge.cf file for each server found here  /pwc/prod/monitoring/sysedge_config_files/<server_namer>_sysedge_5.cf

ll /opt/ehealth/config/port1691/sysedge.cf /opt/ehealth/config/sysedge.cf /etc/sysedge.cf

wcahqd14 /opt/ehealth/config# ll /pwc/prod/monitoring/sysedge_config_files/wcahqd14*
 -rw-rw-r-- 1 arsrep rep 61781 Sep 29 12:31 /pwc/prod/monitoring/sysedge_config_files/wcahqd14_sysedge_5.cf  <-- copy this to /opt/ehealth/config/sysedge.cf 
 -rw-rw-r-- 1 arsrep rep 14268 Sep 29 12:21 /pwc/prod/monitoring/sysedge_config_files/wcahqd14_sysedge.cf


keywords:  sysedge , CA-SystemEDGE
===============================================================

Spectrum what is monitored ?

Sysedge log:   /opt/ehealth/config/port1691/sysedge.log 

wcamos04

event [0x01169462]

A Critical Spectrum alarm keeps popping up every so often.
Trying to figure out what was causing this…

The event always refers to:
	aggObjInstance =//.//opt/novell/eDirectory/sbin/ndsd

apparently this is something supported/handled by security ?

 

In Spectrum:

 Click on node
   ==> Information 
     ==> System Resources 
	   ==> Running and Monitored Processes
.	     ==> Monitored Processes 


===============================================================
Re-occuring Spectrum alerts for  ntpd on RHEL7 servers !!   
Usually caused by having both cfengine & lcm  in root cron !


Lucas:
The 3 steps to remove cfengine are to:
 - comment out the crontab job
 - comment out the rc.local job 
 - kill any running cfexecd, cfservd, and cfagent processes

===============================================================

Ignite Server: wcalqu05  141.119.9.76

Archives placed here temporarily: <IUX-Server>:/var/opt/ignite/recovery/archives/
Moved here everyday @ 10:10 to: <IUX-Server>:/var/opt/IUXRecovryArchives



Check bad Ignite arc_mnt :   mount | grep recovery

===============================================================
Sysedge log
  /opt/ehealth/config/port1691/sysedge.log 


===============================================================
Linux:

So /dev/mapper/rootvg-lv_tmp  is 2G and need 1G more:

# lvextend -r -L +1G  /dev/rootvg/lv_tmp
# lvs    <-- shows it's now 3G

 or

# lvextend -r -L +1G  /dev/rootvg/lv_tm
# resize2fs /dev/rootvg/lv_tm

===============================================================
PWC/CSC GitHub (use LDAP creds) :

 http://gitlab-csc.pwc.ca/users/sign_in	   is an alias for wcalqa9n.pwc.ca   141.119.193.12

 https://docs.gitlab.com/ee/gitlab-basics/start-using-git.html

 https://repository.pwc.ca/login  	141.119.193.43		<-- access controlled by JumpOff config
 
 https://github.pwc.ca/login	is an alias for wcalqac4.pwc.ca   141.119.193.160


===============================================================
DRS Code in Git repository
 http://wiki.pwc.ca/display/COL/DRS+Code+in+Git+repository



===============================================================
Unix netgroup check:

zcalqu03 ~]$ getent netgroup unix
unix	( ,bi23177,) ( ,bi28321,) ( ,p913225,) ( ,bi28585,) ( ,bi36318,) ( ,drunix1,) 
( ,drunix2,) ( ,p919972,) ( ,p923227,) ( ,p926218,) ( ,bic5555,) ( ,xcs1545,) ( ,p930000,) 
( ,p931241,) ( ,p931548,) ( ,p931546,)
   ^^^^^^^

zcalqu03 ~]$ getent passwd bi23177 bi28321 p913225 bi28585 bi36318 p919972 p923227 p926218 bic5555 xcs1545 p930000 p931241 p931548 p931546
bi23177:x:23177:1343:Browning Nancy:/u/bi23177:/bin/bash
bi28321:x:28321:1334:Gaudet Andre:/u/bi28321:/bin/bash
p913225:x:51304:1342:Stubbs Jonathon:/home/jade/p913225:/bin/bash
bi28585:x:28585:1334:Pinsonneault Daniel:/home/jade/bi28585:/bin/bash
bi36318:x:36318:1332:Forget Catherine:/home/jade/bi36318:/bin/kshksh
p919972:x:76835:1334:Georgiev George:/home/jade/p919972:/bin/bash
p923227:*:79224:1342:Zhang Ming-Ya:/home/jade/p923227:/bin/csh
p926218:*:80515:1346:Alvarez Carlos:/home/jade/p926218:/bin/csh
bic5555:*:50295:1332:Hoa D. Dao:/home/jade/bic5555:/bin/ksh
p930000:*:81995:1334:Manon Adit:/home/stingray/p930000:/bin/csh
p931241:*:82608:1343:Avendano Jefferson:/home/jade/p931241:/bin/csh
p931548:*:82843:1334:Yang ChengFu:/home/jade/p931548:/bin/csh
p931546:*:82851:1334:Bourgeois Mathieu:/home/jade/p931546:/bin/csh


getent passwd bi23177 bi28321 p913225 bi28585 bi36318 drunix1 drunix2 p919972 p923227 p926218 bic5555 xcs1545 p930000 p931241 p931548 p931546 

To view Netgroups check the /etc/security/access.conf file on the host in question  


view who is logged in (Linux):
   # for i in `who | cut -d " " -f1`; do getent passwd $i; done


Find members of a group  ie: getent group advconcept
   $ for i in `getent group advconcept |  sed 's/,/\n/g'`; do getent passwd $i; done
   ** Note the first user entry will not appear in sorted output !! good to know !! ** 
or 
   $ for i in `getent group advconcept | cut -d "," -f2-50 | tr ',' '\n'`; do getent passwd $i; done
   ** Note the first user entry will not appear in sorted output !! good to know !! **


Find members of a netgroup  ie: getent netgroup unix
   # for i in `getent netgroup unix |  sed 's/,/\n/g'| sort | grep ^[a-z]`; do getent passwd $i; done


sed examples http://write.flossmanuals.net/command-line/sed/

===============================================================

To create an automount folder where I can share my documents with my team who are members of group "bid1343" :


zcahqu01# cd /srv/srvdoc
	mkdir hp9000_containers
	chgrp bid1343 hp9000_containers
	chmod 775 hp9000_containers




swlist -a install_date | grep QPKAPPS | awk '{print $2}' | cut -d "." -f1 



	ll -d hp9000_containers
	 drwxrwxr-x   2 root       bid1343         96 Sep 27 11:27 hp9000_containers


Now from Windows goto \\automount\srv\srvdoc\hp9000_containers

===============================================================
csh crap:
 set path = (${path} /usr/sbin)

Using BACKSPACE key:
 stty erase [Ctrl + v] [Backspace] 


===============================================================

Perl script that monitors databases (written by Danny)
wcalqa1z# /opt/EMPsysedge/actions/ora_test.pl
databases list :				 /ora_instance_list.txt

===============================================================
for loop in  equivalent with csh: https://www.cyberciti.biz/faq/csh-shell-scripting-loop-example/

foreach n ( 1 2 3 4 5 )
#command1
#command2
end

$foreach i (`who | awk '{print $1}'`)
? id $i
? end

===============================================================
Restarting SysEdge Spectrum :

Linux /etc/init.d/CA-SystemEDGE restart     systemctl start CA-SystemEDGE
HPUX /sbin/init.d/CA-SystemEDGE stop|start
AIX /etc/rc.d/init.d/CA-SystemEDGE restart




/usr/sbin/lspv
/usr/sbin/lsvg rootvg
/usr/sbin/lsvg -p rootvg
/usr/sbin/lsvg -p datavg
/usr/sbin/lspv hdisk5


wcahqk0r# /usr/sbin/lspv
hdisk3          000d7ebaea8a1644                    rootvg          active
hdisk4          000d7eba769c8f84                    rootvg          active
hdisk5          000d7eba7c526e25                    datavg          active


wcahqk0r# find /tmp -xdev -type f -print | xargs ls -ld | sort -rn -k 5 |more


wcahqk0r# cat /tmp/ lvmt.log



===============================================================
From zcalqu03 as root:

vi : hosts.txt
141.119.197.209:22
141.119.5.87:22
141.119.193.12:22
141.119.5.77:22

pssh -h hosts.txt "/etc/init.d/CA-SystemEDGE restart"
pssh -h list "/etc/init.d/CA-SystemEDGE restart"

pssh -H xlqp020 "/etc/init.d/CA-SystemEDGE restart"

pssh -H wcalqad0 "/sbin/init.d/CA-SystemEDGE stop"
pssh -H wcalqad0 "/sbin/init.d/CA-SystemEDGE start"


pssh -h <(allunix) -t 900 --inline "/opt/soe/local/soe_cfengine/sbin/cfagent -qK"		<- Jon re-launching cfengine !
.									/opt/soe/local/sbin/cfagent -v -qK  				<-  -t timeout ,.. better method !!
  

===============================================================

===============================================================
Print 4th column sorting the total counts for each variable in the 4th column 
4t column could be the hostname...


cat syslog | awk '{print $4}' | sort | uniq -c | sort -nk1


or check who sessions:
 # who | awk '{print $1}' | sort | uniq -c | sort -nk1


 for i in `who | cut -d " " -f1`; do getent passwd $i; done
 # who| awk '{print $1}'| sort | uniq -c | sort -nk1
 
 # getent passwd xyz
 
 # for i in `who | awk '{print $1}' | sort | uniq -c | awk '{print $2}'`; do getent passwd $i; done

 On HPUX - for i in `who | cut -d " " -f1`; do pwget |grep $i; done
 getenthp
 
 getent
 
 pwget | grep uid
 grget | grep gid
 
 nsquery hosts|passwd|group  xyz
 
 for i in `who | cut -d " " -f1`; do pwget |grep $i; done
 for i in `who | cut -d " " -f1|sort | uniq -c | awk '{print $2}'`; do pwget |grep $i; done
 
 
 
 getent passwd p526001		-->  nothing  on Linux
nsquery passwd p526001		-->  nothing  on HPUX
nsquery group dsgn			-->  received some info on HPUX (but nothing for p526001?)
pwget |grep p526001			-->  nothing  on HPUX
grget |grep dsgn			-->  received some info on HPUX (but nothing for p526001?)
ypcat passwd | grep pw43911	--> on HPUX with NIS


wcalqab7$ /usr/sbin/lsuser p540583		--> receive some info on  AIX 
wcalqab7$ id p540583					--> receive some info on  AIX 
 
 
 
 
 
 
 keywords:  pwget nsquery getent AIX
 
===============================================================
 
automount

User unable to get to \\automount from his PC only  (ok from unix however):

From the PC, can user ping   automount  ?  If no, then it's not resolving, check hosts file on PC

C:\Windows\System32\drivers\etc\hosts
141.119.9.40	automount					<-- entry may be missing, someone with admin acess needs to put it back!

Type cmd in the search box, then press Enter to open the highlighted Command Prompt shortcut


===============================================================
Linux multipath: https://www.thegeekdiary.com/how-to-scan-newly-assigned-luns-in-multipathd-under-centos-rhel/

Verify with “multipath -ll“” that the LUNs are visible now.

# multipath -ll


===============================================================
Software depot locations

HP-UX 11.31
Depot: wcalqu05:/var/opt/sd/11.31/patch_bundles

HP-UX 11.23
Depot: wcalqu05:/var/opt/sd/11.23/patch_bundles

HP-UX 11.11
Depot: wcalqu05:/var/opt/sd/11.11/patch_bundles



===============================================================
Network maps to get:

\\wcalqf1c\data\INFT 

===============================================================

NFS Shared Infra Filesystems:

/srv/util/
/srv/util/bin/ 	Contains a number of useful scripts that are mostly used on HP-UX.
/srv/srvdoc 	Contains a lot of information which is automatically collected by collection scripts.
/srv/infra		is a little more recent and contains info on tools, more widely used by Linux.

===========================
inventory ; inv

Linux only:
 
 /usr/local/bin/inv.sh
 /usr/local/bin/inventory.sh
,,.. will source data from :  /srv/srvdoc/remedy_inventory/inventory.csv

===============================================================

Get Server info (HPUX only): .pl perl script 

 /srv/srvdoc/remedy_inventory/bin/GetUnix.pl |grep hostname

  also 

 http://intranet.pwc.ca/srvdoc/pspages.html

================================================================

Inventory of all systems:

/server/srvdoc/systems/data/health

File created daily. 


keywords: inventory health 

==========================================================================================

 runbook  details  cfg2html
 
 http://runbook.pwc.ca/DEV/LINUX/wcalqkbh.html#Inhalt-All%20Filesystems%20and%20Usage
 
 http://runbook.pwc.ca/DEV/LINUX/wcalqkbh.html#Inhalt-Disk%20Partition%20Layout




==========================================================================================
 unrestricted
 ------------

Gaudet, Andre:
So, this user can only use "unrestricted home" servers.  "Unrestricted home" is a really bad name. 
It means that these servers are to be used by users who need to be "restricted" from having access 
to all our NFS mounts.  Restricted home servers have different automount maps.

WCALQKH2 is an example of an unrestricted home server. On that server you can find that user.

Unfortunately, there is no XDM server for unrestricted home (at least Jon doesn't think that there is one).

getent passwd p930218 

WCALQKH2.pwc.ca has address 141.119.5.1
wcalqais.pwc.ca has address 141.119.107.72   ?? really ??


==========================================================================================


Check if Oracle has an autostart script (for after a reboot)

wcahqd0w # cat /etc/oratab
#RCAT114:/opt/oracle/RCAT114/product/11.2.0.4:Y
#RCAT12:/opt/oracle/RCAT12/product/12.1.0.2:Y
RCAT122:/opt/oracle/RCAT122/product/12.2.0:N				<- N means "Don't run after boot" 
RCAT19C:/opt/oracle/RCAT19C/product/12.2.0.3:N				   Y means "Do run after boot"

keywords:  ora oracl autostart auto start

==========================================================================================
Check if oracle is running on server:

ps -ef |grep pmon
ps -ef |grep lgwr

cat /etc/oratab    	<-- to see names of installed Oracle databases 


On HPUX : you need to set the database variable then run the script "pwcora" to set its environment!
 set_sid=ORAXYZ			<-- to select the instance if multiple instances are installed, else selects first one it sees.
 /pwc/oracle/pwcora		<-- script that loads the oracle environment for sid that was set in previous command.

 /opt/app/oracle/xxx	<-- oracle databases homedir


On Linux Oracles' home is   /opt/oracle/ORACLE_Instance



---
A full example with db instance CMT1: (also see step 1 at  http://wiki.pwc.ca/display/DXCDBA/How+to+Apply+April+2018+CPU+for+12.1.0.2+Database )

 ssh wcalqkch and become root :

wcalqkch# su - oracle
-bash-4.2$ set_sid=CMT1
-bash-4.2$ source .bash_profile.CMT1
-bash-4.2$ tnsping cmt1                 <-- that a "1" one 

	TNS Ping Utility for Linux: Version 12.2.0.1.0 - Production on 22-AUG-2019 14:11:38
	
	Copyright (c) 1997, 2016, Oracle.  All rights reserved.
	
	Used parameter files:
	/opt/oracle/CMT1/product/12.2.0/network/admin/sqlnet.ora
	
	
	Used TNSNAMES adapter to resolve the alias
	Attempting to contact (DESCRIPTION = (SDU=4096) (ADDRESS_LIST = (ADDRESS = (COMMUNITY = TCP.pwc) (PROTOCOL = TCP) (Host = cmt1) (Port = 1521))) (CONNECT_DATA = (SID = CMT1) (GLOBAL_NAME = CMT1.pwc.ca)))
	OK (0 msec)
-bash-4.2$
 
================================================================

ChengFu script:

I tried tnsping ecatp, it works, DB team please check.
 
p931241@zcalqu05 ~$ tnsping.py ecatp
ecatp

TNS Ping Utility for Linux: Version 9.2.0.8.0 - Production on 29-JAN-2020 15:32:08

Copyright (c) 1997, 2006, Oracle Corporation.  All rights reserved.

Message 3511 not found;  product=network; facility=TNS
Message 3512 not found;  product=network; facility=TNS
Attempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (COMMUNITY = TCP.pwc) (PROTOCOL = TCP) (Host = ecatp) (Port = 1542))) (CONNECT_DATA = (SID = ECATP) (GLOBAL_NAME = ECATP.pwc.ca)))
OK (10 msec)
0


================================================================
Internet Proxy for server access to external sites :
 
 http://wiki.pwc.ca/pages/viewpage.action?spaceKey=DP&title=Internet+Proxy+for+server+access+to+external+sites

zscaler-webproxy.pwc.ca
zscaler-webproxy.pwc.ca !.pwc.ca !.utc.com !.utcapp.com !.utcain.com

=================================
Proxy for internal browser:  zcalqu03:3128



================================================================
password passwd
Access denied

Linux Only - check if account is Locked :


as root user:   
 pam_tally2 -u p931241				<-- To check

 pam_tally2 -r -u p931241 			<-- To unlock

 pam_tally2 -u ed36335


For Local Linux Accounts to check credentials:

 chage -l hitchi05
 chage -l p931241


https://www.2daygeek.com/lock-unlock-disable-enable-user-account-linux/
https://www.linuxnix.com/unlock-user-account-linux/


==================================================

AIX Only - chek if account is Locked:

Check :
  lsuser -a unsuccessful_login_count <userid> 

Reset unsuccessful login count:
  chsec -f /etc/security/lastlog -a unsuccessful_login_count=0 -s <userid>


Check if locked:  lsuser <userid>
Unlock account:   chuser account_locked=false <userid>
To lock an AIX account:  chuser account_locked=true <userid>

================================================================
AIX server  wcahqa27

Jian-hua unable to connect via ssh to wcahqa27 with his account es35587 ?

Forget, Catherine:
    This is a known problem.  
	Sometimes it happens, he will connect to wcalqa66 then ssh wcahqa27.
    IBM could not find out why this was happening

================================================================


ssh root
ssh_root

If you cannot access a server due to ie: LDAP issue
Connect to nodes directly as root from a Jump Node by performing:

    rm /etc/profile.d/no_root*sh  
	
	and then connecting as root ....

ie:
 zcahqu01# ssh wcamoa0w rm /etc/profile.d/no_root*sh 
 zcahqu03# ssh wcalqad0 rm /etc/profile.d/no_root*sh ; ssh wcalqad0		/sbin/init.d/autofs stop|start


================================================================
Special /etc/passwd file sync'ing on this server with NIS ?

HP Server (9000/800/rp3410): wcalqd0y   <-- replaced by Container  wcalqajf 

Jon had me :
1. add line in /etc/passwd.ORG     -->   +p931241::::::       # usually  /etc/passwd.ORG  is not present!
2. and manually run  /opt/srv/bin/pwupdate


Other info:
----------
On wcalqd0y there is cron job to update user passwords from LDAP to NIS :

30 * * * * ( ypcat -d unrestricted passwd > /etc/passwd.new; cat /etc/passwd.new | cksum > /etc/passwd.new.cksum; /opt/srv/bin/pwupdate ) > /rootHome/passwd_update.log 2>&1


Example, user pw190723 changes his LDAP password and is able login elsewhere except wcalqd0y (hpux 11.11 using NIS)... how 
to make sure that the crypt in /etc/passwd on wcalqd0y is the good one ?


wcahqs0c.pwc.ca (Plant 5 LDAP) is old LDAP server and hasn't had LDAP refreshed anymore, so use alias pwcunixls01.pwc.ca instead.



	zcalqu03$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 cn=pw190723
or	zcalqu03$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 cn=pw190723 | grep -i crypt
or  zcalqu03$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 '(cn=pw190723)' | grep -i shell


	zcalqu03$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca										<- Using Alias
	zcalqu03$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://wcamos04.pwc.ca:636 cn=gs22783							<- Plant 22 LDAP

keywords:  ldapsearch ldap nis cn= ou= searchldap  wcalqs0v  wcahqs0c   (LDAP Prod in Plant 1 & Plant 5)



 grep xxx /pwc/prod/maillist/lists/PLM_UserList.txt


http://wiki.pwc.ca/display/DP/Setting+up+an+NIS+server+on+HP-UX
# domainname
# cat /var/yp/binding/unrestricted/ypservers
# cat /var/yp/binding/hpux_groups/ypservers


================================================================
AWS nodes
pssh -H vmw8053ps001 "yum clean packages ; yum clean all"
pssh -H vmw8053qw001 "yum clean packages ; yum clean all"
ssh vmw8053ps001 df -h /var
ssh vmw8053qw001 df -h /var



ssh vmw8053qw001  "yum clean packages ; yum clean all ; df -h /var"
pssh -H vmw8053qw001  "yum clean packages ; yum clean all"


================================================================
Checking with Mat. B. -  Unix

 zcalqu03 ~$ inventory | grep -i vmw8053 | awk '{ print $1 }' | cut -d ";" -f1 | sort
 zcalqu03 ~$ inventory | grep -i vmw8053 | cut -d ";" -f1 | sort
 VMW8053DA002
 VMW8053DA003
 VMW8053DW001
 
 VMW8053PA001
 VMW8053PA002
 VMW8053PA003
 VMW8053PS001
 VMW8053PS002
 VMW8053PW001
 VMW8053PW002
 
 VMW8053QA001  <-- so for these no Spectrum monitoring
 VMW8053QA002  <-- so for these no Spectrum monitoring
 VMW8053QA003  <-- so for these no Spectrum monitoring
 VMW8053QA004  <-- so for these no Spectrum monitoring
 VMW8053QA005  <-- so for these no Spectrum monitoring
 VMW8053QA008  <-- so for these no Spectrum monitoring
 VMW8053QA009  <-- so for these no Spectrum monitoring
 VMW8053QW001  <-- so for these no Spectrum monitoring

================================================================


================================================================


================================================================


================================================================


================================================================
To manually launch cfengine run:

 /opt/soe/local/sbin/cfagent -v -qK
 
 zcalqu03 /git_repos/p931241/lcm# ansible-playbook -i 'wcahnf07', lcm_maintenance.yml -t sysedge	<-- new method
 
 (zcalqu03 /git_repos/p931241/lcm# ansible-playbook -i 'wcalqkj4', lcm_base.yml -t sysedge  		<-- old method
 
================================================================

 iptables -L --line-numbers
 
================================================================
  
 To check for shares ,..
 smbstatus --shares | grep -v Service | grep -v '\-\-\-' | gawk '{ print $1}' | sort | uniq         <-- not so great !
 smbstatus --shares | grep ai979310																	<-- better!


Automount IP 141.119.9.40 for Montreal 
Automount IP 141.119.204.86 for Toronto 

Samba Alaises for Montreal :  smbmtl3  &  smbmtld  (141.119.9.40)
Samba Alaises for Toronto  :  smbtor3  &  smbtord (141.119.204.86)

JumpBox: zcahqu01 (141.119.5.174)

Samba cluster servers:  
       MTL: wcalqf2b (141.119.9.106), wcahqf0f (141.119.9.142)
   Halifax: wcahnf05 (?)
Lethbridge: wcalaf05 (141.119.59.88)
   Toronto: wcamof10 (?), wcamof0z (141.119.204.54)


Ignite Server: wcalqu05 (141.119.9.76)

CFEngine: zcalqu03 (141.116.5.163)  alias -> cfengine.pwc.ca

Openshift:  https://wcahqk1h.pwc.ca:8443




Regarding the wcalqa1z Decom. ( wcalqa1z.pwc.ca (141.119.9.15) )
 moving:
	- Oracle images
	- hpux 11.11 depots	
	
	wcalqu05 has depots already...
	/pwc/oracle/<ARCH> for NFS


  hpux 11.11 container backups hang going to datadomain but not going to the Isilon ?
=========================================================================================

Jonathon Stubbs:
 We can't run named on  servers:


Spectrum alert   "named is down. Unix 8X5"  is present on these two Openshift nodes! 
  WCALQKHH    VMPC1379    Linux-RHEL7    Active    Installed    DEV    OpenShift Non-Prod Internal Infra
  WCALQKHI    VMPC1380    Linux-RHEL7    Active    Installed    DEV    OpenShift Non-Prod Internal Apps


=========================================================================================

pssh -H  xhqt011 --inline "df -h /var"
pssh -H  xhqt011  --inline " yum clean packages ; yum clean all"
pssh -H  xhqt011 --inline "df -h /var"


pssh -H xhqt011 --inline "journalctl --vacuum-time=6h"
pssh -H xhqt011 --inline "df -h /var"


Openshift stuff :   wcahqk2l ,  wcalqkhh , wcalqkhi

On wcalqkhh /var was growing, node has lots of pods running "docker ps -a | grep -v Exited | wc -l"

	Jon:
		Hey Jeff, thanks. I ran "journalctl --vacuum-time=6h" and it cleared a bunch of space.
		It looks like CSP is trying to do something and causing a ton of log entries.
	
	wcalqkhh# journalctl --vacuum-time=6h
	wcahqk2k# journalctl --vacuum-time=6h
	wcahqk2i# journalctl --vacuum-time=6h
	wcahqa5q# journalctl --vacuum-time=6h
	
	--vacuum-time=
	.		Removes archived journal files until the disk space they use falls for all journal files that contain 
	.		no data older than the specified timespan (specified with the usual "s", "min", "h", "days", "months",
	.		"weeks", "years" suffixes). Note that running --vacuum-size= has only indirect effect on the output shown by
	.		--disk-usage as the latter includes active journal files, while the former only operates on archived
	.		journal files.  --vacuum-size= and --vacuum-time= may be combined in a single invocation to enforce
	.		both a size and time limit on the archived journal files.


=========================================================================================

Openshift does not use named (On openshift nodes, named should not be monitored by Spectrum).

Eventhough nsswitch.conf contains  the line "hosts:      files dns myhostname"
They uses "dnsmasq" (See  folder  /etc/dnsmasq.d)


[WCAHQK1I	VMPC1285	Linux-RHEL7	Active	Installed	DEV	OpenShift Sandbox Master 2]

I encountered an issue with reverse lookup of IP's on server wcahqk1i.
Resulting in repetitive "MANAGEMENT AGENT LOST" alerts in Specrum and of course "nslookup x.x.x.x"  not resolving using IP's.

Solution = Jon simply restarted dnsmasq :  systemctl restart dnsmasq.service


=========================================================================================

Bluecat ressources - USA Network Guys :

Alan Davidson    +1 302-220-9902  alan.davidson@dxc.com
Edward E Adams   +1 772-696-5793  edward.adams@dxc.com 



=========================================================================================

Spectrum Alert :   JOB FAILURE: PZ400EH_XFER_STG_TO_SFTP_C http://www5.pwc.ca/cgi-bin/HelpDesk/info.pl?job=PZ400EH_XFER_STG_TO_SFTP_C 

FTP servers:

ssh xlqp065  rm /etc/profile.d/no_root*sh ; ssh xlqp065 
ssh xhqp050  rm /etc/profile.d/no_root*sh ; ssh xhqp050 

ssh sftp-admin.pwc.ca  rm /etc/profile.d/no_root*sh ; ssh sftp-admin.pwc.ca


	SFTP pcs cluster:
	   xhqp050.pwc.ca  141.119.184.218 SFTP Service server 2
	   xlqp065.pwc.ca  141.119.184.217 SFTP Service server 1 
	
	XHQP050# pcs resource cleanup SFTP	<-- If cluster is down


XLQP065  141.119.211.143 
		 em1:
		  141.119.184.217/25

 

XHQP050  141.119.184.218  
         em1:
		  141.119.184.218/25	<-- xhqp050.pwc.ca
          141.119.184.150/25	<-- sftp.pwc.ca   has an alias dphmsftp.pwc.ca
          141.119.184.208/25	<-- ftp.pwc.ca
.         141.119.184.149/25	<-- sftp-admin.pwc.ca


zcalqu03 # ping -c3 xhqp050.pwc.ca
	PING xhqp050.pwc.ca (141.119.184.218) 56(84) bytes of data.
	64 bytes from xhqp050.pwc.ca (141.119.184.218): icmp_seq=1 ttl=61 time=1.04 ms
	64 bytes from xhqp050.pwc.ca (141.119.184.218): icmp_seq=2 ttl=61 time=0.673 ms
	64 bytes from xhqp050.pwc.ca (141.119.184.218): icmp_seq=3 ttl=61 time=1.56 ms
	
	--- xhqp050.pwc.ca ping statistics ---
	3 packets transmitted, 3 received, 0% packet loss, time 2003ms
	rtt min/avg/max/mdev = 0.673/1.094/1.565/0.366 ms

zcalqu03 # ping -c3 xlqp065.pwc.ca
	PING xlqp065.pwc.ca (141.119.184.217) 56(84) bytes of data.
	64 bytes from xlqp065.pwc.ca (141.119.184.217): icmp_seq=1 ttl=61 time=0.742 ms
	64 bytes from xlqp065.pwc.ca (141.119.184.217): icmp_seq=2 ttl=61 time=0.493 ms
	64 bytes from xlqp065.pwc.ca (141.119.184.217): icmp_seq=3 ttl=61 time=0.432 ms
	
	--- xlqp065.pwc.ca ping statistics ---
	3 packets transmitted, 3 received, 0% packet loss, time 2001ms
	rtt min/avg/max/mdev = 0.432/0.555/0.742/0.136 ms

zcalqu03 # nc -zv xlqp065.pwc.ca 22
Connection to xlqp065.pwc.ca 22 port [tcp/ssh] succeeded!

zcalqu03 # nc -zv xhqp050.pwc.ca 22
Connection to xhqp050.pwc.ca 22 port [tcp/ssh] succeeded!


==========================================
In reference to Server xhqp050:

[‎2020-‎02-‎28 8:33 AM]  LABELLE, MARC ANDRE:  
the switch has been having issues a lot frequently according to logs
I have a spare stack, I will check next week if I am able to get a change 
to replace it, there are errors on the stack ports. 
==========================================

Spectrum Alert: 
25-Jan-2020 1:03:31 EST PM	FTP service on ftp.pwc.ca timed out Support: Unix 24X7

INC1704911:
PROFTPD resource failed to start properly after xhqp050 rebooted. 
Issued "pcs resource cleanup PROFTPD" to start up services required for FTP and SFTP.


=======  =======  =======  =======  =======  =======
   
   
Some troubleshooting tips good to know:

The lvol /dev/vgData/lvSFTP is a RAID mirror in Active/Active mode

This scripts checks that mirrors are in sync :  /opt/infra/bin/lv-monitor.sh      (see /etc/cron.d directory)


xlqp065 # lvs
  LV         VG      Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  ...
  lvSFTP     vgData  rwi-aor-r- 198.97g                                    100.00
.							 ^     
 the "r" attribute in this 9th position indicates a problem -- mirror not sync'd !!

Jon had to stop the "pcs" cluster umount the VG in doing so and do two commands below:
 lvchange --refresh /dev/vgData/lvSFTP
 lvchange --syncaction repair  /dev/vgData/lvSFTP
,.. then restart the cluster.


=========================================================================================


XDM Servers:

 PL 22 XDM PROD server: WCAMOA0R 141.119.204.15  (EL6) - alias linuxxdm-tor 
 PL 22 XDM DEV  server: WCAMOA0W 141.119.204.21  (B.11.31)  - alias  xdmtor2
 
 PL 01 XDM PROD server: WCALQABP 141.119.193.127 (EL6) - aliases linxmtl, linuxxdm
 PL 01 XDM PROD server: WCALQA66 141.119.9.172 (B.11.31) - alias xdmmtl1
 PL 01 XDM PROD server: WCALQA67 141.119.5.84 (B.11.31)

 xdmmtl1.pwc.ca  = wcalqa66.pwc.ca
 xdmmtl2.pwc.ca  = wcalqa67.pwc.ca
 linuxxdm.pwc.ca =  wcalqabp.pwc.ca 
 linXmtl.pwc.ca  =  wcalqabp.pwc.ca

LDAP servers (owned by security!! - Alain Cote):  	http://wiki.pwc.ca/display/DP/LDAP  (ndsstat - ndsd)
  PL 22 LDAP PROD server: WCAMOS04  141.119.204.27  (EL6) 			<-- shutdown - DECOM ?
  PL 22 LDAP PROD server: WCAMOS05  141.119.204.29  (EL6) 
 
  PL 05 LDAP server: WCAHQS0C  141.119.8.148   (EL6)  		
  
  PL 01 LDAP PROD server: WCALQS0V  141.119.8.147   (EL6)   /etc/init.d/ndsd status    restart|sotp|start|status ; ndsstat
  PL 01 LDAP PROD server: WCALQS0Y  141.119.192.7   (EL6)
  
  PL 01 LDAP DEV LAB server: WCALQKC2  141.119.12.2  (EL6)
  PL 01 LDAP DEV LAB server: WCALQKC3  141.119.12.3  (EL6)
  
  WCALQADV - 
  WCAHQA3J -
  

------------------------------------------------------------------------------------------------------------------ 
May 26, 2021 LDAP issue on wcahqs0d

The NDSD ervice has a crazy long name for some reason, it's (instead of  /bin/systemctl restart ndsd.service) :
 systemctl restart ndsdtmpl-etc-opt-novell-eDirectory-conf-nds.conf@-etc-opt-novell-eDirectory-conf-env.service
 systemctl status ndsdtmpl-etc-opt-novell-eDirectory-conf-nds.conf@-etc-opt-novell-eDirectory-conf-env.service

 systemctl status ldapbkp.mount  <-- On wcahqs0d issue with starting nds occured becaus ethis mount failed ???

	On LDAP servers, for service to be working properly ports 389 & 636 need to be listening!!
		
		wcahqs0d# lsof -i :389
		COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
		ndsd    18212 root  259u  IPv4 708003      0t0  TCP *:ldap (LISTEN)

		wcahqs0d# lsof -i :636
		COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
		ndsd    18212 root  266u  IPv4 708004      0t0  TCP *:ldaps (LISTEN)
------------------------------------------------------------------------------------------------------------------

 
Robert Maslia provided me with these F5 Pools (?)   
pwc02ls.pwc.ca
 wcalqs10
 wcahqs0d
 wcahqs0c
 wcalqs0y
 wcahqs0e

pwc01ls.pwc.ca
 wcalqs10
 wcalqs0z
 wcahqs0d
 wcahqs0e

pwc03ls.pwc.ca
 wcalqs0z
 wcahqs0e

pwc01ls.sap.pwc.ca
pwc02ls.sap.pwc.ca

 
http://epm.pwc.ca/LDAPCheck.pl  
P&WC Corporate LDAPs
Server				Port	Suc/Fail
wcahqs0d.pwc.ca		  389	SUCCESS
wcahqs0e.pwc.ca		  389	SUCCESS
wcahqs0k.pwc.ca		  389	SUCCESS
wcahqs0n.pwc.ca		  389	SUCCESS
wcalqs0y.pwc.ca		  389	SUCCESS
wcalqs0z.pwc.ca		  389	SUCCESS
wcalqs10.pwc.ca		  389	SUCCESS
wcalqs15.pwc.ca		  389	SUCCESS
wcalqs16.pwc.ca		  389	SUCCESS
wcamos04.pwc.ca		10389	SUCCESS
wcamos05.pwc.ca		10389	SUCCESS
wplrzs02.wskrz.com	10389	SUCCESS
wplrzs03.wskrz.com	10389	SUCCESS

  
==============================
P&WC Corporate LDAP ( http://epm.pwc.ca/pwdcheck.html )
Corporate LDAP Tree WCALQS0Y	141.119.192.7
Corporate LDAP Tree WCALQS0Z	141.119.192.17
Corporate LDAP Tree WCALQS10	141.119.192.87
Corporate LDAP Tree WCAHQS0D	141.119.192.93
Corporate LDAP Tree WCAHQS0E	141.119.192.96	
==============================

  
  Montreal:  wcalqs0z.pwc.ca  141.119.192.17
  Poland:    WPLRZS03.wskrz.com 10.16.2.53 / WPLRZS02.wskrz.com 10.16.2.52 -> contact group is :  UTC MCS EMEA UNIX group - or dominik.dudek@prattwhitney.com
  
  Elias Galvez -  PLM tomcats use :  ldap://pwc01ls.pwc.ca  
  
 **F5 Farm pwcunixls01.pwc.ca  ( WCALQS0V & WCAHQS0C <- LDAP Prod in Plant 1 & Plant 5 )

 
  LDAP on RHEL7 ->  systemctl status sssd.service				# sssd
  LDAP on HPUX  ->  /sbin/init.d/ldapclientd.rc  stop|start		# http://wiki.pwc.ca/display/DP/Configuring+LDAP+on+HP-UX
  
  *LDAP and NIS Configuration at PWC							  http://wiki.pwc.ca/pages/viewpage.action?spaceKey=DP&title=LDAP+and+NIS+Configuration+at+PWC


Also see:  http://wiki.pwc.ca/display/DP/LDAP+and+NIS+Configuration+at+PWC
Find LDAP server list (a bit old) http://wiki.pwc.ca/display/DP/LDAP :

Current New PROD LDAP Servers under alias " pwcunixls01.pwc.ca " in round Robin :
  	WCAHQS0K
	WCAHQS0N
	WCALQS15
	WCALQS16

Current Old Mtl. LDAP/NIS servers, which is still being used only for NIS portion until moved in Jan. 2010 (per Jon) :

 Service alias for Unix LDAP is pwcunixls01.pwc.ca  this will round Robin between wcahqs0v and wcahqs0c.
 Server wcalqs0o does not participate in the load balancing for Unix LDAP
	WCALQS0O
	WCALQS0V
	WCAHQS0C


====================================================
keywords: led leds pdisk omconfig hpacucli blink 

Dell Server Internal drive bay disks: 
Physically identify physical drive 0:0:0 by blinking the drive enclosure disk LED 
 
  wcahqa1h # omconfig storage pdisk action=blink controller=0 pdisk=0:0:0		  <-- Blink led for this drive.
  wcahqa1h # omconfig storage pdisk action=unblink controller=0 pdisk=0:0:0		  <-- Turn off led for this drive.

HP Server Internal drive bay disks:
How to physically identify the drive with LED:

  # hpacucli ctrl slot=2 pd 1E:1:10 modify led=on	  <-- Blink led for this drive.
  # hpacucli ctrl slot=2 pd 1E:1:10 modify led=off	  <-- Turn off led for this drive.
  
	
  
====================================================
On HPUX and Linux  ftp transfer log xferlog :

ftp to wcalqa66 or xlqp065 and check  /var/adm/syslog/xferlog (HP-UX)   and/or    /var/log/xferlog (Linux)


wcalqa66# tail -f /var/adm/syslog/xferlog

xlqp065 # tail -f /var/log/xferlog



keywords:  xfr  xfer wcalqa66

=====================================================

/sudo/bin/ssu

Container				Host
wcalqafy (HP-UX 11.11)  wcalqad0  HP-UX 11.31  SAS8
wcamoa11 (HP-UX 11.11)  wcamoa0w  HP-UX 11.31  Legacy XDM Catia V4 and Dtran



====================================================

When a new SAP printer is created, Fred Cyr will do his part and then we do ours:

We restart CUPS on servers indicated (in this caes wcalqaiw & wcahqa65):   systemctl restart cups-browsed 


ie:
	Bonjour Catherine,
	
	La configuration est complété de mon cote pour SAP
	
	Nom de l’imprimante : 99J213805794
	Code SAP : 05JL
	
	Le support Unix doit exécuter le script pour découvrir l’imprimante sur les serveurs 			<-- we do "systemctl restart cups-browsed "
	
	Serveur principale : wcalqaiw
	Serveur secondaire : wcahqa65
	
	Frederic Cyr



keywords:  browse  browsed cups cups-browsed

====================================================
 

https://access.redhat.com/solutions/799813 
 wcalqu07 - RHEL 5.11 migration RHEL 7 
 
====================================================

HPUX ldap client corrupt :  user unable to connect to hpux box (via reflections, xming, putty,...)

Check the if "ldapclientd" is running! It may be corrupt   ie: 0 bytes in size


zcahqu01: ll /opt/ldapux/bin/ldapclientd
-r-x------   1 root       sys        0 Dec  9  2008 /opt/ldapux/bin/ldapclientd*

Copy file from another hpux box and start the client...

HP-UX 11.11, 11.23 & 11.31: to Start the LDAP client:

 # /sbin/init.d/ldapclientd.rc start
 
 
AIX to restart LDAP on client: 

  ps -ef | grep -i ldap | grep -v grep   		--> we should see: 	/usr/sbin/secldapclntd
  grep -i ldap /etc/inittab						--> we should see: 	ldapclntd:23456789:wait:/usr/sbin/start-secldapclntd  > /dev/console 2>&1
  /usr/sbin/start-secldapclntd					# to start ldap if not running
 
 keywords:  ldap aix
====================================================
On zcalqu03: to clear cache

sss_cache - perform cache cleanup :
 # sss_cache -u p929134		<--  -u,--user login
 # sss_cache -n unix		<--  -n,--netgroup


To get LDAP info on user or group from anywhere do:

 # getent passwd p927439
 p927439:*:81337:1634:Bellavance Jasmin:/home/stingray/p927439:/bin/csh

 # groups p927439
 p927439 : bxd1634 earmil A026 B000 B001 B002 ocelt

 # getent group ocelt
 ocelt:*:70187:ep30172,p927439 
 
 
 
====================================================
 
HP DL580G9 Server WCALQKFQ  iLo access:

Search in SSU Admin for hpadmin or hpadmin_cnsl  to request password.

ssh hpadmin@WCALQKFQ-console
 or
https://wcalqkfq-console/
HP1nv3nt

====================================================
PWC DMZ:   http://wiki6.pwc.ca/pages/viewpage.action?pageId=1444586

Demilitarized Zone (DMZ) is a : subnetwork

Subnet: 141.119.184.-
Subnet: 141.119.209.-
Subnet: 141.119.210.-
Subnet: 141.119.211.- 

	FTP in PCS Cluster:
	   xhqp050.pwc.ca  141.119.184.218 SFTP Service server 2
	   xlqp065.pwc.ca  141.119.184.217 SFTP Service server 1 
	
	XHQP050# pcs resource cleanup SFTP	<-- If SFTP pcs cluster is down !
	
	
	
	FastIT:
	   xlqp051.pwc.ca  141.119.184.140 FAST IT Open VPN - Plant 1
	   xlqt025.pwc.ca  141.119.184.142 FASTIT QA DMZ OpenVPN Pl.1
	   xhqp037.pwc.ca  141.119.184.141 FAST IT Open VPN - Plant 5

 
====================================================
 Linux - convert all to lowercase letters:
 
 tr '[:upper:]' '[:lower:]' < input
 
====================================================
 Glance:
 
# /opt/perf/bin/glance
 
====================================================
RHEL 5 

How to add the gateway IP from CLI:   ip route add default gw 141.119.193.250 
 
  
====================================================
http://linuxmaza.blogspot.com/2010/06/solved-lock-table-is-out-of-available_3950.html
https://casesup.com/category/knowledgebase/problem-fix/rpmdb-lock-table-is-out-of-available-locker-entries

RHEL 5

wcalqw2b#  rpm -qa
rpmdb : Lock table is out of available locks
error : cannot open Packages index using db3 - Cannot allocate memory (12)
error : cannot open Packages database in /var/lib/rpm

rm -f /var/lib/rpm/__db.00* ; rpm -vv --rebuilddb

# rm -f /var/lib/rpm/__db.00*    or
# rm /var/lib/rpm/__db.00*										<-- Remove db file(s) under this directory and  rebuild  RPM database
rm: remove regular empty file `/var/lib/rpm/__db.000'? y
rm: remove regular file `/var/lib/rpm/__db.001'? y
rm: remove regular file `/var/lib/rpm/__db.002'? y
rm: remove regular file `/var/lib/rpm/__db.003'? y

# rpm -vv --rebuilddb												<-- Rebuild Db files
 
 

Also noticed  : 
[2021-09-29 07:35:55]cd /var/lib && tar zcvf /var/preserve/rpmdb-$(date +"%d%m%Y").tar.gz rpm && cd /var/lib/rpm && rm -f __db* && rpmdb --rebuilddb

 

Lucas tip fixing rpmdb  :
 ssh wcalqah2 'bash -s' < ~/fixrpmdb.sh

====================================================
Very nice !!

Andre provided location for old file/folder config data :

/srv/srvdoc/hp800/nodes/<hostname>/data/.....
/srv/srvdoc/linux/nodes/<hostname>/data/...

/srv/srvdoc/linux/nodes/wcahqs0f/data


Old data , backup data

====================================================

If .ICEauthority file is "smart linked" to Elastic Common Schema (ECS) this may be causing issue... 

So the actual .ICEauthority in a user's NFS home folder is "smart linked" to ECS location.

The .ICEauthority may look like a real file, in size, stat info but it's just a link, kind of like a "stub" file ?
 
====================================================
 

==============================================================================

Hard to get console!!

 1) RDP to zcahqt01
 2) cd /home/jade/p913225/iDRAC
 3) ./launch_console.sh					<-- only works on Dell systems

 Host: wcalqs0v-console
 Username: root
 Password: 

Another way:
 1) via my Notebook (via VPN) use IE ->    https://wcalqs0v-console.pwc.ca/
.					   					   root / Wr46Axaf

 2) Integrated Remote Console 	.NET    Java			<-- Select .NET
 
 
=============================================================================================
LDAP: use alais   pwcunixls01.pwc.ca

zcalqu03 ~$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 '(cn=p932459)' | grep -i home
montrealHome: /home/stingray/p932459	
pwcUnrestrictedHome: /home/jade/p932459					<-- unrestrictedHome 
homeDirectory: /home/jade/p932459


zcalqu03 ~$ ldapsearch -D "cn=p931241,ou=Users,o=PWC" -W -H ldaps://pwcunixls01.pwc.ca:636 '(cn=pw191814)' | grep -i home
montrealHome: /home/jade/pw191814
pwcUnrestrictedHome: /home/jade/pw191814				<-- unrestrictedHome means they use local / filesystem not auto.home maps
homeDirectory: /home/jade/pw191814

11/18/2020
[10:39 AM] Stubbs, Jonathon
    Ah, yeah. It's because it's in unrestrictedHome so it allows non-CGD cleared people to log in.
    Because of that they're not allowed to use NFS homes for the most part.

keywords:   UnrestrictedHom Unrestricted Home pwcunixls01
=============================================================================================
  
 
 
 
====================================================
 
 
 
 
====================================================
http://nfs.sourceforge.net/
https://en.wikipedia.org/wiki/File_locking#cite_note-6

Because of Microsoft/Windows file locking , it is strongly recommended against using Linux NFS Automount for these type of files (Excel, Word, Powerpoint, etc,..). If there is a write operation to file in the previous action, the file will be locked. On the next attempt to open/access the file you can experience a read delay in minutes for the same “previously locked” file until the lock is released. This is intermittent but expected behaviour. Which I believe is why you and your colleagues experience these long delays, it's due to this “file locking issue”. 

Saving Microsoft files (Excel, Word, Powerpoint, etc,..) to Linux NFS mounts is at your own risk and at times result in unpredictable behaviour. Microsoft files (Excel, Word, Powerpoint, etc,..) should be saved to a windows drive to share with colleagues or on Sharepoint.  


poor performance

 
====================================================
Lucas Tips:


===== 
 Disable New Mail Notifications for Some Accounts (in Outlook) :
 https://www.slipstick.com/outlook/rules/disable-mail-notifications-accounts/
 
 
===== 
On RHEL 7 we should be using LCM (Ansible) and not cfengine,.. and certainly not both !

 root cron entry:
   #Ansible: lcm_client
   0,30 * * * * /opt/infra/bin/lcm_client.cron

If ntpd restarts in a constant loop throughout the day (you will receive Spectrum alerts for ntpd)

 Action you may need to take is :

 1) comment out cfengine line in root's crontab:
    0,30 * * * * /opt/soe/local/soe_cfengine/sbin/cfexecd -F

 2) comment out cfengine line in the "/etc/rc.d/rc.local" file :
	-rw-r--r--. 1 root root 505 Oct 14 15:55 rc.d/rc.local

---------------------------------------------->
From: Stubbs, Jonathon 
Sent: 02 Dec 2021 1:50 PM
To: Jones, Donald <djones87@dxc.com>
Cc: Blenkhorn, Lucas <lucas.blenkhorn@dxc.com>
Subject: NTP Monitoring switched for Chronyd

Hey Don,

We've run into this a few times in the past where we don't run ntpd on our OpenShift servers. Instead we're running a 
process called chronyd.

Can we make sure we're not monitoring ntpd and that instead we are monitoring chronyd on the following servers:

wcahqk2f
wcahqk2g
wcahqk2h
wcahqk2i
wcahqk2j
wcahqk2k
wcahqk2l
wcahqk2m
xlqp079
xlqp080
xlqp081
xlqp090
xlqp091
xlqp092
xlqp093
xlqp094
xhqp057
xhqp058
xhqp059
xhqp065
xhqp066
xhqp067
xhqp068
xhqp069
xhqt007
xhqt008
xhqt009
xhqt010
xhqt011
xhqt012
xhqt013
xhqt014
wcalqah4
wcalqah5
wcalqah6
wcalqai4
wcalqai5
wcalqai6
wcalqai7
wcalqai8
wcahqa56
wcahqa57
wcahqa58
wcahqa5o
wcahqa5p
wcahqa5q
wcahqa5r
wcahqa5s
wcalqkhg
wcalqkhh
wcalqkhi
wcahqk1h
wcahqk1i
wcahqk1j
wcahqk1k
wcahqk23
wcahqk24
wcahqk25
wcahqk26

Jonathon Stubbs




=====

 A small script to test /etc/fstab entries:

#!/bin/bash
dir=$(mktemp -d)
SYSTEMD_LOG_LEVEL=debug /usr/lib/systemd/system-generators/systemd-fstab-generator \
        "$dir" "$dir" "$dir"
find $dir
 
=====

systemctl 
systemctl status
systemctl -l status sssd -n 20 
systemctl -l status sssd 

====

Script to backup and repair rpmdb :

 zcalqu03# ssh wcahqa69 'bash -s' < ~/fixrpmdb.sh
 
--- 
# cat ~/fixrpmdb.sh
#!/bin/bash
#set -x
version=$(cat /etc/redhat-release | grep -oP "[0-9]+" | head -1)

if [[ $version == "8" ]]; then
  if lsof | grep /var/lib/rpm || ! /usr/lib/rpm/rpmdb_verify -q /var/lib/rpm/Packages || ! dnf repolist &> /dev/null || ! rpm -qa 1> /dev/null; then
    printf '[ERROR] RPMdb may be corrupted, attempting to resolve...\n'
    cd /var/lib && tar zcvf /var/preserve/rpmdb-$(date +"%d%m%Y").tar.gz rpm && cd /var/lib/rpm && rm -f __db* && rpmdb --rebuilddb
    if [ $? != 0 ] || ! /usr/lib/rpm/rpmdb_verify -q /var/lib/rpm/Packages || ! dnf repolist &> /dev/null || ! rpm -qa 1> /dev/null; then
      printf '[FATAL] RPMdb rebuild failed or further errors came up. No further actions will be taken.\n'
      exit
    fi
    /usr/bin/dnf check-update -q &>/dev/null
    return=$?
    if [[ $return != 0 ]] && [[ $return != 100 ]]; then
      rm -f *lock*
      printf '[INFO] Removing lock files...\n'
      /usr/bin/dnf check-update -q &>/dev/null
      return=$?
      if [[ $return != 0 ]] && [[ $return != 100 ]]; then
        printf '[FATAL] RPMdb rebuild failed or further errors came up. No further actions will be taken.\n'
        exit
      fi
    fi
    printf '[SUCCESS] Fixed rpmdb'
  fi
  exit
fi

if lsof | grep /var/lib/rpm || ! /usr/lib/rpm/rpmdb_verify -q /var/lib/rpm/Packages || ! yum repolist &> /dev/null || ! rpm -qa 1> /dev/null; then
  printf '[ERROR] RPMdb may be corrupted, attempting to resolve...\n'
  cd /var/lib && tar zcvf /var/preserve/rpmdb-$(date +"%d%m%Y").tar.gz rpm && cd /var/lib/rpm && rm -f __db* && rpmdb --rebuilddb
  if [ $? != 0 ] || ! /usr/lib/rpm/rpmdb_verify -q /var/lib/rpm/Packages || ! yum repolist &> /dev/null || ! rpm -qa 1> /dev/null; then
    printf '[FATAL] RPMdb rebuild failed or further errors came up. No further actions will be taken.\n'
    exit
  fi
  /usr/bin/yum check-update -q &>/dev/null
  return=$?
  if [[ $return != 0 ]] && [[ $return != 100 ]]; then
    rm -f *lock*
    printf '[INFO] Removing lock files...\n'
    /usr/bin/yum check-update -q &>/dev/null
    return=$?
    if [[ $return != 0 ]] && [[ $return != 100 ]]; then
      printf '[FATAL] RPMdb rebuild failed or further errors came up. No further actions will be taken.\n'
      exit
    fi
  fi
  printf '[SUCCESS] Fixed rpmdb'
  exit
fi 
---
 
 
======================================================================================================

wcalqkab# crontab -l
	...
	...
	#Script to check Memory consumption every 2  minutes using top:
	*/2 * * * *  /opt/scripts/ja


wcalqkab# ll /opt/scripts/ja
-rwxr----- 1 root root 73 Jan 17 15:47 /opt/scripts/ja

wcalqkab# cat /opt/scripts/ja
#/bin/bash
top -m -d 60 -b -n 1 > /var/log/top/$(date +"%F_%T").MEM 2>&1

======================================================================================================








======================================================================================================







======================================================================================================








======================================================================================================







======================================================================================================








======================================================================================================







======================================================================================================



